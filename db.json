{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-volantis/source/css/Readme.md","path":"css/Readme.md","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/first.styl","path":"css/first.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/app.js","path":"js/app.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/aplayer.js","path":"js/plugins/aplayer.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/parallax.js","path":"js/plugins/parallax.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/rightMenu.js","path":"js/plugins/rightMenu.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/rightMenus.js","path":"js/plugins/rightMenus.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/hexo.js","path":"js/search/hexo.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/tags/contributors.js","path":"js/plugins/tags/contributors.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/tags/friends.js","path":"js/plugins/tags/friends.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/tags/sites.js","path":"js/plugins/tags/sites.js","modified":0,"renderable":1},{"_id":"source/img/07aa0ae726b0476a8db82fddc3ee1016.png","path":"img/07aa0ae726b0476a8db82fddc3ee1016.png","modified":0,"renderable":0},{"_id":"source/img/2023-07-08101610.png","path":"img/2023-07-08101610.png","modified":0,"renderable":0},{"_id":"source/img/2023-07-08102810.png","path":"img/2023-07-08102810.png","modified":0,"renderable":0},{"_id":"source/img/20230708102636.jpg","path":"img/20230708102636.jpg","modified":0,"renderable":0},{"_id":"source/img/20230708190821.png","path":"img/20230708190821.png","modified":0,"renderable":0},{"_id":"source/img/20230710103743.png","path":"img/20230710103743.png","modified":0,"renderable":0},{"_id":"source/img/20230710105357.png","path":"img/20230710105357.png","modified":0,"renderable":0},{"_id":"source/img/20230710110332.png","path":"img/20230710110332.png","modified":0,"renderable":0},{"_id":"source/img/20230711021718.png","path":"img/20230711021718.png","modified":0,"renderable":0},{"_id":"source/img/20230711021839.png","path":"img/20230711021839.png","modified":0,"renderable":0},{"_id":"source/img/20230711022045.png","path":"img/20230711022045.png","modified":0,"renderable":0},{"_id":"source/img/20230711022147.png","path":"img/20230711022147.png","modified":0,"renderable":0},{"_id":"source/img/20230711022309.png","path":"img/20230711022309.png","modified":0,"renderable":0},{"_id":"source/img/20230711022430.png","path":"img/20230711022430.png","modified":0,"renderable":0},{"_id":"source/img/20230711022532.png","path":"img/20230711022532.png","modified":0,"renderable":0},{"_id":"source/img/20230711022631.png","path":"img/20230711022631.png","modified":0,"renderable":0},{"_id":"source/img/20230711022723.png","path":"img/20230711022723.png","modified":0,"renderable":0},{"_id":"source/img/20230711022759.png","path":"img/20230711022759.png","modified":0,"renderable":0},{"_id":"source/img/20230711022913.png","path":"img/20230711022913.png","modified":0,"renderable":0},{"_id":"source/img/20230711023058.png","path":"img/20230711023058.png","modified":0,"renderable":0},{"_id":"source/img/20230711023204.png","path":"img/20230711023204.png","modified":0,"renderable":0},{"_id":"source/img/20230711023306.png","path":"img/20230711023306.png","modified":0,"renderable":0},{"_id":"source/img/20230711023341.png","path":"img/20230711023341.png","modified":0,"renderable":0},{"_id":"source/img/20230711023453.png","path":"img/20230711023453.png","modified":0,"renderable":0},{"_id":"source/img/20230711023600.png","path":"img/20230711023600.png","modified":0,"renderable":0},{"_id":"source/img/2ece7035eff8421caa19710c49fdcb56.png","path":"img/2ece7035eff8421caa19710c49fdcb56.png","modified":0,"renderable":0},{"_id":"source/img/39f26dc5d425481f805b8398349bc3c9.png","path":"img/39f26dc5d425481f805b8398349bc3c9.png","modified":0,"renderable":0},{"_id":"source/img/4e1aba06c25a4d72a614a241a2210e7f.png","path":"img/4e1aba06c25a4d72a614a241a2210e7f.png","modified":0,"renderable":0},{"_id":"source/img/5933903e67974aa3b14b1747ec5f80d9.png","path":"img/5933903e67974aa3b14b1747ec5f80d9.png","modified":0,"renderable":0},{"_id":"source/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png","path":"img/38a6d0d7ed0e4de4ba4f12205ccd4226.png","modified":0,"renderable":0},{"_id":"source/img/669fc716842945babcba30a7e765676b.png","path":"img/669fc716842945babcba30a7e765676b.png","modified":0,"renderable":0},{"_id":"source/img/7.19.1.png","path":"img/7.19.1.png","modified":0,"renderable":0},{"_id":"source/img/782c3b5b474a4da0bf041e4b2575a50a.png","path":"img/782c3b5b474a4da0bf041e4b2575a50a.png","modified":0,"renderable":0},{"_id":"source/img/805cda76333044aa8420570d5078bd20.png","path":"img/805cda76333044aa8420570d5078bd20.png","modified":0,"renderable":0},{"_id":"source/img/83df4ff69856410cb08bd55acd7eb323.png","path":"img/83df4ff69856410cb08bd55acd7eb323.png","modified":0,"renderable":0},{"_id":"source/img/8e21b946d349464abf0aa63a5fc5b8a1.png","path":"img/8e21b946d349464abf0aa63a5fc5b8a1.png","modified":0,"renderable":0},{"_id":"source/img/90a857fd11c649f99d59a244b8a8cd28.png","path":"img/90a857fd11c649f99d59a244b8a8cd28.png","modified":0,"renderable":0},{"_id":"source/img/9f35ab5e7885489c9be07a33511c9d75.png","path":"img/9f35ab5e7885489c9be07a33511c9d75.png","modified":0,"renderable":0},{"_id":"source/img/background.jpg","path":"img/background.jpg","modified":0,"renderable":0},{"_id":"source/img/Embedded IDE.png","path":"img/Embedded IDE.png","modified":0,"renderable":0},{"_id":"source/img/background.png","path":"img/background.png","modified":0,"renderable":0},{"_id":"source/img/bx.png","path":"img/bx.png","modified":0,"renderable":0},{"_id":"source/img/c-pointer.png","path":"img/c-pointer.png","modified":0,"renderable":0},{"_id":"source/img/cx.png","path":"img/cx.png","modified":0,"renderable":0},{"_id":"source/img/d0da5e410a244d3abd35a081c4b188f8.png","path":"img/d0da5e410a244d3abd35a081c4b188f8.png","modified":0,"renderable":0},{"_id":"source/img/dakai.png","path":"img/dakai.png","modified":0,"renderable":0},{"_id":"source/img/e4662a14a46b447eb7d9059a53696eb7.png","path":"img/e4662a14a46b447eb7d9059a53696eb7.png","modified":0,"renderable":0},{"_id":"source/img/e852e2780f0344d296ccbc4565e3b6b5.png","path":"img/e852e2780f0344d296ccbc4565e3b6b5.png","modified":0,"renderable":0},{"_id":"source/img/ef0365f8855544b98ed88fe93f69aaeb.png","path":"img/ef0365f8855544b98ed88fe93f69aaeb.png","modified":0,"renderable":0},{"_id":"source/img/hex.png","path":"img/hex.png","modified":0,"renderable":0},{"_id":"source/img/idesrc.png","path":"img/idesrc.png","modified":0,"renderable":0},{"_id":"source/img/keil.png","path":"img/keil.png","modified":0,"renderable":0},{"_id":"source/img/ko.png","path":"img/ko.png","modified":0,"renderable":0},{"_id":"source/img/lao.png","path":"img/lao.png","modified":0,"renderable":0},{"_id":"source/img/lao2.png","path":"img/lao2.png","modified":0,"renderable":0},{"_id":"source/img/logo.png","path":"img/logo.png","modified":0,"renderable":0},{"_id":"source/img/mcu.png","path":"img/mcu.png","modified":0,"renderable":0},{"_id":"source/img/peizhi.png","path":"img/peizhi.png","modified":0,"renderable":0},{"_id":"source/img/shao.png","path":"img/shao.png","modified":0,"renderable":0},{"_id":"source/img/shezhi.png","path":"img/shezhi.png","modified":0,"renderable":0},{"_id":"source/img/src.png","path":"img/src.png","modified":0,"renderable":0},{"_id":"source/img/stc.jpg","path":"img/stc.jpg","modified":0,"renderable":0},{"_id":"source/img/stc定时器.png","path":"img/stc定时器.png","modified":0,"renderable":0},{"_id":"source/img/tx.png","path":"img/tx.png","modified":0,"renderable":0},{"_id":"source/img/uart.png","path":"img/uart.png","modified":0,"renderable":0},{"_id":"source/img/uart1.png","path":"img/uart1.png","modified":0,"renderable":0},{"_id":"source/img/xuanzhe.png","path":"img/xuanzhe.png","modified":0,"renderable":0},{"_id":"source/img/vscode.png","path":"img/vscode.png","modified":0,"renderable":0},{"_id":"source/img/wx.jpg","path":"img/wx.jpg","modified":0,"renderable":0}],"Cache":[{"_id":"source/_data/friends.yml","hash":"069dde57c62685b5fe744b97e8cc43c68af01815","modified":1705841226444},{"_id":"source/custom/binft.js","hash":"4eee49013bd933dd7bf6a04548abd50ec20e89f0","modified":1705841226446},{"_id":"source/about/index.md","hash":"464785fc02e0e6752538f89c07407aec4b8946a5","modified":1705841226446},{"_id":"source/categories/index.md","hash":"6d61f6ae46a35bace9f999f89330acbe64013cce","modified":1705841226446},{"_id":"source/custom/darkmode.js","hash":"1eb53ec9f1643bd399c5d7198af178aef69ccd72","modified":1705841226447},{"_id":"source/htmll/renwu.html","hash":"d729194615151c7bbb3f057f7684c760919a413a","modified":1705841226447},{"_id":"source/custom/darkmode.css","hash":"e373c41670fefd7e97b9a1b200a2bf27aaebef66","modified":1705841226447},{"_id":"source/_posts/3D建模.md","hash":"35412c897dc6de00adc02d0acb567936b278f2b9","modified":1706719944730},{"_id":"source/_posts/51大作业.md","hash":"9fd90222cef7a5464bbe5de182d665ba21e66bca","modified":1706716367403},{"_id":"source/_posts/VUE.md","hash":"24f9bb4bc1cf22f1dedfa2fd66fe3252bb0454cb","modified":1706720128982},{"_id":"source/friends/index.md","hash":"308758e5169ca2793a56c1e37db10f57f2ca1ec3","modified":1705841226447},{"_id":"source/img/07aa0ae726b0476a8db82fddc3ee1016.png","hash":"61adf18a94d44155e39a8384ce7315d852b31a00","modified":1705841226448},{"_id":"source/_posts/VScode配置C51环境.md","hash":"da375422e16421ae266dcbd17d867159fa82124d","modified":1706718911768},{"_id":"source/_posts/从51到32.md","hash":"61078c3b3107805be7c62821698072803012b7fc","modified":1706712793600},{"_id":"source/img/20230708102636.jpg","hash":"eac25c61eb9c72ed620de4ff65282c2982d2081f","modified":1705841226450},{"_id":"source/_posts/前端.md","hash":"ec6fee29149e3f3c9df325426b6a1825cb621299","modified":1705841226446},{"_id":"source/img/20230710105357.png","hash":"6b24dce27d55d4b65a80ce85d05dc4f675ba0110","modified":1705841226452},{"_id":"source/img/20230710110332.png","hash":"1e47639dfb9d7879aa8fd431507dd9cbc0f03ccc","modified":1705841226453},{"_id":"source/img/20230711021839.png","hash":"ed498ee7da065a326c74a67733e3367cff273555","modified":1705841226453},{"_id":"source/img/20230711021718.png","hash":"c0fd6d381b695ff2c1c7a941657c50516466446f","modified":1705841226453},{"_id":"source/img/20230711022147.png","hash":"52d4a2ed8c6d7b2bda086ef3374c82f8da45352d","modified":1705841226455},{"_id":"source/img/20230711022430.png","hash":"ebd7f858edf60fe3808e43103874039119d80ad2","modified":1705841226456},{"_id":"source/img/20230711022532.png","hash":"02971d0d8f4616cad1d8f315e940dae479509227","modified":1705841226456},{"_id":"source/img/20230711022631.png","hash":"1050959f2b6763fd0bbf5d85ecccc01aff66a07b","modified":1705841226456},{"_id":"source/img/20230711022723.png","hash":"1bee09f0fa5cfaddef814920097781d63030515a","modified":1705841226457},{"_id":"source/img/20230711022759.png","hash":"2e132b4f2747466672141900e6c22c959188ca58","modified":1705841226457},{"_id":"source/img/20230711022913.png","hash":"b6ecf3f1b741730b91cbe5129507a13385e439d7","modified":1705841226458},{"_id":"source/img/20230711023058.png","hash":"6243c3c48bf38caff69c18c86c4c888898778672","modified":1705841226458},{"_id":"source/img/20230711023204.png","hash":"ebe36a542d20ffb143f4dba024985dd0e76f4a10","modified":1705841226458},{"_id":"source/img/20230711023306.png","hash":"d6ae17edfd1f3555b889b240ab00daa45b38b46f","modified":1705841226458},{"_id":"source/img/20230711023341.png","hash":"033d450c747f338c194e35361e1e31314db845fa","modified":1705841226459},{"_id":"source/img/20230711023453.png","hash":"57b5d97380bb1485067199e2dd1c67de8698bb81","modified":1705841226459},{"_id":"source/img/20230711023600.png","hash":"3c7304736df1893c7af770a66f40bfcbc1738de5","modified":1705841226460},{"_id":"source/img/2ece7035eff8421caa19710c49fdcb56.png","hash":"17df545a1014ffc69d7351f3690f521e369f572a","modified":1705841226460},{"_id":"source/img/39f26dc5d425481f805b8398349bc3c9.png","hash":"beef6509591ec148ccf735617aba11d312cca5bb","modified":1705841226461},{"_id":"source/img/4e1aba06c25a4d72a614a241a2210e7f.png","hash":"28ac7027b623e9837c9ff9e6d745cf1a22740677","modified":1705841226461},{"_id":"source/img/5933903e67974aa3b14b1747ec5f80d9.png","hash":"55b8cf27e313a02665ae533859002c2641db5a1a","modified":1705841226462},{"_id":"source/img/7.19.1.png","hash":"f4647d856eaaaefde041fc18f619ec7ab68f8f87","modified":1705841226462},{"_id":"source/img/782c3b5b474a4da0bf041e4b2575a50a.png","hash":"dee0164d2ed4a10dc1d63699c699d6354e0b10e2","modified":1705841226463},{"_id":"source/img/805cda76333044aa8420570d5078bd20.png","hash":"08737dbd0472d115a085018eb8da4890c541e33c","modified":1705841226463},{"_id":"source/img/83df4ff69856410cb08bd55acd7eb323.png","hash":"f334c51dd228fbade1d747a58e8d5bf98223caa0","modified":1705841226464},{"_id":"source/img/8e21b946d349464abf0aa63a5fc5b8a1.png","hash":"8b760de363cca2bbd1f0225cf86fdf41b31b3b07","modified":1705841226464},{"_id":"source/img/90a857fd11c649f99d59a244b8a8cd28.png","hash":"1d09247454f6cdc56f275d673693cb099459cc00","modified":1705841226464},{"_id":"source/img/9f35ab5e7885489c9be07a33511c9d75.png","hash":"43d4c8df7f783122a6f39576fdaf9cb73e54d9ee","modified":1705841226465},{"_id":"source/img/bx.png","hash":"1541c9cce100555a343e35d34f402c0c6558c6db","modified":1706130414347},{"_id":"source/img/cx.png","hash":"591bbb0b57a415f656ff1c79047b21e1e372ffdd","modified":1706132874198},{"_id":"source/img/c-pointer.png","hash":"2e0e98fcd988f502c83f62b1664135c55dc47a5d","modified":1705841226477},{"_id":"source/img/e4662a14a46b447eb7d9059a53696eb7.png","hash":"6c85d73cbfff140eedd5026b7f35edce76616481","modified":1705841226479},{"_id":"source/img/ef0365f8855544b98ed88fe93f69aaeb.png","hash":"a240afa671f0d2357ab9c9d99f0ad6213d294350","modified":1705841226480},{"_id":"source/img/e852e2780f0344d296ccbc4565e3b6b5.png","hash":"decf88c2beac6f0c2ecacb05d4ca6853bfe0b241","modified":1705841226479},{"_id":"source/img/logo.png","hash":"8dbf79ab0d76586db1b8a658f9e2d07abefbcb4e","modified":1705841226480},{"_id":"source/img/uart1.png","hash":"0dbb71faf9f2db691887e826d45ea5fee1eaa32c","modified":1706136454733},{"_id":"source/img/uart.png","hash":"a0000c8051b170759294d7ed0c3c37367288ec63","modified":1706134702734},{"_id":"source/mylist/index.md","hash":"4d8e774094b05c570f7eec636719a322b4d5195c","modified":1705841226484},{"_id":"source/tags/index.md","hash":"62c5b86c7986b58ed3e5ded7114799f287a32930","modified":1705841226484},{"_id":"source/img/2023-07-08101610.png","hash":"12ff613e74e7946f36d2aa7562ed435fbb78a8cd","modified":1705841226449},{"_id":"source/img/2023-07-08102810.png","hash":"76067ff04a3c8779e879caf47c0b75b378951928","modified":1705841226450},{"_id":"source/img/20230710103743.png","hash":"d3cb9e006461cee72a7f0bb3ca1ec4c87aebe540","modified":1705841226451},{"_id":"source/img/20230708190821.png","hash":"2b9e3921c9dd433654fa98b16cff3f027c7665b5","modified":1705841226451},{"_id":"source/img/20230711022045.png","hash":"d3831e4297a89421120a5a4285e78ee2122c9abf","modified":1705841226454},{"_id":"source/img/20230711022309.png","hash":"41d37ae1482ba8e7804100a501bff49489e7f40d","modified":1705841226455},{"_id":"source/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png","hash":"c5d3fa72a66d992c1f6fd7b4d4974066dc918dcc","modified":1705841226461},{"_id":"source/img/669fc716842945babcba30a7e765676b.png","hash":"a4b58506385c70707db7b2f04c90e6e4db498d6e","modified":1705841226462},{"_id":"source/img/tx.png","hash":"15a2cb9ce05688175753e2f92bdba1968ba2e305","modified":1705841226481},{"_id":"source/img/d0da5e410a244d3abd35a081c4b188f8.png","hash":"3d4159df75cf5cd51509e3b34c89ab14531e9fb0","modified":1705841226478},{"_id":"source/img/keil.png","hash":"e224f737526cd188cda3cc54b2b898ae6e03a49f","modified":1706713779753},{"_id":"source/img/stc定时器.png","hash":"69b920e25cdad360b13938402b2aa9513324edf3","modified":1706121013874},{"_id":"source/img/xuanzhe.png","hash":"866b04036ff65e6cd5329fff68e971e2349579c8","modified":1706713925406},{"_id":"source/img/stc.jpg","hash":"f4893828d42b54a028b01d3726811c7bac5313a2","modified":1706120727564},{"_id":"source/img/background.jpg","hash":"d14d2a35c3ffbefa1a1fe32143066cddb591da60","modified":1705841226468},{"_id":"source/img/ko.png","hash":"a3bf09f04f86e28f16dfe72ecff15987a06f18d6","modified":1706714364797},{"_id":"source/img/lao.png","hash":"1476ab67e2d1f1cf38b619ec5d18b20cc87a33e9","modified":1706715095204},{"_id":"source/img/mcu.png","hash":"d4d1ee90e711cfd7debf6d009fa9ec780a35dc45","modified":1706714387644},{"_id":"source/img/src.png","hash":"30ff500d0fb4ea6ef186727b2a19f318467700f8","modified":1706714627655},{"_id":"source/img/vscode.png","hash":"e3055c51e2a15850f3772ab79b03d6b9866bb0dd","modified":1706712657432},{"_id":"source/img/wx.jpg","hash":"e441b120606aa40cf11d00b4fc886024d84ef47f","modified":1705841226484},{"_id":"source/img/dakai.png","hash":"be65aa514b5996941b8b418a2d6febe524d98b11","modified":1706714923373},{"_id":"source/img/idesrc.png","hash":"7dec33f2f5679c5271d8cb86e422e7c7a11cfc3a","modified":1706714747841},{"_id":"source/img/peizhi.png","hash":"25161284428e780eacb9c4d237a5734ddab9757a","modified":1706714460662},{"_id":"source/img/shao.png","hash":"e5247c104c8fa25fa6d84c424b94a1e830c096ad","modified":1706714776084},{"_id":"source/img/Embedded IDE.png","hash":"23c59e65086da507185573338f619f273e9b0535","modified":1706712935008},{"_id":"source/img/hex.png","hash":"fb5b23c69a3d353b75e9834d374c1fd5c8b8e19a","modified":1706714850898},{"_id":"source/img/shezhi.png","hash":"16ece81b5fa6bb03178c593e2716f0c26b89c14a","modified":1706713847025},{"_id":"source/img/lao2.png","hash":"3aa0adbb0d1a3f78782af2501ff8ba042d8a2871","modified":1706715195308},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/blank.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/README.md","hash":"7c43923ced74698b0dfffb0ff1c53a70ad16e6fb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/CHANGELOG.md","hash":"10dd4ec44677baae3cd2e099ba6731be5b97d2b2","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/package.json","hash":"c0629039d3f77b26877de48080edf449b3618f57","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/LICENSE","hash":"13b0862f4ed1914abe887a47df2c3ca5adfa8f3f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/_config.yml","hash":"1d3b1d5ee64d9785683a374d58badfce3c769ca2","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/404.ejs","hash":"48e160ad704be637cafc433d2365fc0eb8bab8cb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_pre.ejs","hash":"3ac804505c282ff8b16858037c1d2bf9305c3063","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/list.ejs","hash":"a85b2984717ee6d5058ec5635f3f287f45c3d4ba","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/index.ejs","hash":"8ea7d49272b068cd1a4037846c72eb37e9823512","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/docs.ejs","hash":"16917af05431c049aa103744a5fb2595d5848d4c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/archive.ejs","hash":"f99913b253f8ab22f81280a6ce5145bec3cd3de6","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/languages/en.yml","hash":"cb84db341aeab91676b603cf47bba07c57474d94","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/category.ejs","hash":"9ee883e5f73c05b3963770b74b63d7bb7e4e1ed5","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/languages/zh-TW.yml","hash":"30df1cf6181375c4d05cb6dcfbdc0487ea39369c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/post.ejs","hash":"16917af05431c049aa103744a5fb2595d5848d4c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/languages/zh-CN.yml","hash":"3cf7e00abc512c446f8506887ee02605f7e229dd","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/page.ejs","hash":"16917af05431c049aa103744a5fb2595d5848d4c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/artalkcount.ejs","hash":"94c9e591e38ac00d6beafa44de4d29e70680c673","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/tag.ejs","hash":"696e7b1c70b4438e6a8d925f99cbc4222dd4035d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/author.ejs","hash":"68e8f198c406b6946fbf0a0f756e8a334982ba84","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/friends.ejs","hash":"d976c3d2180432319cc4deb503481f0c606811a6","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/category.ejs","hash":"e95b88bf5f8b11b4f886859cf634a72aa46c8650","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/layout.ejs","hash":"9fa2628f97d59796f15126ad016489d072814637","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/share.ejs","hash":"0f3b1db92319734baa8da1636340839ed2d37a7b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/date.ejs","hash":"ba6c554dbc6c1870debb2b87c5fa25caa089be8f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/music.ejs","hash":"2c1884e59131d47a82d2556ac28ef784b4ddaa10","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/tags.ejs","hash":"24aae7e64ce05ddb13e793a181bfa74257a830e4","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/thumbnail.ejs","hash":"60045f2bf695b4be5ad3fd19db46890f1cdee68a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/updated.ejs","hash":"edf445ad8153419a5dc7c4ec4c8490967cd9d33d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/counter.ejs","hash":"1bd825605f3dacf685848b93a25269f49269b4d7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/wordcount.ejs","hash":"eebaab3821af95ee64d8d56f33ca6c9c60b9b6f0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/walinecount.ejs","hash":"a407ec847c8f0e224efd22b7234e2921cca1d5be","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/categories.ejs","hash":"c2bc61780cab948ef8ab5076511ebccacab1cd79","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/archive.ejs","hash":"d5f776437c108c72c002b11f1d23d30b50e0079a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/footer.ejs","hash":"baec06d381d8358ee6762e4b0a67d27cd0c7a511","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/cover.ejs","hash":"b03a268d75dedeb8d6e29e3e352bd6cdf921545a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/head.ejs","hash":"c514d24e014fbb8b28820c76fe6b3cce7353115d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/header.ejs","hash":"06ce9cd8ad7e64e83cb52cda555fd73b1c6c2b52","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/side.ejs","hash":"27f9df84585ffb24e2ba2423761f90f690c65787","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/meta.ejs","hash":"ced9c966a9f4d84e485c325ef3551be218ddd033","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/_pre.ejs","hash":"2f635098c719d9dbf0f23eeead370c6550d1ecff","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/article.ejs","hash":"11d61f5ce1bdc6f1fb1163e5e7a213fb5cbb6b53","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/category.ejs","hash":"d8e7ad7e1418659208036a0a43cb4db2ee61abd7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/blogger.ejs","hash":"b1429acdd791cd5f00a0f0303bcd8674cf73ed52","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/copyright.ejs","hash":"8e4929772970e58482f10e0867692cfcf59dee5d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/grid.ejs","hash":"7d266197f6037f32c33bd74741730c5558417402","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/header.ejs","hash":"b132e332ddf12d1bb1d99480200561d8c38edd04","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/group.ejs","hash":"2eed9614049441b51e6819f393f80faf5441870b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/list.ejs","hash":"0c9319e7e81d88c721b3fe9acf6171f81faade68","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/lastupdate.ejs","hash":"c311ba4c8b255c45313dc1ab7ddafd99ec7fe8af","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/load.ejs","hash":"b71e0617165d5db546d22297229d7f380091fd83","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/page.ejs","hash":"e6a20fb75a3e835a404dddd929db4d3762a367c0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/music.ejs","hash":"2f560f3168e3811cd1d8d8a6bad9112932be9b04","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/post.ejs","hash":"7d144c80f2980efaab6198512746c0c5d77f03db","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/references.ejs","hash":"08f2dbd23fc9835f4c24bdda4cf288593d61c25a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/related_posts.ejs","hash":"f7a514d1f3f5ae40c6fb55d61f8b2a0bba13401c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/qrcode.ejs","hash":"128b7c6b4b2191ead4079688e55333bb97df0cdd","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/text.ejs","hash":"9302a6084c8f930532f7f8793b1b20ca1964473e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/events/index.js","hash":"af7aaa4431393889671853db03c8b684265eaa50","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/replace.js","hash":"aa6fe807d7b24a60475ce8126a1be7b314cd26ba","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/content-visibility.js","hash":"048a8f1b80e8999d5f7a37bb8c4dabdebbebabdc","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/z-lazyload.js","hash":"df6c5b0a6eff5e655d2b8de85c646ba1e5a16535","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/img.js","hash":"160732831bec5baf89fa07a85fec5229c3cb9cd7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/btn.js","hash":"e9b6e26f106505cf14a72524ab5e8b5bc85f362a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/btns.js","hash":"648671420faa0ac00076a8c7bb011c908b83fd5a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/contributors.js","hash":"a00573000e7ddf7a9d2f03f29fd62cb8a9752a48","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/checkbox.js","hash":"0798edc6833d5978709ca5ed56aed33cea46e694","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/dropmenu.js","hash":"19176a6edf7acc6ad31c96961e59da526f200980","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/fancybox.js","hash":"9eac73fa2d7d14ae585b302255270933641a4859","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/folding.js","hash":"a809988c63f358e2ae903d905dc81ed80860bacd","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/frame.js","hash":"e78834c005bda8f80ba86c78911b9db7566b878b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/friends.js","hash":"a902e1ac279014a30eda85e477c52144214cc66c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/ghcard.js","hash":"1ed7c1508180756ad4752769aa91289d37a7e23d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/image.js","hash":"63a4b3e1e3d661b6ab2b3fcfcfb657e3b632b9cb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/md.js","hash":"66d6b7c17638e778a8796d64cd42d0c622eba67e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/inline-labels.js","hash":"08fbdc0ea622270e1236a28778f875c8ad2e5516","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/link.js","hash":"9dec9c65819d1135a7a248adaa26acbf24427cd0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/pandown.js","hash":"4d6f6dab955106ade379d6c55603e1e7eb97a107","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/media.js","hash":"b3871bc024d7fce9500f31073d690c4cd33bce18","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/site.js","hash":"dd23a06f2e8a3cc70730cf199a0661777532ff0b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/note.js","hash":"ac86ba50da98d9546522feaca672259620b053d8","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/span.js","hash":"b825115f037386797efa1b0aee3a1df21629f243","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/swiper.js","hash":"f0171f07f494c0b0f3f8af265344add15813a676","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/custom-files.js","hash":"8483fcdc7dbbfde40276dc3daa1ddc5e40380360","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/first-style.js","hash":"ba2e2325a365704abae3f1d204b058731e21bfbf","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/table.js","hash":"ad82046fc64f932019d8a7b3e9a8ff07973a6c3b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/timeline.js","hash":"9b6b88ada712a8f3a04a825cf73a409f072ed045","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/tabs.js","hash":"f0054f1c970cac728b3ad289a3c531c070c06896","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/getList.js","hash":"595400c37b79599f779876808e0308ead7de0a32","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/related-posts.js","hash":"cab8c291a8ff460b29b3248ac86827c143aca9ee","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/revisioned.js","hash":"57a9d91cd755f8100f149a0fe6cbb45d9c77e13c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/tagcloud.ejs","hash":"a68ccb41f7b589f9076a750e77e17f178af3e9d0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/style.styl","hash":"00892839230a1b05a5f9d9350baacd67d894fc85","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/first.styl","hash":"55fe35847a1d1d831eb71288c0233efb1dd8a630","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/app.js","hash":"8a963d59738599a9b9a0cbce6a543c45ccb6e4e9","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/Readme.md","hash":"cf408308dcbc62f4fc2bd5aa38303b368cc88a7e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/toc.ejs","hash":"200bf0096d8965e5fb7039b261317c848e36be85","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/dock.ejs","hash":"7abe0c7080dfcec063b4f52e4ca569bf0510c7c1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/featured.ejs","hash":"7abe0c7080dfcec063b4f52e4ca569bf0510c7c1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/layout.ejs","hash":"39a463ce33ce6138d40055e72118941515ba2f63","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/index.ejs","hash":"462334ae298659214464f3a8af3da1c514cf76e1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/webinfo.ejs","hash":"29b70c3e5882afa3045b1282d03f88d30ccf5e84","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/search.ejs","hash":"2f536370d1b51fa7c33798be21e690638f0df74e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/focus.ejs","hash":"7abe0c7080dfcec063b4f52e4ca569bf0510c7c1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/_ctrl.ejs","hash":"8dd82dc0d7cd59c55d9e1239ec80c0303a4069bf","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/analytics/LCCounter.ejs","hash":"c83c4b6c3fbf37721e6e6c6e41695fa26abc770a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/content-visibility-scroll-fix.ejs","hash":"8aa467244e0976efbdc80e28dd266b0ac0bd2dc7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/global.ejs","hash":"27a98869f648ff7aed5c290d900d4cf06e51f2f8","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/toc.ejs","hash":"d71bac519593ac09e9e5c521e5999925e253f4b6","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/aplayer/layout.ejs","hash":"51b4f54a165fbca56c9beec3ce19bc62f10097d9","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/aplayer/script.ejs","hash":"dc0b773f0d26c660b36625fdbd17a2d8455e6095","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/chat/index.ejs","hash":"56d2e577fbd08859e118cfb1d1b8d230850a3675","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/analytics/script.ejs","hash":"a757c6fd89e11ab3e4cbd3e4cc02091a836fcd70","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/github-api/script.ejs","hash":"8c414c5c39fb6c36c2a4881463f3dc3346cc9b46","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/darkmode/script.ejs","hash":"742f0e0988741e3eb82bb0d99a081447b45a41b1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/highlight/script.ejs","hash":"06befe70f47454fbfaa95245fe4cdb8d4f6f9f3c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/nodewaves/script.ejs","hash":"f28854fba682c345424f6217525507f0a3e2b17d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/end-of-support/script.ejs","hash":"b415d8e5dfca4a47c199b1adeb220ff57eaec219","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/lazyload/script.ejs","hash":"d80dd5864200d86bc6c43d0fd1efab6538e703cf","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/parallax/script.ejs","hash":"7c88aedd458b2c9df27e57db5c6ecb3090c58eba","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/index.ejs","hash":"3d781c01f494b89d1d31d3210c100c822787c9b7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/pjax/pdata.ejs","hash":"eb90a00163519e6ed01a4f38380caf4dc2bd5049","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/pjax/animate.ejs","hash":"050f626db44ef423e5f8689447197a37f7de6e27","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/pjax/index.ejs","hash":"4daf9937293b6e2b4bf458d3e868da18900d2864","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/preload/script.ejs","hash":"1c3bf70b6df9da59c5554a921d7447e20684241d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/search/script.ejs","hash":"c6525e6d76b6e968a1803fe8aea076dfc23659a0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/scrollreveal/script.ejs","hash":"bfcd40a4c86a79d11b6ea9460f5bb6c3a60be48e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/rightmenu/layout.ejs","hash":"aa49c2498e2e61dd4ac0d68db89a1bdee86a9208","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/index.ejs","hash":"782b9f2cf693d0a7094adac730a4d543335ea614","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/slow-network/script.ejs","hash":"5a2f3eaadb6dbe4350e6d32094a0bad62ba240bc","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/check-configuration.js","hash":"08f383bd163383a157db177b77143c467de98a29","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/stellar-tag-utils.js","hash":"8d62893faf26d15d2833f8090bd6257a7282f5e2","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/render-stylus.js","hash":"36c2f32d2101eaa84041daf70393df6f3a3fa331","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/config.js","hash":"8dafa15769d43693523e435fad10b85f614a0600","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/check-environment.js","hash":"9d29a3f34ea715a0dc7cb5c2f76b5713d718e6e6","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/autoCanonical.js","hash":"f3ea74759129c71041371a1d77c687eb6aa88d3a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/generate_preload_fontfamily.js","hash":"d37dbe38fa9125fdce99b2ef9e92582ed08eea82","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/generate_title__keywords__description.js","hash":"179a07b7b2270398216a34d79595d98e30962b22","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/generate_seo.js","hash":"e0059a60cc5978be6792dcf795a2ece3a509f41a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/Readme.md","hash":"77d9e986d24898b98eba2010185951fd1fb8b95c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/index.js","hash":"bcb770787c77e39cdc156b7fd58cde8e00b79153","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/AutoPrefixCSS.styl","hash":"c76f624d332c59b73c1d6b95b30b2afb560976eb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/effect.styl","hash":"47db4f84182194a8a233931424c9bc79c6cf0117","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/color.styl","hash":"02d9bbe630f33ec2c604cb8acdddbe28431fcb05","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/fonts.styl","hash":"fa199b11b568a6b0d6fc4e87ef12ab36ac254966","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/layout.styl","hash":"d1bdce2e7974b1feb585adcdf95e36a054a36ec4","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/base_first.styl","hash":"0b8ae4adffce5a9243c0e7253676d03ecd4a43ba","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/func.styl","hash":"430adedc7e6f57013e54d15e6f8dce21e9ea2579","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/dark_first.styl","hash":"bcb419588c1972bd47869309dea43ff319440d33","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/fontfamily_first.styl","hash":"5024a9162f4787ac4234d5b8549fad40dbecf865","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/cover_first.styl","hash":"32f0e09eba832607165096c68f70698a75d685b5","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/navbar_first.styl","hash":"e268d81dc78fdf9758d314cdc5cc087aec1c70e6","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/index.styl","hash":"835b3640c257cd229b20c088536b053b92c9796c","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/search_first.styl","hash":"955c9eb68b90b97dba0bd27909347cfc91ce68c5","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/parallax.js","hash":"3c3210bde6e86d7d157c34c14796abe98cb1bbd0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/swiper/script.ejs","hash":"766ab47f4b26502fb71383ae442a1db629fe9e12","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/share/layout.ejs","hash":"f46f00d5866082bb60137b5044ead669a062bc9f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/rightmenus/layout.ejs","hash":"31a1787705aa13d3e0eb1aacf76bc4db869cb37a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/aplayer.js","hash":"95f2e47535c8d37e90cab7726d25845cf01ca477","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/rightMenu.js","hash":"cb2f17ab10127065f7b9f5f87a49921d25b287e1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/search/hexo.js","hash":"4b4ecb0c950b95bed02e0e1274aa50c4989553a3","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/artitalk/index.ejs","hash":"98fb39a1ac55b9af0c1501b051ac2698a3684686","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/bbtalk/index.ejs","hash":"bd513c00f6d5fb57e504db7e89c3326d9f68dd88","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/rightMenus.js","hash":"877f548870ea7f63a46de071a120aaea96dd4a25","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/indent/index.ejs","hash":"7d112cde9b8d1785d8c541cde94361e0bfc60f30","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/fcircle/index.ejs","hash":"2a220187916a0474a083a8f716c0a3b9a8f57548","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/_ctrl/cdnCtrl.ejs","hash":"8fe3924efab31cf8a6d7ad07a2985b01a2154acb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/gitter/index.ejs","hash":"e90bf8daf46f34ca9b37049154dda6d1f155d037","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/mathjax/index.ejs","hash":"91a412d8324fbacd7a340e4ad031b4e917a16f2f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/_ctrl/coverCtrl.ejs","hash":"ee3f2108e61db024466b08beddb895ad97330f63","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/chat/tidio/script.ejs","hash":"bb678b5e8a9fb87fc1c1e48914da3a1a052a8e02","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/artalk/script.ejs","hash":"799633e92efc6abb5d0a9ded8b6db70948dcddad","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/katex/index.ejs","hash":"159e21313df49ef1ab14122bfe7e02d2d4f6fcdf","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/beaudar/script.ejs","hash":"285226000b8bff1f96b8b69da268a0af79d04b98","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/discuss/script.ejs","hash":"b8a13e121923d31a5b6870be84c69e5587f4f0ce","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/chat/gitter/script.ejs","hash":"e4f06c50c23d433a0e63fc703a35704c336ba090","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/disqusjs/script.ejs","hash":"569912aebbde81490e57ab2ce49e35bf678723f2","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/disqus/script.ejs","hash":"3a67befc560e6d0695f64c05d82c68ee9771a1a7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/hashover/script.ejs","hash":"7ecd8879c66b907da04093a465d346f6569cee83","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/snackbar/index.ejs","hash":"bddb75f7112d2b438f462a6ebef79810ef5ac291","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/isso/script.ejs","hash":"aa7c81e6df9b803966efe5eda8edbc85b924f34b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/gitalk/script.ejs","hash":"00a20cd4a398204b1193b0e9d3fac2c5f32daad3","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/utterances/script.ejs","hash":"afbb35e59b3b3af34627416ee47ecad1d564bdbc","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/livere/script.ejs","hash":"54340ba16d4f46ed4f3c6f67ac7ba1a2e68be67a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/twikoo/script.ejs","hash":"c0fc694962e94a478b85ae7adb95917fc5f8f2c4","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/z-custom/script.ejs","hash":"e5cfe25fb88b7a3dd0c68e20b2e17d44eb2a1f04","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/vssue/script.ejs","hash":"8171fdfbe668277942eaa55847ba646532d245eb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/blogposting.js","hash":"f8543b0460c9a5b23ee43d8ed49e018c1c627439","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/breadcrumblist.js","hash":"df6316082af2df061f16bb01d5b5d3478f98c662","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/config.js","hash":"e4c3c23e58f0bac72010f962d92da641445e748a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/person.js","hash":"afca448311d62a44566d9471594a43495a6be6db","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/index.js","hash":"41e4af773dfb4755752cb74a6d70e4b5b0c1ce4d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/organization.js","hash":"02c08f0362aec5d310b8c7e69823cd88ed49ea5e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/website.js","hash":"556f28164d31b3898d06cb8f76472bc6547bb1db","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_base/base.styl","hash":"712eb4803dc595eb111ebd89546e6ed3fb1ec7ce","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/giscus/script.ejs","hash":"45fe8d3e47d2a990292426d14091cffa46301704","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_base/fontfamily_async.styl","hash":"48c006682b8f44681662e4b0f8d3ebfdf85add69","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/archive.styl","hash":"a96709230abbc8d4fc40361b8fc02d4249abb4a1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/footer.styl","hash":"bb850b4707ee025e267e079fcf85484849cf4f41","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/article.styl","hash":"8d9fe767bb92fc57681817f21af7b2cdc07b0dc3","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/friends-traditional.styl","hash":"2da0419cd5874d03d7d5bafdb081beb6cb786608","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/friends-simpleuser.styl","hash":"07c477e15bf75615faff5587cc82dbc6004a901a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/img.styl","hash":"55d79f07b717d3e28515b41401f656d1593be624","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/loading.styl","hash":"56a2b9f46edd5b87e49d11647dc9396b0d833d54","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/pagination.styl","hash":"65dacf95771fc518a06cbf301f4c0b06201d7321","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/main.styl","hash":"d75ac5fd9ee7cddcbaa421d676c2ae0c4501b121","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/md.styl","hash":"d9b25d8199d3d5260c89e8ad84f1a17531b85588","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/posts.styl","hash":"31cf7bdbb44caa173f3dfd49d98157cb6be85c6f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/sidebar.styl","hash":"4b75b29b67b88ef5ee365535d521c3ee8256a1ea","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/search.styl","hash":"ac9f4c4f6e1ac38757dfeae3483a55983e1491d0","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/snackbar.styl","hash":"752a7fea5284a61fd9305d3b0fcaa43f2e64862f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/toc.styl","hash":"3346fbcbcbc2533997a8bf1fbbf801d9120b03ab","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/aplayer.styl","hash":"da809e1dde8adb9d1c98f0daeb52a2d920d497f7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/video.styl","hash":"680e8cf8fc5d62913dad4ccd06135caad2bb3e92","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/fontcolor.styl","hash":"fa13f91f8be68b62210048d1481c3b23e23f939b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/cursor.styl","hash":"bc055048c7d017be8cf25a3385f516656c96cf66","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/mathjax.styl","hash":"11ee86571f31f9aa61dcc48b40977dcd974d76a4","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/waline/script.ejs","hash":"945fa1928c6bd1599134b8627b35d3dd7cd79013","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/index.styl","hash":"a18de4930b88f62e557e62e8fbb9e2ce550c5d49","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/highlight/highlightjs/script.ejs","hash":"3ffdc0dea93efd49b23910fe7a295784c7053b97","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/gitalk.styl","hash":"c4c9950fd6654f87ca4f481cf3065ca4069fac48","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/btns.styl","hash":"bf592cd78c146bb671217f106632b9e5bcc7c145","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/dropmenu.styl","hash":"a136ebb90bedef15c1d8b8d75e09b37c3873f5e8","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/checkbox.styl","hash":"8c62dd38914d939069d9222c54787a24cb5c31f7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/fancybox.styl","hash":"1b4709787f9bda8ce565aa9a4aaf7f1f58751b44","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/folding.styl","hash":"253f13e60218e0d014a1df99933f5cdba507f3b1","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/frame.styl","hash":"6ffbb29514781aa4fa7d7653706554ce33f4525b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/friends.styl","hash":"8f9e60b94c02197e4555f923d357017742bf8d7b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/ghcard.styl","hash":"58adb206695a704b1f40df42e2dc10e9e9055aeb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/message.styl","hash":"995b46084664f2ed2cf025c1a208089ecfe1147e","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/image.styl","hash":"bb4b07841602592e421597ba8dd7110edec789d8","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/link.styl","hash":"82cdcc537612eec3e1af40d00edf80b14116c191","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/note.styl","hash":"005d3c55c2216d7c88661f79ad466ad89fad4784","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/span.styl","hash":"6e9f8b453244d9241d3fceed0a56e12c86a4b446","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/media.styl","hash":"576c9eede3a8f9ec2ba1a970e92a49154ec3acb3","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/swiper.styl","hash":"819385594f1825e26074ade900835a3f4031fe42","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/table.styl","hash":"ef07ab4fe8a391ea9039fbe53333aaf58e3ce033","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/tabs.styl","hash":"a2366f4fe1d9f06e47a7a994cfc80a1edbf6c535","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/sites.styl","hash":"01593f3b8a233bc2c3193796707e4ed77df217bb","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/Readme.md","hash":"51986550e80990e1db23e2ee4165e5e4800e4b9f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/timeline.styl","hash":"f84f411a3b7dcdbfd4fb19ac4e0f91300c5e19be","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/text.styl","hash":"b2c2f3946fb611ad052c61d7309098edbf494c86","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/pjaxanimate.styl","hash":"86c80d1d1c8a02c0eb4c0b5d29ff41c9a5dd5ac3","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/tag.json","hash":"506f87e397f258b097ba24ce16c33b5353bab462","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/highlight/prismjs/script.ejs","hash":"1349c07f6a1f3efca0a00f483c918d091007d9b3","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_dark/dark_async.styl","hash":"a5da6f0b232a767057321fa51e382fd2d86bd98d","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_dark/dark_plugins.styl","hash":"c56c2271847809e21e4938d770577622aeb161aa","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_rightmenu/reading.styl","hash":"cb01065424dbd32c79b973b06fcdbc1c72917bc6","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/index.styl","hash":"6c681c760fa63425e7564c0d68532bb5ac95690a","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/tags/contributors.js","hash":"cf1af362cf73c83a28ae2651eb1daafaed2ec91f","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/clipboard.styl","hash":"6818ba853fd6a319ff4eb50d228b1d625db9a0fd","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/color.styl","hash":"319ccc46d5d387ee14a22e0de1a518288331629b","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/index.styl","hash":"38089b686a0cfdde555539c1c0c5b3fe402afada","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/language.styl","hash":"4fade2fe067f557d3b420d0b9a9d88d18feb9a72","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_rightmenu/rightmenu.styl","hash":"ef456a92173c303b61015f3581450aa14f0d2b41","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/prismjs/clipboard.styl","hash":"0f92935e3bb9732b6e1cc7f305577144f1fe99a8","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/tags/sites.js","hash":"47b0ff4a3ccea2da9b60023cb4288f979504b0c7","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/prismjs/index.styl","hash":"215face68fab1c31cfa8d4c21941c72efe54cb78","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/tags/friends.js","hash":"7d53cf366638d0e254f7f26de01c8892710d1d23","modified":1705841731675},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/prismjs/language.styl","hash":"3af7fae25a0e2c54f0aacb1d8cbe383d5c1e60a5","modified":1705841731675},{"_id":"source/img/background.png","hash":"69955b4a89a9a9282281a77a5fa6d131514b5c85","modified":1705841226476}],"Category":[],"Data":[{"_id":"friends","data":[{"group":null,"description":null,"items":[{"title":"官天澜","avatar":"https://blog.leaf123.top/img/Avatar.jpg","url":"https://blog.leaf123.top","screenshot":"/img/background.png","keywords":null,"description":"I'm fine"},{"title":"seeleclover","avatar":"https://picx.rebus.zone/d/Logo/Seele.Clover/Seele.Clover-logo_black_256x256.png","url":"https://blog.seeleclover.com/","screenshot":null,"keywords":null,"description":"这个故事充满活力，千变万化，永垂不朽。"},{"title":"relucy","avatar":"https://blog.luckylucy.live/img/avatar.jpg","url":"https://blog.luckylucy.live/","screenshot":null,"keywords":null,"description":"老子人间无著处,一樽来作横山主"}]}]}],"Page":[{"_content":"var binft = function (r) {\n    var isTransparent = true;\n    function getRandomColor() {\n        if(isTransparent){\n            isTransparent = false;\n            //此处修改字体颜色,最后的 0 和 1 不要改\n            return \"rgba(255,255,255,0)\"\n        }else{\n            isTransparent = true;\n            return \"rgba(255,255,255,1)\"\n        }\n    }  \n    function n(r) {\n        for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {\n            var oneword = document.createElement(\"span\");\n            oneword.textContent = \"_\"; // 此处是末尾字符,如果想用光标样式可以改为\"|\"\n            oneword.style.color = getRandomColor();\n            n.appendChild(oneword);\n        }\n        return n\n    }\n    function i() {\n        var t = wordList[c.skillI];\n        c.step ? c.step-- : (c.step = refreshDelayTime, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : \"forward\" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = \"backward\", c.delay = showTotalWordDelayTime) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % wordList.length, c.direction = \"forward\")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(maxLength, maxLength + c.prefixP) : Math.min(maxLength, t.length - c.skillP))), setTimeout(i, d)\n    }\n    var l = \"\",\n    //此处改成你自己的诗词\n    wordList = [ \n            \"有花堪折直需折,莫待无花空折枝.\",\n            \"闲居少邻并,草径入荒园.鸟宿池边树,僧敲月下门.\",\n            \"侯门一入深如海,从此萧郎是路人.\",\n            \"才见岭头云似盖,已惊岩下雪如尘.\",\n            \"人间万事消磨尽,只有清香似旧时.\",\n            \"日暮酒醒人已远,满天风雨下西楼.\",\n            \"落灯花,棋未收,叹新丰逆旅淹留.\",\n            \"软风吹过窗纱,心期便隔天涯.\",\n            \"迷惑失故路,薄暮无宿栖.\",\n            \"不见白头相携老,只许与君共天明.\",\n            \"晓迎秋露一枝新,不占园中最上春.\",\n            \"荷尽已无擎雨盖,菊残犹有傲霜枝.\",\n            \"春未绿,鬓先丝.人间别久不成悲.\",\n            \"江东子弟多才俊,卷土重来未可知.\",\n            \"莫听穿林打叶声,何妨吟啸且徐行.\",\n            \"在天愿作比翼鸟,在地愿为连理枝.\",\n        ].map(function (r) {\n    return r + \"\"\n    }),\n    showTotalWordDelayTime = 2,\n    refreshDelayTime = 1,\n    maxLength = 1,\n    d = 75,\n    c = {\n        text: \"\",\n        prefixP: -maxLength,\n        skillI: 0,\n        skillP: 0,\n        direction: \"forward\",\n        delay: showTotalWordDelayTime,\n        step: refreshDelayTime\n    };\n    i()\n};\nbinft(document.getElementById('binft'));","source":"custom/binft.js","raw":"var binft = function (r) {\n    var isTransparent = true;\n    function getRandomColor() {\n        if(isTransparent){\n            isTransparent = false;\n            //此处修改字体颜色,最后的 0 和 1 不要改\n            return \"rgba(255,255,255,0)\"\n        }else{\n            isTransparent = true;\n            return \"rgba(255,255,255,1)\"\n        }\n    }  \n    function n(r) {\n        for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {\n            var oneword = document.createElement(\"span\");\n            oneword.textContent = \"_\"; // 此处是末尾字符,如果想用光标样式可以改为\"|\"\n            oneword.style.color = getRandomColor();\n            n.appendChild(oneword);\n        }\n        return n\n    }\n    function i() {\n        var t = wordList[c.skillI];\n        c.step ? c.step-- : (c.step = refreshDelayTime, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : \"forward\" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = \"backward\", c.delay = showTotalWordDelayTime) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % wordList.length, c.direction = \"forward\")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(maxLength, maxLength + c.prefixP) : Math.min(maxLength, t.length - c.skillP))), setTimeout(i, d)\n    }\n    var l = \"\",\n    //此处改成你自己的诗词\n    wordList = [ \n            \"有花堪折直需折,莫待无花空折枝.\",\n            \"闲居少邻并,草径入荒园.鸟宿池边树,僧敲月下门.\",\n            \"侯门一入深如海,从此萧郎是路人.\",\n            \"才见岭头云似盖,已惊岩下雪如尘.\",\n            \"人间万事消磨尽,只有清香似旧时.\",\n            \"日暮酒醒人已远,满天风雨下西楼.\",\n            \"落灯花,棋未收,叹新丰逆旅淹留.\",\n            \"软风吹过窗纱,心期便隔天涯.\",\n            \"迷惑失故路,薄暮无宿栖.\",\n            \"不见白头相携老,只许与君共天明.\",\n            \"晓迎秋露一枝新,不占园中最上春.\",\n            \"荷尽已无擎雨盖,菊残犹有傲霜枝.\",\n            \"春未绿,鬓先丝.人间别久不成悲.\",\n            \"江东子弟多才俊,卷土重来未可知.\",\n            \"莫听穿林打叶声,何妨吟啸且徐行.\",\n            \"在天愿作比翼鸟,在地愿为连理枝.\",\n        ].map(function (r) {\n    return r + \"\"\n    }),\n    showTotalWordDelayTime = 2,\n    refreshDelayTime = 1,\n    maxLength = 1,\n    d = 75,\n    c = {\n        text: \"\",\n        prefixP: -maxLength,\n        skillI: 0,\n        skillP: 0,\n        direction: \"forward\",\n        delay: showTotalWordDelayTime,\n        step: refreshDelayTime\n    };\n    i()\n};\nbinft(document.getElementById('binft'));","date":"2024-01-21T12:47:06.446Z","updated":"2024-01-21T12:47:06.446Z","path":"custom/binft.js","layout":"false","title":"","comments":1,"_id":"cls214ypz0000zcjv1r68fowt","content":"var binft = function (r) {\n    var isTransparent = true;\n    function getRandomColor() {\n        if(isTransparent){\n            isTransparent = false;\n            //此处修改字体颜色,最后的 0 和 1 不要改\n            return \"rgba(255,255,255,0)\"\n        }else{\n            isTransparent = true;\n            return \"rgba(255,255,255,1)\"\n        }\n    }  \n    function n(r) {\n        for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {\n            var oneword = document.createElement(\"span\");\n            oneword.textContent = \"_\"; // 此处是末尾字符,如果想用光标样式可以改为\"|\"\n            oneword.style.color = getRandomColor();\n            n.appendChild(oneword);\n        }\n        return n\n    }\n    function i() {\n        var t = wordList[c.skillI];\n        c.step ? c.step-- : (c.step = refreshDelayTime, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : \"forward\" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = \"backward\", c.delay = showTotalWordDelayTime) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % wordList.length, c.direction = \"forward\")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(maxLength, maxLength + c.prefixP) : Math.min(maxLength, t.length - c.skillP))), setTimeout(i, d)\n    }\n    var l = \"\",\n    //此处改成你自己的诗词\n    wordList = [ \n            \"有花堪折直需折,莫待无花空折枝.\",\n            \"闲居少邻并,草径入荒园.鸟宿池边树,僧敲月下门.\",\n            \"侯门一入深如海,从此萧郎是路人.\",\n            \"才见岭头云似盖,已惊岩下雪如尘.\",\n            \"人间万事消磨尽,只有清香似旧时.\",\n            \"日暮酒醒人已远,满天风雨下西楼.\",\n            \"落灯花,棋未收,叹新丰逆旅淹留.\",\n            \"软风吹过窗纱,心期便隔天涯.\",\n            \"迷惑失故路,薄暮无宿栖.\",\n            \"不见白头相携老,只许与君共天明.\",\n            \"晓迎秋露一枝新,不占园中最上春.\",\n            \"荷尽已无擎雨盖,菊残犹有傲霜枝.\",\n            \"春未绿,鬓先丝.人间别久不成悲.\",\n            \"江东子弟多才俊,卷土重来未可知.\",\n            \"莫听穿林打叶声,何妨吟啸且徐行.\",\n            \"在天愿作比翼鸟,在地愿为连理枝.\",\n        ].map(function (r) {\n    return r + \"\"\n    }),\n    showTotalWordDelayTime = 2,\n    refreshDelayTime = 1,\n    maxLength = 1,\n    d = 75,\n    c = {\n        text: \"\",\n        prefixP: -maxLength,\n        skillI: 0,\n        skillP: 0,\n        direction: \"forward\",\n        delay: showTotalWordDelayTime,\n        step: refreshDelayTime\n    };\n    i()\n};\nbinft(document.getElementById('binft'));"},{"layout":"category","index":true,"title":"所有分类","_content":"","source":"categories/index.md","raw":"---\nlayout: category\nindex: true\ntitle: 所有分类\n---","date":"2024-01-21T12:47:06.446Z","updated":"2024-01-21T12:47:06.446Z","path":"categories/index.html","comments":1,"_id":"cls214yq80002zcjvcqff2gfz","content":"","excerpt":"","more":""},{"_content":"function BackTOP() {\n    $(\"#btn\").hide();\n    $(function () {\n        $(window).scroll(function () {\n            if ($(window).scrollTop() > 50) {\n                $(\"#btn\").fadeIn(200);\n            } else {\n                $(\"#btn\").fadeOut(200);\n            }\n        });\n        $(\"#btn\").click(function () {\n            $('body,html').animate({\n                    scrollTop: 0\n                },\n                500);\n            return false;\n        });\n    });\n    $(function () {\n        $(\"#say\").click(function () {\n            $('body,html').animate({\n                    scrollTop: $('html, body').get(0).scrollHeight\n                },\n                500);\n            return false;\n        });\n    })\n}\n\n$('#readmode').click(function () {\n        $('body').toggleClass('read-mode')\n    })\n    \nfunction SiderMenu() {\n    $('#main-container').toggleClass('open');\n    $('.iconflat').css('width', '50px').css('height', '50px');\n    $('.openNav').css('height', '50px');\n    $('#main-container,#mo-nav,.openNav').toggleClass('open')\n}\n\nfunction switchNightMode() {\n    $('<div class=\"Cuteen_DarkSky\"><div class=\"Cuteen_DarkPlanet\"></div></div>').appendTo($(\"body\")), setTimeout(\n        function () {\n            (volantis.dark.mode == \"dark\") \n            ? \n            ($(\"html\").addClass(\"DarkMode\"),\n            $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")) \n            : \n            ($(\"html\").removeClass(\"DarkMode\"),\n            $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")), \n            setTimeout(function () {\n                $(\".Cuteen_DarkSky\").fadeOut(1e3, function () {\n                    $(this).remove()\n                })\n            }, 2e3)\n        }), 50\n}\n\nfunction checkNightMode() {\n    if ($(\"html\").hasClass(\"n-f\")) {\n        $(\"html\").removeClass(\"day\");\n        $(\"html\").addClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")\n        return;\n    }\n    if ($(\"html\").hasClass(\"d-f\")) {\n        $(\"html\").removeClass(\"DarkMode\");\n        $(\"html\").addClass(\"day\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")\n        return;\n    }\n    if (volantis.dark.mode == \"dark\") {\n        $(\"html\").addClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")\n    } else {\n        $(\"html\").removeClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")\n    }\n}\nBackTOP();\nvolantis.dark.push(switchNightMode);","source":"custom/darkmode.js","raw":"function BackTOP() {\n    $(\"#btn\").hide();\n    $(function () {\n        $(window).scroll(function () {\n            if ($(window).scrollTop() > 50) {\n                $(\"#btn\").fadeIn(200);\n            } else {\n                $(\"#btn\").fadeOut(200);\n            }\n        });\n        $(\"#btn\").click(function () {\n            $('body,html').animate({\n                    scrollTop: 0\n                },\n                500);\n            return false;\n        });\n    });\n    $(function () {\n        $(\"#say\").click(function () {\n            $('body,html').animate({\n                    scrollTop: $('html, body').get(0).scrollHeight\n                },\n                500);\n            return false;\n        });\n    })\n}\n\n$('#readmode').click(function () {\n        $('body').toggleClass('read-mode')\n    })\n    \nfunction SiderMenu() {\n    $('#main-container').toggleClass('open');\n    $('.iconflat').css('width', '50px').css('height', '50px');\n    $('.openNav').css('height', '50px');\n    $('#main-container,#mo-nav,.openNav').toggleClass('open')\n}\n\nfunction switchNightMode() {\n    $('<div class=\"Cuteen_DarkSky\"><div class=\"Cuteen_DarkPlanet\"></div></div>').appendTo($(\"body\")), setTimeout(\n        function () {\n            (volantis.dark.mode == \"dark\") \n            ? \n            ($(\"html\").addClass(\"DarkMode\"),\n            $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")) \n            : \n            ($(\"html\").removeClass(\"DarkMode\"),\n            $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")), \n            setTimeout(function () {\n                $(\".Cuteen_DarkSky\").fadeOut(1e3, function () {\n                    $(this).remove()\n                })\n            }, 2e3)\n        }), 50\n}\n\nfunction checkNightMode() {\n    if ($(\"html\").hasClass(\"n-f\")) {\n        $(\"html\").removeClass(\"day\");\n        $(\"html\").addClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")\n        return;\n    }\n    if ($(\"html\").hasClass(\"d-f\")) {\n        $(\"html\").removeClass(\"DarkMode\");\n        $(\"html\").addClass(\"day\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")\n        return;\n    }\n    if (volantis.dark.mode == \"dark\") {\n        $(\"html\").addClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")\n    } else {\n        $(\"html\").removeClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")\n    }\n}\nBackTOP();\nvolantis.dark.push(switchNightMode);","date":"2024-01-21T12:47:06.447Z","updated":"2024-01-21T12:47:06.447Z","path":"custom/darkmode.js","layout":"false","title":"","comments":1,"_id":"cls214yqd0005zcjv5woo1aqw","content":"function BackTOP() {\n    $(\"#btn\").hide();\n    $(function () {\n        $(window).scroll(function () {\n            if ($(window).scrollTop() > 50) {\n                $(\"#btn\").fadeIn(200);\n            } else {\n                $(\"#btn\").fadeOut(200);\n            }\n        });\n        $(\"#btn\").click(function () {\n            $('body,html').animate({\n                    scrollTop: 0\n                },\n                500);\n            return false;\n        });\n    });\n    $(function () {\n        $(\"#say\").click(function () {\n            $('body,html').animate({\n                    scrollTop: $('html, body').get(0).scrollHeight\n                },\n                500);\n            return false;\n        });\n    })\n}\n\n$('#readmode').click(function () {\n        $('body').toggleClass('read-mode')\n    })\n    \nfunction SiderMenu() {\n    $('#main-container').toggleClass('open');\n    $('.iconflat').css('width', '50px').css('height', '50px');\n    $('.openNav').css('height', '50px');\n    $('#main-container,#mo-nav,.openNav').toggleClass('open')\n}\n\nfunction switchNightMode() {\n    $('<div class=\"Cuteen_DarkSky\"><div class=\"Cuteen_DarkPlanet\"></div></div>').appendTo($(\"body\")), setTimeout(\n        function () {\n            (volantis.dark.mode == \"dark\") \n            ? \n            ($(\"html\").addClass(\"DarkMode\"),\n            $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")) \n            : \n            ($(\"html\").removeClass(\"DarkMode\"),\n            $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")), \n            setTimeout(function () {\n                $(\".Cuteen_DarkSky\").fadeOut(1e3, function () {\n                    $(this).remove()\n                })\n            }, 2e3)\n        }), 50\n}\n\nfunction checkNightMode() {\n    if ($(\"html\").hasClass(\"n-f\")) {\n        $(\"html\").removeClass(\"day\");\n        $(\"html\").addClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")\n        return;\n    }\n    if ($(\"html\").hasClass(\"d-f\")) {\n        $(\"html\").removeClass(\"DarkMode\");\n        $(\"html\").addClass(\"day\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")\n        return;\n    }\n    if (volantis.dark.mode == \"dark\") {\n        $(\"html\").addClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-sun\")\n    } else {\n        $(\"html\").removeClass(\"DarkMode\");\n        $('#modeicon').attr(\"xlink:href\", \"#icon-_moon\")\n    }\n}\nBackTOP();\nvolantis.dark.push(switchNightMode);"},{"layout":"docs","seo_title":"关于","bottom_meta":false,"sidebar":[],"twikoo":{"placeholder":"有什么想对我说的呢？"},"_content":"\n下面写关于自己的内容\n","source":"about/index.md","raw":"---\nlayout: docs\nseo_title: 关于\nbottom_meta: false\nsidebar: []\ntwikoo:\n  placeholder: 有什么想对我说的呢？\n---\n\n下面写关于自己的内容\n","date":"2024-01-21T12:47:06.446Z","updated":"2024-01-21T12:47:06.446Z","path":"about/index.html","title":"","comments":1,"_id":"cls214yqf0007zcjva4ambekc","content":"<p>下面写关于自己的内容</p>\n","excerpt":"","more":"<p>下面写关于自己的内容</p>\n"},{"_content":"#RightDownBtn {\n    position: fixed;\n    left: 1.875rem;\n    bottom: 1.875rem;\n    padding: 0.3125rem 0.625rem;\n    background: #fff;\n    border-radius: 0.1875rem;\n    transition: 0.3s ease all;\n    z-index: 1;\n    align-items: flex-end;\n    flex-direction: column;\n    display: -moz-flex;\n    display: flex;\n    float: right;\n}\n\n#RightDownBtn>a,\n#RightDownBtn>label {\n    width: 1.5em;\n    height: 1.5em;\n    margin: 0.3125rem 0;\n    transition: .2s cubic-bezier(.25, .46, .45, .94);\n}\n\n/* font color */\n.DarkMode #page,\n.DarkMode #colophon,\n.DarkMode #vcomments .vbtn,\n.DarkMode .art-content #archives .al_mon_list .al_mon,\n.DarkMode .art-content #archives .al_mon_list span,\n.DarkMode body,\n.DarkMode .art-content #archives .al_mon_list .al_mon,\n.DarkMode .art-content #archives .al_mon_list span,\n.DarkMode button,\n.DarkMode .art .art-content #archives a,\n.DarkMode textarea,\n.DarkMode strong,\n.DarkMode a,\n.DarkMode p,\n.DarkMode li,\n.DarkMode .label {\n    color: rgba(255, 255, 255, .6);\n}\n\n\n.DarkMode #page,\n.DarkMode body,\n.DarkMode #colophon,\n.DarkMode #main-container,\n.DarkMode #page .yya,\n.DarkMode #content,\n.DarkMode #contentss,\n.DarkMode #footer {\n    background-color: #292a2d;\n}\n.DarkMode strong,\n.DarkMode img {\n    filter: brightness(.7);\n}\n\n/* sun and noon */\n.Cuteen_DarkSky,\n.Cuteen_DarkSky:before {\n    content: \"\";\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 88888888\n}\n\n.Cuteen_DarkSky {\n    background: linear-gradient(#feb8b0, #fef9db)\n}\n\n.Cuteen_DarkSky:before {\n    transition: 2s ease all;\n    opacity: 0;\n    background: linear-gradient(#4c3f6d, #6c62bb, #93b1ed)\n}\n\n.DarkMode .Cuteen_DarkSky:before {\n    opacity: 1\n}\n\n.Cuteen_DarkPlanet {\n    z-index: 99999999;\n    position: fixed;\n    left: -50%;\n    top: -50%;\n    width: 200%;\n    height: 200%;\n    -webkit-animation: CuteenPlanetMove 2s cubic-bezier(.7, 0, 0, 1);\n    animation: CuteenPlanetMove 2s cubic-bezier(.7, 0, 0, 1);\n    transform-origin: center bottom\n}\n\n@-webkit-keyframes CuteenPlanetMove {\n    0% {\n        transform: rotate(0)\n    }\n\n    to {\n        transform: rotate(360deg)\n    }\n}\n\n@keyframes CuteenPlanetMove {\n    0% {\n        transform: rotate(0)\n    }\n\n    to {\n        transform: rotate(360deg)\n    }\n}\n\n.Cuteen_DarkPlanet:after {\n    position: absolute;\n    left: 35%;\n    top: 40%;\n    width: 9.375rem;\n    height: 9.375rem;\n    border-radius: 50%;\n    content: \"\";\n    background: linear-gradient(#fefefe, #fffbe8)\n}","source":"custom/darkmode.css","raw":"#RightDownBtn {\n    position: fixed;\n    left: 1.875rem;\n    bottom: 1.875rem;\n    padding: 0.3125rem 0.625rem;\n    background: #fff;\n    border-radius: 0.1875rem;\n    transition: 0.3s ease all;\n    z-index: 1;\n    align-items: flex-end;\n    flex-direction: column;\n    display: -moz-flex;\n    display: flex;\n    float: right;\n}\n\n#RightDownBtn>a,\n#RightDownBtn>label {\n    width: 1.5em;\n    height: 1.5em;\n    margin: 0.3125rem 0;\n    transition: .2s cubic-bezier(.25, .46, .45, .94);\n}\n\n/* font color */\n.DarkMode #page,\n.DarkMode #colophon,\n.DarkMode #vcomments .vbtn,\n.DarkMode .art-content #archives .al_mon_list .al_mon,\n.DarkMode .art-content #archives .al_mon_list span,\n.DarkMode body,\n.DarkMode .art-content #archives .al_mon_list .al_mon,\n.DarkMode .art-content #archives .al_mon_list span,\n.DarkMode button,\n.DarkMode .art .art-content #archives a,\n.DarkMode textarea,\n.DarkMode strong,\n.DarkMode a,\n.DarkMode p,\n.DarkMode li,\n.DarkMode .label {\n    color: rgba(255, 255, 255, .6);\n}\n\n\n.DarkMode #page,\n.DarkMode body,\n.DarkMode #colophon,\n.DarkMode #main-container,\n.DarkMode #page .yya,\n.DarkMode #content,\n.DarkMode #contentss,\n.DarkMode #footer {\n    background-color: #292a2d;\n}\n.DarkMode strong,\n.DarkMode img {\n    filter: brightness(.7);\n}\n\n/* sun and noon */\n.Cuteen_DarkSky,\n.Cuteen_DarkSky:before {\n    content: \"\";\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 88888888\n}\n\n.Cuteen_DarkSky {\n    background: linear-gradient(#feb8b0, #fef9db)\n}\n\n.Cuteen_DarkSky:before {\n    transition: 2s ease all;\n    opacity: 0;\n    background: linear-gradient(#4c3f6d, #6c62bb, #93b1ed)\n}\n\n.DarkMode .Cuteen_DarkSky:before {\n    opacity: 1\n}\n\n.Cuteen_DarkPlanet {\n    z-index: 99999999;\n    position: fixed;\n    left: -50%;\n    top: -50%;\n    width: 200%;\n    height: 200%;\n    -webkit-animation: CuteenPlanetMove 2s cubic-bezier(.7, 0, 0, 1);\n    animation: CuteenPlanetMove 2s cubic-bezier(.7, 0, 0, 1);\n    transform-origin: center bottom\n}\n\n@-webkit-keyframes CuteenPlanetMove {\n    0% {\n        transform: rotate(0)\n    }\n\n    to {\n        transform: rotate(360deg)\n    }\n}\n\n@keyframes CuteenPlanetMove {\n    0% {\n        transform: rotate(0)\n    }\n\n    to {\n        transform: rotate(360deg)\n    }\n}\n\n.Cuteen_DarkPlanet:after {\n    position: absolute;\n    left: 35%;\n    top: 40%;\n    width: 9.375rem;\n    height: 9.375rem;\n    border-radius: 50%;\n    content: \"\";\n    background: linear-gradient(#fefefe, #fffbe8)\n}","date":"2024-01-21T12:47:06.447Z","updated":"2024-01-21T12:47:06.447Z","path":"custom/darkmode.css","layout":"false","title":"","comments":1,"_id":"cls214yqg0009zcjv44vscvwd","content":"#RightDownBtn {\n    position: fixed;\n    left: 1.875rem;\n    bottom: 1.875rem;\n    padding: 0.3125rem 0.625rem;\n    background: #fff;\n    border-radius: 0.1875rem;\n    transition: 0.3s ease all;\n    z-index: 1;\n    align-items: flex-end;\n    flex-direction: column;\n    display: -moz-flex;\n    display: flex;\n    float: right;\n}\n\n#RightDownBtn>a,\n#RightDownBtn>label {\n    width: 1.5em;\n    height: 1.5em;\n    margin: 0.3125rem 0;\n    transition: .2s cubic-bezier(.25, .46, .45, .94);\n}\n\n/* font color */\n.DarkMode #page,\n.DarkMode #colophon,\n.DarkMode #vcomments .vbtn,\n.DarkMode .art-content #archives .al_mon_list .al_mon,\n.DarkMode .art-content #archives .al_mon_list span,\n.DarkMode body,\n.DarkMode .art-content #archives .al_mon_list .al_mon,\n.DarkMode .art-content #archives .al_mon_list span,\n.DarkMode button,\n.DarkMode .art .art-content #archives a,\n.DarkMode textarea,\n.DarkMode strong,\n.DarkMode a,\n.DarkMode p,\n.DarkMode li,\n.DarkMode .label {\n    color: rgba(255, 255, 255, .6);\n}\n\n\n.DarkMode #page,\n.DarkMode body,\n.DarkMode #colophon,\n.DarkMode #main-container,\n.DarkMode #page .yya,\n.DarkMode #content,\n.DarkMode #contentss,\n.DarkMode #footer {\n    background-color: #292a2d;\n}\n.DarkMode strong,\n.DarkMode img {\n    filter: brightness(.7);\n}\n\n/* sun and noon */\n.Cuteen_DarkSky,\n.Cuteen_DarkSky:before {\n    content: \"\";\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 88888888\n}\n\n.Cuteen_DarkSky {\n    background: linear-gradient(#feb8b0, #fef9db)\n}\n\n.Cuteen_DarkSky:before {\n    transition: 2s ease all;\n    opacity: 0;\n    background: linear-gradient(#4c3f6d, #6c62bb, #93b1ed)\n}\n\n.DarkMode .Cuteen_DarkSky:before {\n    opacity: 1\n}\n\n.Cuteen_DarkPlanet {\n    z-index: 99999999;\n    position: fixed;\n    left: -50%;\n    top: -50%;\n    width: 200%;\n    height: 200%;\n    -webkit-animation: CuteenPlanetMove 2s cubic-bezier(.7, 0, 0, 1);\n    animation: CuteenPlanetMove 2s cubic-bezier(.7, 0, 0, 1);\n    transform-origin: center bottom\n}\n\n@-webkit-keyframes CuteenPlanetMove {\n    0% {\n        transform: rotate(0)\n    }\n\n    to {\n        transform: rotate(360deg)\n    }\n}\n\n@keyframes CuteenPlanetMove {\n    0% {\n        transform: rotate(0)\n    }\n\n    to {\n        transform: rotate(360deg)\n    }\n}\n\n.Cuteen_DarkPlanet:after {\n    position: absolute;\n    left: 35%;\n    top: 40%;\n    width: 9.375rem;\n    height: 9.375rem;\n    border-radius: 50%;\n    content: \"\";\n    background: linear-gradient(#fefefe, #fffbe8)\n}"},{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>作业</title>\n</head>\n<body onload=jis()>\n    <div id=\"bb\">\n        <button onclick=\"abc()\" class=\"xuanfu\">点一下</button>\n        <h1 id=\"ccc\"></h1>\n        <h1 id=\"ddd\"></h1>\n    </div>\n    <script>\n        function jis(){\n            setTimeout(function(){\n                document.getElementById(\"bb\").className='jianbian'\n                },10000)\n        }\n        function abc(){\n            var x=document.getElementById(\"ddd\")\n            var a=\"\"\n            a=Math.floor(Math.random()*900)+100;\n            document.getElementById(\"ccc\").innerHTML=a\n            if(a>600){\n                x.innerHTML=\"中奖啦！！！\"   \n            }else{\n                x.innerHTML=\"\"\n            }\n        }\n\n    </script>\n    <style>\n        *{\n    margin: 0;\n    padding: 0;\n}\n#bb{\n    width: 100%;\n    height: 814px;\n    margin: 0px auto;\n    text-align: center;\n}\nbutton{\n    font-size: 20px;\n    color: black;\n    width: 100px;\n    height: 30px;\n    margin-top: 10%;\n    background-image: linear-gradient(to left, #f1aee4, #d7baf4, #bfc5fa, #aecef7, #a9d4ee);\n    border-radius: 2px;\n    border: 2px;\n    border-color: black;\n}\n.xuanfu:hover{\n    box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19);\n}\n#ccc{\n    font-size: 300px;\n}\n.jianbian{\n    background-image: linear-gradient(to right top, #e79bc6, #c98ebf, #aa82b6, #8b77aa, #6c6b9c, #586c9c, #436d9a, #2a6d95, #017a9b, #00869d, #00929b, #159d94);\n}\n\n    </style>\n</body>\n</html>","source":"htmll/renwu.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>作业</title>\n</head>\n<body onload=jis()>\n    <div id=\"bb\">\n        <button onclick=\"abc()\" class=\"xuanfu\">点一下</button>\n        <h1 id=\"ccc\"></h1>\n        <h1 id=\"ddd\"></h1>\n    </div>\n    <script>\n        function jis(){\n            setTimeout(function(){\n                document.getElementById(\"bb\").className='jianbian'\n                },10000)\n        }\n        function abc(){\n            var x=document.getElementById(\"ddd\")\n            var a=\"\"\n            a=Math.floor(Math.random()*900)+100;\n            document.getElementById(\"ccc\").innerHTML=a\n            if(a>600){\n                x.innerHTML=\"中奖啦！！！\"   \n            }else{\n                x.innerHTML=\"\"\n            }\n        }\n\n    </script>\n    <style>\n        *{\n    margin: 0;\n    padding: 0;\n}\n#bb{\n    width: 100%;\n    height: 814px;\n    margin: 0px auto;\n    text-align: center;\n}\nbutton{\n    font-size: 20px;\n    color: black;\n    width: 100px;\n    height: 30px;\n    margin-top: 10%;\n    background-image: linear-gradient(to left, #f1aee4, #d7baf4, #bfc5fa, #aecef7, #a9d4ee);\n    border-radius: 2px;\n    border: 2px;\n    border-color: black;\n}\n.xuanfu:hover{\n    box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19);\n}\n#ccc{\n    font-size: 300px;\n}\n.jianbian{\n    background-image: linear-gradient(to right top, #e79bc6, #c98ebf, #aa82b6, #8b77aa, #6c6b9c, #586c9c, #436d9a, #2a6d95, #017a9b, #00869d, #00929b, #159d94);\n}\n\n    </style>\n</body>\n</html>","date":"2024-01-21T12:47:06.447Z","updated":"2024-01-21T12:47:06.447Z","path":"htmll/renwu.html","title":"","comments":1,"layout":"page","_id":"cls214yqh000czcjvdyg41bw4","content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>作业</title>\n</head>\n<body onload=jis()>\n    <div id=\"bb\">\n        <button onclick=\"abc()\" class=\"xuanfu\">点一下</button>\n        <h1 id=\"ccc\"></h1>\n        <h1 id=\"ddd\"></h1>\n    </div>\n    <script>\n        function jis(){\n            setTimeout(function(){\n                document.getElementById(\"bb\").className='jianbian'\n                },10000)\n        }\n        function abc(){\n            var x=document.getElementById(\"ddd\")\n            var a=\"\"\n            a=Math.floor(Math.random()*900)+100;\n            document.getElementById(\"ccc\").innerHTML=a\n            if(a>600){\n                x.innerHTML=\"中奖啦！！！\"   \n            }else{\n                x.innerHTML=\"\"\n            }\n        }\n\n    </script>\n    <style>\n        *{\n    margin: 0;\n    padding: 0;\n}\n#bb{\n    width: 100%;\n    height: 814px;\n    margin: 0px auto;\n    text-align: center;\n}\nbutton{\n    font-size: 20px;\n    color: black;\n    width: 100px;\n    height: 30px;\n    margin-top: 10%;\n    background-image: linear-gradient(to left, #f1aee4, #d7baf4, #bfc5fa, #aecef7, #a9d4ee);\n    border-radius: 2px;\n    border: 2px;\n    border-color: black;\n}\n.xuanfu:hover{\n    box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19);\n}\n#ccc{\n    font-size: 300px;\n}\n.jianbian{\n    background-image: linear-gradient(to right top, #e79bc6, #c98ebf, #aa82b6, #8b77aa, #6c6b9c, #586c9c, #436d9a, #2a6d95, #017a9b, #00869d, #00929b, #159d94);\n}\n\n    </style>\n</body>\n</html>","excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>作业</title>\n</head>\n<body onload=jis()>\n    <div id=\"bb\">\n        <button onclick=\"abc()\" class=\"xuanfu\">点一下</button>\n        <h1 id=\"ccc\"></h1>\n        <h1 id=\"ddd\"></h1>\n    </div>\n    <script>\n        function jis(){\n            setTimeout(function(){\n                document.getElementById(\"bb\").className='jianbian'\n                },10000)\n        }\n        function abc(){\n            var x=document.getElementById(\"ddd\")\n            var a=\"\"\n            a=Math.floor(Math.random()*900)+100;\n            document.getElementById(\"ccc\").innerHTML=a\n            if(a>600){\n                x.innerHTML=\"中奖啦！！！\"   \n            }else{\n                x.innerHTML=\"\"\n            }\n        }\n\n    </script>\n    <style>\n        *{\n    margin: 0;\n    padding: 0;\n}\n#bb{\n    width: 100%;\n    height: 814px;\n    margin: 0px auto;\n    text-align: center;\n}\nbutton{\n    font-size: 20px;\n    color: black;\n    width: 100px;\n    height: 30px;\n    margin-top: 10%;\n    background-image: linear-gradient(to left, #f1aee4, #d7baf4, #bfc5fa, #aecef7, #a9d4ee);\n    border-radius: 2px;\n    border: 2px;\n    border-color: black;\n}\n.xuanfu:hover{\n    box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19);\n}\n#ccc{\n    font-size: 300px;\n}\n.jianbian{\n    background-image: linear-gradient(to right top, #e79bc6, #c98ebf, #aa82b6, #8b77aa, #6c6b9c, #586c9c, #436d9a, #2a6d95, #017a9b, #00869d, #00929b, #159d94);\n}\n\n    </style>\n</body>\n</html>"},{"layout":"friends","title":"Myfriends","_content":"\n感恩\n\n<!-- more -->\n\n","source":"friends/index.md","raw":"---\nlayout: friends # 必须\ntitle: Myfriends # 可选，这是友链页的标题\n---\n\n感恩\n\n<!-- more -->\n\n","date":"2024-01-21T12:47:06.447Z","updated":"2024-01-21T12:47:06.447Z","path":"friends/index.html","comments":1,"_id":"cls214yqi000dzcjvbg27cnwd","content":"<p>感恩</p>\n<span id=\"more\"></span>\n\n","excerpt":"<p>感恩</p>","more":""},{"layout":"list","group":"mylist","index":true,"_content":"","source":"mylist/index.md","raw":"---\nlayout: list\ngroup: mylist\nindex: true\n---","date":"2024-01-21T12:47:06.484Z","updated":"2024-01-21T12:47:06.484Z","path":"mylist/index.html","title":"","comments":1,"_id":"cls214yqj000fzcjvcc5q184r","content":"","excerpt":"","more":""},{"layout":"tag","index":true,"title":"所有标签","_content":"","source":"tags/index.md","raw":"---\nlayout: tag\nindex: true\ntitle: 所有标签\n---","date":"2024-01-21T12:47:06.484Z","updated":"2024-01-21T12:47:06.484Z","path":"tags/index.html","comments":1,"_id":"cls214yqj000hzcjv06me9us4","content":"","excerpt":"","more":""}],"Post":[{"title":"3D建模","date":"2023-07-11T14:53:32.000Z","_content":"Soildworks安装教程\n<!-- more -->\n## 安装包获取\nSolidWorks2021 详细安装教程，百度网盘\n链接：https://pan.baidu.com/s/1UUAsVRxzJ0ga7q654ZGp7Q\n提取码：jlbp\n\n## 安装步骤\n**step1**\n>解压压缩文件：压缩密码为rjzkgzh\n![IMAGE](/img/5933903e67974aa3b14b1747ec5f80d9.png)\n_双击运行，点击是，点击确定。注册表注册成功后_\n\n**step2**\n>解压完成，在D:\\Soildworks2021\\SW21_CN_x64\\SW21_CN_x64\\SW21_CN_x64_SolidSQUAD_目录下找到\n\n**step3**\n>继续在该目录下\n![image](/img/9f35ab5e7885489c9be07a33511c9d75.png)\n>然后在C盘或D盘（最好在C盘）新建一个SolidWorks文件夹存放，并双击打开该文件夹，然后\n![image](/img/83df4ff69856410cb08bd55acd7eb323.png)\n![image](/img/83df4ff69856410cb08bd55acd7eb323.png)\n\n**step4**\n>断开网络，关闭防火墙等安全防护\n\n**step5**\n>在解压后的文件夹中找到\n![image](/img/07aa0ae726b0476a8db82fddc3ee1016.png)\n>双击进入：找到setup文件\n![image](/img/669fc716842945babcba30a7e765676b.png)\n>默认下一步后，在\n![image](/img/8e21b946d349464abf0aa63a5fc5b8a1.png)\n>此处下一步在检索的时候一定要断开网络提示：\n![image](/img/39f26dc5d425481f805b8398349bc3c9.png)\n>点击取消后进入下一步\n![image](/img/ef0365f8855544b98ed88fe93f69aaeb.png)\n>可以更改安装目录，文件比较大\n![image](/img/782c3b5b474a4da0bf041e4b2575a50a.png)\n>安装完成后：不要运行软件\n![image](/img/90a857fd11c649f99d59a244b8a8cd28.png)\n\n**step6**\n（直接看下方更改路径后的操作）\n![image](/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png)\n>若是自己更改过安装路径，双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击打开“Program Files”文件夹，双击打开“SOLIDWORKS Corp”文件夹，全选“SOLIDWORKS Corp”文件夹中的所有内容，然后鼠标右击选择“复制”。\n![image](/img/4e1aba06c25a4d72a614a241a2210e7f.png)\n>复制后找到安装路径下的\n![image](/img/e852e2780f0344d296ccbc4565e3b6b5.png)\n>粘贴替换即可\n\n**step7**\n>双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击“SolidSQUADLoaderEnabler”\n![image](/img/e4662a14a46b447eb7d9059a53696eb7.png)\n![image](/img/2ece7035eff8421caa19710c49fdcb56.png)\n![image](/img/d0da5e410a244d3abd35a081c4b188f8.png)\n\n上文来源CSDN\n","source":"_posts/3D建模.md","raw":"---\ntitle: 3D建模\ndate: 2023-07-11 22:53:32\ntags: 3D建模\n---\nSoildworks安装教程\n<!-- more -->\n## 安装包获取\nSolidWorks2021 详细安装教程，百度网盘\n链接：https://pan.baidu.com/s/1UUAsVRxzJ0ga7q654ZGp7Q\n提取码：jlbp\n\n## 安装步骤\n**step1**\n>解压压缩文件：压缩密码为rjzkgzh\n![IMAGE](/img/5933903e67974aa3b14b1747ec5f80d9.png)\n_双击运行，点击是，点击确定。注册表注册成功后_\n\n**step2**\n>解压完成，在D:\\Soildworks2021\\SW21_CN_x64\\SW21_CN_x64\\SW21_CN_x64_SolidSQUAD_目录下找到\n\n**step3**\n>继续在该目录下\n![image](/img/9f35ab5e7885489c9be07a33511c9d75.png)\n>然后在C盘或D盘（最好在C盘）新建一个SolidWorks文件夹存放，并双击打开该文件夹，然后\n![image](/img/83df4ff69856410cb08bd55acd7eb323.png)\n![image](/img/83df4ff69856410cb08bd55acd7eb323.png)\n\n**step4**\n>断开网络，关闭防火墙等安全防护\n\n**step5**\n>在解压后的文件夹中找到\n![image](/img/07aa0ae726b0476a8db82fddc3ee1016.png)\n>双击进入：找到setup文件\n![image](/img/669fc716842945babcba30a7e765676b.png)\n>默认下一步后，在\n![image](/img/8e21b946d349464abf0aa63a5fc5b8a1.png)\n>此处下一步在检索的时候一定要断开网络提示：\n![image](/img/39f26dc5d425481f805b8398349bc3c9.png)\n>点击取消后进入下一步\n![image](/img/ef0365f8855544b98ed88fe93f69aaeb.png)\n>可以更改安装目录，文件比较大\n![image](/img/782c3b5b474a4da0bf041e4b2575a50a.png)\n>安装完成后：不要运行软件\n![image](/img/90a857fd11c649f99d59a244b8a8cd28.png)\n\n**step6**\n（直接看下方更改路径后的操作）\n![image](/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png)\n>若是自己更改过安装路径，双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击打开“Program Files”文件夹，双击打开“SOLIDWORKS Corp”文件夹，全选“SOLIDWORKS Corp”文件夹中的所有内容，然后鼠标右击选择“复制”。\n![image](/img/4e1aba06c25a4d72a614a241a2210e7f.png)\n>复制后找到安装路径下的\n![image](/img/e852e2780f0344d296ccbc4565e3b6b5.png)\n>粘贴替换即可\n\n**step7**\n>双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击“SolidSQUADLoaderEnabler”\n![image](/img/e4662a14a46b447eb7d9059a53696eb7.png)\n![image](/img/2ece7035eff8421caa19710c49fdcb56.png)\n![image](/img/d0da5e410a244d3abd35a081c4b188f8.png)\n\n上文来源CSDN\n","slug":"3D建模","published":1,"updated":"2024-01-31T16:52:24.730Z","comments":1,"layout":"post","photos":[],"_id":"cls214yq40001zcjvg5s33n7g","content":"<p>Soildworks安装教程</p>\n<span id=\"more\"></span>\n<h2 id=\"安装包获取\"><a href=\"#安装包获取\" class=\"headerlink\" title=\"安装包获取\"></a>安装包获取</h2><p>SolidWorks2021 详细安装教程，百度网盘<br>链接：<a href=\"https://pan.baidu.com/s/1UUAsVRxzJ0ga7q654ZGp7Q\">https://pan.baidu.com/s/1UUAsVRxzJ0ga7q654ZGp7Q</a><br>提取码：jlbp</p>\n<h2 id=\"安装步骤\"><a href=\"#安装步骤\" class=\"headerlink\" title=\"安装步骤\"></a>安装步骤</h2><p><strong>step1</strong></p>\n<blockquote>\n<p>解压压缩文件：压缩密码为rjzkgzh<br><img src=\"/img/5933903e67974aa3b14b1747ec5f80d9.png\" class=\"lazyload\" data-srcset=\"/img/5933903e67974aa3b14b1747ec5f80d9.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"IMAGE\"><br><em>双击运行，点击是，点击确定。注册表注册成功后</em></p>\n</blockquote>\n<p><strong>step2</strong></p>\n<blockquote>\n<p>解压完成，在D:\\Soildworks2021\\SW21_CN_x64\\SW21_CN_x64\\SW21_CN_x64_SolidSQUAD_目录下找到</p>\n</blockquote>\n<p><strong>step3</strong></p>\n<blockquote>\n<p>继续在该目录下<br><img src=\"/img/9f35ab5e7885489c9be07a33511c9d75.png\" class=\"lazyload\" data-srcset=\"/img/9f35ab5e7885489c9be07a33511c9d75.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>然后在C盘或D盘（最好在C盘）新建一个SolidWorks文件夹存放，并双击打开该文件夹，然后<br><img src=\"/img/83df4ff69856410cb08bd55acd7eb323.png\" class=\"lazyload\" data-srcset=\"/img/83df4ff69856410cb08bd55acd7eb323.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><img src=\"/img/83df4ff69856410cb08bd55acd7eb323.png\" class=\"lazyload\" data-srcset=\"/img/83df4ff69856410cb08bd55acd7eb323.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n</blockquote>\n<p><strong>step4</strong></p>\n<blockquote>\n<p>断开网络，关闭防火墙等安全防护</p>\n</blockquote>\n<p><strong>step5</strong></p>\n<blockquote>\n<p>在解压后的文件夹中找到<br><img src=\"/img/07aa0ae726b0476a8db82fddc3ee1016.png\" class=\"lazyload\" data-srcset=\"/img/07aa0ae726b0476a8db82fddc3ee1016.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>双击进入：找到setup文件<br><img src=\"/img/669fc716842945babcba30a7e765676b.png\" class=\"lazyload\" data-srcset=\"/img/669fc716842945babcba30a7e765676b.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>默认下一步后，在<br><img src=\"/img/8e21b946d349464abf0aa63a5fc5b8a1.png\" class=\"lazyload\" data-srcset=\"/img/8e21b946d349464abf0aa63a5fc5b8a1.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>此处下一步在检索的时候一定要断开网络提示：<br><img src=\"/img/39f26dc5d425481f805b8398349bc3c9.png\" class=\"lazyload\" data-srcset=\"/img/39f26dc5d425481f805b8398349bc3c9.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>点击取消后进入下一步<br><img src=\"/img/ef0365f8855544b98ed88fe93f69aaeb.png\" class=\"lazyload\" data-srcset=\"/img/ef0365f8855544b98ed88fe93f69aaeb.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>可以更改安装目录，文件比较大<br><img src=\"/img/782c3b5b474a4da0bf041e4b2575a50a.png\" class=\"lazyload\" data-srcset=\"/img/782c3b5b474a4da0bf041e4b2575a50a.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>安装完成后：不要运行软件<br><img src=\"/img/90a857fd11c649f99d59a244b8a8cd28.png\" class=\"lazyload\" data-srcset=\"/img/90a857fd11c649f99d59a244b8a8cd28.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n</blockquote>\n<p><strong>step6</strong><br>（直接看下方更改路径后的操作）<br><img src=\"/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png\" class=\"lazyload\" data-srcset=\"/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<blockquote>\n<p>若是自己更改过安装路径，双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击打开“Program Files”文件夹，双击打开“SOLIDWORKS Corp”文件夹，全选“SOLIDWORKS Corp”文件夹中的所有内容，然后鼠标右击选择“复制”。<br><img src=\"/img/4e1aba06c25a4d72a614a241a2210e7f.png\" class=\"lazyload\" data-srcset=\"/img/4e1aba06c25a4d72a614a241a2210e7f.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>复制后找到安装路径下的<br><img src=\"/img/e852e2780f0344d296ccbc4565e3b6b5.png\" class=\"lazyload\" data-srcset=\"/img/e852e2780f0344d296ccbc4565e3b6b5.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br>粘贴替换即可</p>\n</blockquote>\n<p><strong>step7</strong></p>\n<blockquote>\n<p>双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击“SolidSQUADLoaderEnabler”<br><img src=\"/img/e4662a14a46b447eb7d9059a53696eb7.png\" class=\"lazyload\" data-srcset=\"/img/e4662a14a46b447eb7d9059a53696eb7.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><img src=\"/img/2ece7035eff8421caa19710c49fdcb56.png\" class=\"lazyload\" data-srcset=\"/img/2ece7035eff8421caa19710c49fdcb56.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><img src=\"/img/d0da5e410a244d3abd35a081c4b188f8.png\" class=\"lazyload\" data-srcset=\"/img/d0da5e410a244d3abd35a081c4b188f8.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n</blockquote>\n<p>上文来源CSDN</p>\n","excerpt":"<p>Soildworks安装教程</p>","more":"<h2 id=\"安装包获取\"><a href=\"#安装包获取\" class=\"headerlink\" title=\"安装包获取\"></a>安装包获取</h2><p>SolidWorks2021 详细安装教程，百度网盘<br>链接：<a href=\"https://pan.baidu.com/s/1UUAsVRxzJ0ga7q654ZGp7Q\">https://pan.baidu.com/s/1UUAsVRxzJ0ga7q654ZGp7Q</a><br>提取码：jlbp</p>\n<h2 id=\"安装步骤\"><a href=\"#安装步骤\" class=\"headerlink\" title=\"安装步骤\"></a>安装步骤</h2><p><strong>step1</strong></p>\n<blockquote>\n<p>解压压缩文件：压缩密码为rjzkgzh<br><img src=\"/img/5933903e67974aa3b14b1747ec5f80d9.png\" alt=\"IMAGE\"><br><em>双击运行，点击是，点击确定。注册表注册成功后</em></p>\n</blockquote>\n<p><strong>step2</strong></p>\n<blockquote>\n<p>解压完成，在D:\\Soildworks2021\\SW21_CN_x64\\SW21_CN_x64\\SW21_CN_x64_SolidSQUAD_目录下找到</p>\n</blockquote>\n<p><strong>step3</strong></p>\n<blockquote>\n<p>继续在该目录下<br><img src=\"/img/9f35ab5e7885489c9be07a33511c9d75.png\" alt=\"image\"><br>然后在C盘或D盘（最好在C盘）新建一个SolidWorks文件夹存放，并双击打开该文件夹，然后<br><img src=\"/img/83df4ff69856410cb08bd55acd7eb323.png\" alt=\"image\"><br><img src=\"/img/83df4ff69856410cb08bd55acd7eb323.png\" alt=\"image\"></p>\n</blockquote>\n<p><strong>step4</strong></p>\n<blockquote>\n<p>断开网络，关闭防火墙等安全防护</p>\n</blockquote>\n<p><strong>step5</strong></p>\n<blockquote>\n<p>在解压后的文件夹中找到<br><img src=\"/img/07aa0ae726b0476a8db82fddc3ee1016.png\" alt=\"image\"><br>双击进入：找到setup文件<br><img src=\"/img/669fc716842945babcba30a7e765676b.png\" alt=\"image\"><br>默认下一步后，在<br><img src=\"/img/8e21b946d349464abf0aa63a5fc5b8a1.png\" alt=\"image\"><br>此处下一步在检索的时候一定要断开网络提示：<br><img src=\"/img/39f26dc5d425481f805b8398349bc3c9.png\" alt=\"image\"><br>点击取消后进入下一步<br><img src=\"/img/ef0365f8855544b98ed88fe93f69aaeb.png\" alt=\"image\"><br>可以更改安装目录，文件比较大<br><img src=\"/img/782c3b5b474a4da0bf041e4b2575a50a.png\" alt=\"image\"><br>安装完成后：不要运行软件<br><img src=\"/img/90a857fd11c649f99d59a244b8a8cd28.png\" alt=\"image\"></p>\n</blockquote>\n<p><strong>step6</strong><br>（直接看下方更改路径后的操作）<br><img src=\"/img/38a6d0d7ed0e4de4ba4f12205ccd4226.png\" alt=\"image\"></p>\n<blockquote>\n<p>若是自己更改过安装路径，双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击打开“Program Files”文件夹，双击打开“SOLIDWORKS Corp”文件夹，全选“SOLIDWORKS Corp”文件夹中的所有内容，然后鼠标右击选择“复制”。<br><img src=\"/img/4e1aba06c25a4d72a614a241a2210e7f.png\" alt=\"image\"><br>复制后找到安装路径下的<br><img src=\"/img/e852e2780f0344d296ccbc4565e3b6b5.png\" alt=\"image\"><br>粘贴替换即可</p>\n</blockquote>\n<p><strong>step7</strong></p>\n<blockquote>\n<p>双击打开压缩包解压后的“SolidWorks2020”文件夹里面的“SolidSQUAD”文件夹，双击“SolidSQUADLoaderEnabler”<br><img src=\"/img/e4662a14a46b447eb7d9059a53696eb7.png\" alt=\"image\"><br><img src=\"/img/2ece7035eff8421caa19710c49fdcb56.png\" alt=\"image\"><br><img src=\"/img/d0da5e410a244d3abd35a081c4b188f8.png\" alt=\"image\"></p>\n</blockquote>\n<p>上文来源CSDN</p>","popularPost_tmp_postPath":true,"eyeCatchImage":"/img/5933903e67974aa3b14b1747ec5f80d9.png","popularPost_tmp_gaData":{"updated":"Thu Feb 01 2024 00:52:24 GMT+0800 (中国标准时间)","title":"3D建模","path":"2023/07/11/3D建模/","eyeCatchImage":"/img/5933903e67974aa3b14b1747ec5f80d9.png","excerpt":"<p>Soildworks安装教程</p>","date":{"_isAMomentObject":true,"_i":"2023-07-11T14:53:32.000Z","_isUTC":false,"_pf":{"empty":false,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":false,"invalidEra":null,"invalidMonth":null,"invalidFormat":false,"userInvalidated":false,"iso":false,"parsedDateParts":[],"era":null,"meridiem":null,"rfc2822":false,"weekdayMismatch":false},"_locale":{"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"_longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"_invalidDate":"Invalid date","_dayOfMonthOrdinalParse":{},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"_months":["January","February","March","April","May","June","July","August","September","October","November","December"],"_monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"_week":{"dow":0,"doy":6},"_weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"_weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"_weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"_meridiemParse":{},"_eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"_abbr":"en","_config":{"calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"invalidDate":"Invalid date","dayOfMonthOrdinalParse":{},"relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"week":{"dow":0,"doy":6},"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"meridiemParse":{},"eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"abbr":"en"},"_dayOfMonthOrdinalParseLenient":{}},"_d":"2023-07-11T14:53:32.000Z","_isValid":true,"_z":null},"pv":0,"totalPV":0,"categories":"","tags":["3D建模"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"51大作业","date":"2024-01-21T13:20:04.000Z","_content":"\n还没开动\n","source":"_posts/51大作业.md","raw":"---\ntitle: 51大作业\ndate: 2024-01-21 21:20:04\ntags: C51\n---\n\n还没开动\n","slug":"51大作业","published":1,"updated":"2024-01-31T15:52:47.403Z","comments":1,"layout":"post","photos":[],"_id":"cls214yq90003zcjvbj6gaotx","content":"<p>还没开动</p>\n","excerpt":"","more":"<p>还没开动</p>\n","popularPost_tmp_postPath":true,"eyeCatchImage":null,"popularPost_tmp_gaData":{"updated":"Wed Jan 31 2024 23:52:47 GMT+0800 (中国标准时间)","title":"51大作业","path":"2024/01/21/51大作业/","eyeCatchImage":null,"excerpt":null,"date":{"_isAMomentObject":true,"_i":"2024-01-21T13:20:04.000Z","_isUTC":false,"_pf":{"empty":false,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":false,"invalidEra":null,"invalidMonth":null,"invalidFormat":false,"userInvalidated":false,"iso":false,"parsedDateParts":[],"era":null,"meridiem":null,"rfc2822":false,"weekdayMismatch":false},"_locale":{"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"_longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"_invalidDate":"Invalid date","_dayOfMonthOrdinalParse":{},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"_months":["January","February","March","April","May","June","July","August","September","October","November","December"],"_monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"_week":{"dow":0,"doy":6},"_weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"_weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"_weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"_meridiemParse":{},"_eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"_abbr":"en","_config":{"calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"invalidDate":"Invalid date","dayOfMonthOrdinalParse":{},"relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"week":{"dow":0,"doy":6},"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"meridiemParse":{},"eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"abbr":"en"},"_dayOfMonthOrdinalParseLenient":{}},"_d":"2024-01-21T13:20:04.000Z","_isValid":true,"_z":null},"pv":0,"totalPV":0,"categories":"","tags":["C51"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"VUE","_content":"\n要换成我上课的纪要","source":"_posts/VUE.md","raw":"---\ntitle: VUE\ntags: VUE\n---\n\n要换成我上课的纪要","slug":"VUE","published":1,"date":"2024-01-21T12:47:06.445Z","updated":"2024-01-31T16:55:28.982Z","comments":1,"layout":"post","photos":[],"_id":"cls214yqe0006zcjvgkri0vxm","content":"<p>要换成我上课的纪要</p>\n","excerpt":"","more":"<p>要换成我上课的纪要</p>\n","popularPost_tmp_postPath":true,"eyeCatchImage":null,"popularPost_tmp_gaData":{"updated":"Thu Feb 01 2024 00:55:28 GMT+0800 (中国标准时间)","title":"VUE","path":"2024/01/21/VUE/","eyeCatchImage":null,"excerpt":null,"date":{"_isAMomentObject":true,"_i":"2024-01-21T12:47:06.445Z","_isUTC":false,"_pf":{"empty":false,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":false,"invalidEra":null,"invalidMonth":null,"invalidFormat":false,"userInvalidated":false,"iso":false,"parsedDateParts":[],"era":null,"meridiem":null,"rfc2822":false,"weekdayMismatch":false},"_locale":{"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"_longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"_invalidDate":"Invalid date","_dayOfMonthOrdinalParse":{},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"_months":["January","February","March","April","May","June","July","August","September","October","November","December"],"_monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"_week":{"dow":0,"doy":6},"_weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"_weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"_weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"_meridiemParse":{},"_eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"_abbr":"en","_config":{"calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"invalidDate":"Invalid date","dayOfMonthOrdinalParse":{},"relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"week":{"dow":0,"doy":6},"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"meridiemParse":{},"eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"abbr":"en"},"_dayOfMonthOrdinalParseLenient":{}},"_d":"2024-01-21T12:47:06.445Z","_isValid":true,"_z":null},"pv":0,"totalPV":0,"categories":"","tags":["VUE"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"VScode配置C51环境","date":"2024-01-27T17:19:23.000Z","_content":"\n使用Embedded IDE在vscode上部署keil c环境，一举解决keil开发难受的问题\nvscode，爽！\n\n<!-- more -->\n\n<span style=\"font-size: x-large;\">···········</span>\n\n<br>\n\n入手51单片机，绕不开一款软件--keil，它内置了非常多芯片的配置，几乎是最全面的软件，也是很多嵌入式工程师的第一选择，然而几乎入手keil的每个人都会抱怨，已经什么年代了，怎么界面还是这么古老，而且支持的更改少，无代码补全功能，种种缺点另许多程序员苦不堪言，我亦是如此  \n<br>\n\n**要是能够在vscode上开发就好了，世界上最丰富的插件市场，酷炫的界面，强大github copilot等ai代码辅助工具，真是令人欲罢不能**  \n<br>\n\n这个时候，我突然想到，我在vscode上配置了这么多环境*（c/c++、python、vue、node.js等等数不胜数）*，一定可以配置C51吧，在网上一搜，哦~其实嵌入式开发使用vscode已成常态，不过基本都是32之后，使用vscode配置c51还是少部分，找了许多种方法，终于找到一个非常适合自己的  \n<br>\n\n以下就是详细的配置教程\n\n**1.下载vscode，直接搜索下载即可，需要注意的是下载系统版的**  \n<br>\n\n![image](../img/vscode.png)\n<br>\n\n**2.在vscode中安装插件Embedded IDE，安装时间较长，等一会咯**  \n<br>\n\n![image](../img/Embedded%20IDE.png)\n<br>\n\n**3.打开keil C51的安装目录，找到TOOLS.INI文件并记住该文件路径**  \n<br>\n\n![image](../img/keil.png)  \n<br>\n\n**4.打开vscode点开左侧菜单栏Embedded IDE图标打开插件然后点击操作，点击设置工具链路径，设置刚刚看过的TOOLS.INI文件**  \n<br>\n\n![image](../img/shezhi.png)  \n<br>\n\n点开后选择keil的TOOLS.INI文件  \n<br>\n\n![image](../img/xuanzhe.png)  \n<br>\n\n看到这其实你也明白了吧，实际上也是调用了keil的接口罢了\n<br>\n\n**5.设置完成后就可以点击新建项目或者导入keil项目，新建项目点击之后选择空项目，选择8位MCU，，随后命名完就创建成功了**\n<br>\n\n![image](../img/ko.png)  \n<br>\n\n![image](../img/mcu.png)  \n<br>\n\n**6.创建好之后在创建好的项目目录下点击构建配置并换成keil C51**  \n<br>\n\n![image](../img/peizhi.png)  \n<br>\n\n**7.src目录就是存放代码的目录，在这里会有一个main.c文件，现在已经可以正常的写代码了**\n<br>\n\n![image](../img/src.png)  \n<br>\n\n也可以点击左侧菜单栏Embedded IDE图标来打开src目录（这样更容易看工程目录）\n<br>\n\n![image](../img/idesrc.png)  \n<br>\n\n**8.在右上角点击构建图标即可编译**\n<br>\n\n![image](../img/shao.png)  \n<br>\n\n**9.编译通过会在build目录生成hex文件，这样就可以正常烧录了**\n<br>\n\n![image](../img/hex.png) \n<br>\n\n**10.再次打开只需选择工程的code-workspace文件即可**\n<br>\n\n![image](../img/dakai.png)  \n<br>\n\n也可以打开老keil项目  \n<br>\n\n![image](../img/lao.png)  \n<br>\n\n也是可以正常烧录\n<br>\n\n![image](../img/lao2.png)  \n<br>\n\n>理论上来说stm32与arduino都可以使用，不过在面对不同的环境时，可能会有更好的方法，没关系，遇水搭桥，逢山修路，要是遇到更好的方法，后续会有更新","source":"_posts/VScode配置C51环境.md","raw":"---\ntitle: VScode配置C51环境\ndate: 2024-01-28 01:19:23\ntags:  VScode\n---\n\n使用Embedded IDE在vscode上部署keil c环境，一举解决keil开发难受的问题\nvscode，爽！\n\n<!-- more -->\n\n<span style=\"font-size: x-large;\">···········</span>\n\n<br>\n\n入手51单片机，绕不开一款软件--keil，它内置了非常多芯片的配置，几乎是最全面的软件，也是很多嵌入式工程师的第一选择，然而几乎入手keil的每个人都会抱怨，已经什么年代了，怎么界面还是这么古老，而且支持的更改少，无代码补全功能，种种缺点另许多程序员苦不堪言，我亦是如此  \n<br>\n\n**要是能够在vscode上开发就好了，世界上最丰富的插件市场，酷炫的界面，强大github copilot等ai代码辅助工具，真是令人欲罢不能**  \n<br>\n\n这个时候，我突然想到，我在vscode上配置了这么多环境*（c/c++、python、vue、node.js等等数不胜数）*，一定可以配置C51吧，在网上一搜，哦~其实嵌入式开发使用vscode已成常态，不过基本都是32之后，使用vscode配置c51还是少部分，找了许多种方法，终于找到一个非常适合自己的  \n<br>\n\n以下就是详细的配置教程\n\n**1.下载vscode，直接搜索下载即可，需要注意的是下载系统版的**  \n<br>\n\n![image](../img/vscode.png)\n<br>\n\n**2.在vscode中安装插件Embedded IDE，安装时间较长，等一会咯**  \n<br>\n\n![image](../img/Embedded%20IDE.png)\n<br>\n\n**3.打开keil C51的安装目录，找到TOOLS.INI文件并记住该文件路径**  \n<br>\n\n![image](../img/keil.png)  \n<br>\n\n**4.打开vscode点开左侧菜单栏Embedded IDE图标打开插件然后点击操作，点击设置工具链路径，设置刚刚看过的TOOLS.INI文件**  \n<br>\n\n![image](../img/shezhi.png)  \n<br>\n\n点开后选择keil的TOOLS.INI文件  \n<br>\n\n![image](../img/xuanzhe.png)  \n<br>\n\n看到这其实你也明白了吧，实际上也是调用了keil的接口罢了\n<br>\n\n**5.设置完成后就可以点击新建项目或者导入keil项目，新建项目点击之后选择空项目，选择8位MCU，，随后命名完就创建成功了**\n<br>\n\n![image](../img/ko.png)  \n<br>\n\n![image](../img/mcu.png)  \n<br>\n\n**6.创建好之后在创建好的项目目录下点击构建配置并换成keil C51**  \n<br>\n\n![image](../img/peizhi.png)  \n<br>\n\n**7.src目录就是存放代码的目录，在这里会有一个main.c文件，现在已经可以正常的写代码了**\n<br>\n\n![image](../img/src.png)  \n<br>\n\n也可以点击左侧菜单栏Embedded IDE图标来打开src目录（这样更容易看工程目录）\n<br>\n\n![image](../img/idesrc.png)  \n<br>\n\n**8.在右上角点击构建图标即可编译**\n<br>\n\n![image](../img/shao.png)  \n<br>\n\n**9.编译通过会在build目录生成hex文件，这样就可以正常烧录了**\n<br>\n\n![image](../img/hex.png) \n<br>\n\n**10.再次打开只需选择工程的code-workspace文件即可**\n<br>\n\n![image](../img/dakai.png)  \n<br>\n\n也可以打开老keil项目  \n<br>\n\n![image](../img/lao.png)  \n<br>\n\n也是可以正常烧录\n<br>\n\n![image](../img/lao2.png)  \n<br>\n\n>理论上来说stm32与arduino都可以使用，不过在面对不同的环境时，可能会有更好的方法，没关系，遇水搭桥，逢山修路，要是遇到更好的方法，后续会有更新","slug":"VScode配置C51环境","published":1,"updated":"2024-01-31T16:35:11.768Z","comments":1,"layout":"post","photos":[],"_id":"cls214yqf0008zcjv7dno621f","content":"<p>使用Embedded IDE在vscode上部署keil c环境，一举解决keil开发难受的问题<br>vscode，爽！</p>\n<span id=\"more\"></span>\n\n<p><span style=\"font-size: x-large;\">···········</span></p>\n<br>\n\n<p>入手51单片机，绕不开一款软件–keil，它内置了非常多芯片的配置，几乎是最全面的软件，也是很多嵌入式工程师的第一选择，然而几乎入手keil的每个人都会抱怨，已经什么年代了，怎么界面还是这么古老，而且支持的更改少，无代码补全功能，种种缺点另许多程序员苦不堪言，我亦是如此<br><br></p>\n<p><strong>要是能够在vscode上开发就好了，世界上最丰富的插件市场，酷炫的界面，强大github copilot等ai代码辅助工具，真是令人欲罢不能</strong><br><br></p>\n<p>这个时候，我突然想到，我在vscode上配置了这么多环境<em>（c&#x2F;c++、python、vue、node.js等等数不胜数）</em>，一定可以配置C51吧，在网上一搜，哦~其实嵌入式开发使用vscode已成常态，不过基本都是32之后，使用vscode配置c51还是少部分，找了许多种方法，终于找到一个非常适合自己的<br><br></p>\n<p>以下就是详细的配置教程</p>\n<p><strong>1.下载vscode，直接搜索下载即可，需要注意的是下载系统版的</strong><br><br></p>\n<p><img src=\"/../img/vscode.png\" class=\"lazyload\" data-srcset=\"/../img/vscode.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>2.在vscode中安装插件Embedded IDE，安装时间较长，等一会咯</strong><br><br></p>\n<p><img src=\"/../img/Embedded%20IDE.png\" class=\"lazyload\" data-srcset=\"/../img/Embedded%20IDE.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>3.打开keil C51的安装目录，找到TOOLS.INI文件并记住该文件路径</strong><br><br></p>\n<p><img src=\"/../img/keil.png\" class=\"lazyload\" data-srcset=\"/../img/keil.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>4.打开vscode点开左侧菜单栏Embedded IDE图标打开插件然后点击操作，点击设置工具链路径，设置刚刚看过的TOOLS.INI文件</strong><br><br></p>\n<p><img src=\"/../img/shezhi.png\" class=\"lazyload\" data-srcset=\"/../img/shezhi.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p>点开后选择keil的TOOLS.INI文件<br><br></p>\n<p><img src=\"/../img/xuanzhe.png\" class=\"lazyload\" data-srcset=\"/../img/xuanzhe.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p>看到这其实你也明白了吧，实际上也是调用了keil的接口罢了<br><br></p>\n<p><strong>5.设置完成后就可以点击新建项目或者导入keil项目，新建项目点击之后选择空项目，选择8位MCU，，随后命名完就创建成功了</strong><br><br></p>\n<p><img src=\"/../img/ko.png\" class=\"lazyload\" data-srcset=\"/../img/ko.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><img src=\"/../img/mcu.png\" class=\"lazyload\" data-srcset=\"/../img/mcu.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>6.创建好之后在创建好的项目目录下点击构建配置并换成keil C51</strong><br><br></p>\n<p><img src=\"/../img/peizhi.png\" class=\"lazyload\" data-srcset=\"/../img/peizhi.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>7.src目录就是存放代码的目录，在这里会有一个main.c文件，现在已经可以正常的写代码了</strong><br><br></p>\n<p><img src=\"/../img/src.png\" class=\"lazyload\" data-srcset=\"/../img/src.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p>也可以点击左侧菜单栏Embedded IDE图标来打开src目录（这样更容易看工程目录）<br><br></p>\n<p><img src=\"/../img/idesrc.png\" class=\"lazyload\" data-srcset=\"/../img/idesrc.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>8.在右上角点击构建图标即可编译</strong><br><br></p>\n<p><img src=\"/../img/shao.png\" class=\"lazyload\" data-srcset=\"/../img/shao.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>9.编译通过会在build目录生成hex文件，这样就可以正常烧录了</strong><br><br></p>\n<p><img src=\"/../img/hex.png\" class=\"lazyload\" data-srcset=\"/../img/hex.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p><strong>10.再次打开只需选择工程的code-workspace文件即可</strong><br><br></p>\n<p><img src=\"/../img/dakai.png\" class=\"lazyload\" data-srcset=\"/../img/dakai.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p>也可以打开老keil项目<br><br></p>\n<p><img src=\"/../img/lao.png\" class=\"lazyload\" data-srcset=\"/../img/lao.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<p>也是可以正常烧录<br><br></p>\n<p><img src=\"/../img/lao2.png\" class=\"lazyload\" data-srcset=\"/../img/lao2.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"><br><br></p>\n<blockquote>\n<p>理论上来说stm32与arduino都可以使用，不过在面对不同的环境时，可能会有更好的方法，没关系，遇水搭桥，逢山修路，要是遇到更好的方法，后续会有更新</p>\n</blockquote>\n","excerpt":"<p>使用Embedded IDE在vscode上部署keil c环境，一举解决keil开发难受的问题<br>vscode，爽！</p>","more":"<p><span style=\"font-size: x-large;\">···········</span></p>\n<br>\n\n<p>入手51单片机，绕不开一款软件–keil，它内置了非常多芯片的配置，几乎是最全面的软件，也是很多嵌入式工程师的第一选择，然而几乎入手keil的每个人都会抱怨，已经什么年代了，怎么界面还是这么古老，而且支持的更改少，无代码补全功能，种种缺点另许多程序员苦不堪言，我亦是如此<br><br></p>\n<p><strong>要是能够在vscode上开发就好了，世界上最丰富的插件市场，酷炫的界面，强大github copilot等ai代码辅助工具，真是令人欲罢不能</strong><br><br></p>\n<p>这个时候，我突然想到，我在vscode上配置了这么多环境<em>（c&#x2F;c++、python、vue、node.js等等数不胜数）</em>，一定可以配置C51吧，在网上一搜，哦~其实嵌入式开发使用vscode已成常态，不过基本都是32之后，使用vscode配置c51还是少部分，找了许多种方法，终于找到一个非常适合自己的<br><br></p>\n<p>以下就是详细的配置教程</p>\n<p><strong>1.下载vscode，直接搜索下载即可，需要注意的是下载系统版的</strong><br><br></p>\n<p><img src=\"/../img/vscode.png\" alt=\"image\"><br><br></p>\n<p><strong>2.在vscode中安装插件Embedded IDE，安装时间较长，等一会咯</strong><br><br></p>\n<p><img src=\"/../img/Embedded%20IDE.png\" alt=\"image\"><br><br></p>\n<p><strong>3.打开keil C51的安装目录，找到TOOLS.INI文件并记住该文件路径</strong><br><br></p>\n<p><img src=\"/../img/keil.png\" alt=\"image\"><br><br></p>\n<p><strong>4.打开vscode点开左侧菜单栏Embedded IDE图标打开插件然后点击操作，点击设置工具链路径，设置刚刚看过的TOOLS.INI文件</strong><br><br></p>\n<p><img src=\"/../img/shezhi.png\" alt=\"image\"><br><br></p>\n<p>点开后选择keil的TOOLS.INI文件<br><br></p>\n<p><img src=\"/../img/xuanzhe.png\" alt=\"image\"><br><br></p>\n<p>看到这其实你也明白了吧，实际上也是调用了keil的接口罢了<br><br></p>\n<p><strong>5.设置完成后就可以点击新建项目或者导入keil项目，新建项目点击之后选择空项目，选择8位MCU，，随后命名完就创建成功了</strong><br><br></p>\n<p><img src=\"/../img/ko.png\" alt=\"image\"><br><br></p>\n<p><img src=\"/../img/mcu.png\" alt=\"image\"><br><br></p>\n<p><strong>6.创建好之后在创建好的项目目录下点击构建配置并换成keil C51</strong><br><br></p>\n<p><img src=\"/../img/peizhi.png\" alt=\"image\"><br><br></p>\n<p><strong>7.src目录就是存放代码的目录，在这里会有一个main.c文件，现在已经可以正常的写代码了</strong><br><br></p>\n<p><img src=\"/../img/src.png\" alt=\"image\"><br><br></p>\n<p>也可以点击左侧菜单栏Embedded IDE图标来打开src目录（这样更容易看工程目录）<br><br></p>\n<p><img src=\"/../img/idesrc.png\" alt=\"image\"><br><br></p>\n<p><strong>8.在右上角点击构建图标即可编译</strong><br><br></p>\n<p><img src=\"/../img/shao.png\" alt=\"image\"><br><br></p>\n<p><strong>9.编译通过会在build目录生成hex文件，这样就可以正常烧录了</strong><br><br></p>\n<p><img src=\"/../img/hex.png\" alt=\"image\"><br><br></p>\n<p><strong>10.再次打开只需选择工程的code-workspace文件即可</strong><br><br></p>\n<p><img src=\"/../img/dakai.png\" alt=\"image\"><br><br></p>\n<p>也可以打开老keil项目<br><br></p>\n<p><img src=\"/../img/lao.png\" alt=\"image\"><br><br></p>\n<p>也是可以正常烧录<br><br></p>\n<p><img src=\"/../img/lao2.png\" alt=\"image\"><br><br></p>\n<blockquote>\n<p>理论上来说stm32与arduino都可以使用，不过在面对不同的环境时，可能会有更好的方法，没关系，遇水搭桥，逢山修路，要是遇到更好的方法，后续会有更新</p>\n</blockquote>","popularPost_tmp_postPath":true,"eyeCatchImage":"/../img/vscode.png","popularPost_tmp_gaData":{"updated":"Thu Feb 01 2024 00:35:11 GMT+0800 (中国标准时间)","title":"VScode配置C51环境","path":"2024/01/28/VScode配置C51环境/","eyeCatchImage":"/../img/vscode.png","excerpt":"<p>使用Embedded IDE在vscode上部署keil c环境，一举解决keil开发难受的问题<br>vscode，爽！</p>","date":{"_isAMomentObject":true,"_i":"2024-01-27T17:19:23.000Z","_isUTC":false,"_pf":{"empty":false,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":false,"invalidEra":null,"invalidMonth":null,"invalidFormat":false,"userInvalidated":false,"iso":false,"parsedDateParts":[],"era":null,"meridiem":null,"rfc2822":false,"weekdayMismatch":false},"_locale":{"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"_longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"_invalidDate":"Invalid date","_dayOfMonthOrdinalParse":{},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"_months":["January","February","March","April","May","June","July","August","September","October","November","December"],"_monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"_week":{"dow":0,"doy":6},"_weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"_weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"_weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"_meridiemParse":{},"_eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"_abbr":"en","_config":{"calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"invalidDate":"Invalid date","dayOfMonthOrdinalParse":{},"relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"week":{"dow":0,"doy":6},"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"meridiemParse":{},"eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"abbr":"en"},"_dayOfMonthOrdinalParseLenient":{}},"_d":"2024-01-27T17:19:23.000Z","_isValid":true,"_z":null},"pv":0,"totalPV":0,"categories":"","tags":["VScode"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"前端+","date":"2023-07-07T10:31:49.000Z","_content":"## 事件循环\n\n### 浏览器的进程模型\n\n#### 何为进程？\n\n程序运行需要有它自己专属的内存空间，可以把这块内存空间简单的理解为进程\n\n<img src=\"http://mdrs.yuanjin.tech/img/202208092057573.png\" alt=\"image-20220809205743532\" style=\"zoom:50%;\" />\n\n每个应用至少有一个进程，进程之间相互独立，即使要通信，也需要双方同意。\n\n#### 何为线程？\n\n有了进程后，就可以运行程序的代码了。\n\n运行代码的「人」称之为「线程」。\n\n一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，该线程称之为主线程。*当主线程结束时，进程也相应结束*\n\n如果程序需要同时执行多块代码，主线程就会启动更多的线程来执行代码，所以一个进程中可以包含多个线程。\n\n![image-20220809210859457](http://mdrs.yuanjin.tech/img/202208092108499.png)\n\n#### 浏览器有哪些进程和线程？\n\n**浏览器是一个多进程多线程的应用程序**\n\n浏览器内部工作极其复杂。\n\n为了避免相互影响，为了减少连环崩溃的几率，当启动浏览器后，它会自动启动多个进程。\n\n![image-20220809213152371](http://mdrs.yuanjin.tech/img/202208092131410.png)\n\n> 可以在浏览器的任务管理器中查看当前的所有进程\n\n其中，最主要的进程有：\n\n1. 浏览器进程\n\n   主要负责界面显示、用户交互、子进程管理等。浏览器进程内部会启动多个线程处理不同的任务。\n\n2. 网络进程\n\n   负责加载网络资源。网络进程内部会启动多个线程来处理不同的网络任务。\n\n3. **渲染进程**（本节课重点讲解的进程）\n\n   渲染进程启动后，会开启一个**渲染主线程**，主线程负责执行 HTML、CSS、JS 代码。\n\n   默认情况下，浏览器会为每个标签页开启一个新的渲染进程，以保证不同的标签页之间不相互影响。\n\n   > 将来该默认模式可能会有所改变，有兴趣的同学可参见[chrome官方说明文档](https://chromium.googlesource.com/chromium/src/+/main/docs/process_model_and_site_isolation.md#Modes-and-Availability)\n\n### 渲染主线程是如何工作的？\n\n渲染主线程是浏览器中最繁忙的线程，需要它处理的任务包括但不限于：\n\n- 解析 HTML\n- 解析 CSS\n- 计算样式\n- 布局\n- 处理图层\n- 每秒把页面画 60 次\n- 执行全局 JS 代码\n- 执行事件处理函数\n- 执行计时器的回调函数\n- ......\n\n> 思考题：为什么渲染进程不适用多个线程来处理这些事情？\n\n要处理这么多的任务，主线程遇到了一个前所未有的难题：如何调度任务？\n\n比如：\n\n- 我正在执行一个 JS 函数，执行到一半的时候用户点击了按钮，我该立即去执行点击事件的处理函数吗？\n- 我正在执行一个 JS 函数，执行到一半的时候某个计时器到达了时间，我该立即去执行它的回调吗？\n- 浏览器进程通知我“用户点击了按钮”，与此同时，某个计时器也到达了时间，我应该处理哪一个呢？\n- ......\n\n渲染主线程想出了一个绝妙的主意来处理这个问题：排队\n\n![image-20220809223027806](http://mdrs.yuanjin.tech/img/202208092230847.png)\n\n1. 在最开始的时候，渲染主线程会进入一个无限循环\n2. 每一次循环会检查消息队列中是否有任务存在。如果有，就取出第一个任务执行，执行完一个后进入下一次循环；如果没有，则进入休眠状态。\n3. 其他所有线程（包括其他进程的线程）可以随时向消息队列添加任务。新任务会加到消息队列的末尾。在添加新任务时，如果主线程是休眠状态，则会将其唤醒以继续循环拿取任务\n\n这样一来，就可以让每个任务有条不紊的、持续的进行下去了。\n\n**整个过程，被称之为事件循环（消息循环）**\n\n### 若干解释\n\n#### 何为异步？\n\n代码在执行过程中，会遇到一些无法立即处理的任务，比如：\n\n- 计时完成后需要执行的任务 —— `setTimeout`、`setInterval`\n- 网络通信完成后需要执行的任务 -- `XHR`、`Fetch`\n- 用户操作后需要执行的任务 -- `addEventListener`\n\n如果让渲染主线程等待这些任务的时机达到，就会导致主线程长期处于「阻塞」的状态，从而导致浏览器「卡死」\n\n![image-20220810104344296](http://mdrs.yuanjin.tech/img/202208101043348.png)\n\n**渲染主线程承担着极其重要的工作，无论如何都不能阻塞！**\n\n因此，浏览器选择**异步**来解决这个问题\n\n![image-20220810104858857](http://mdrs.yuanjin.tech/img/202208101048899.png)\n\n使用异步的方式，**渲染主线程永不阻塞**\n\n> 面试题：如何理解 JS 的异步？\n>\n> \n>\n> 参考答案：\n>\n> JS是一门单线程的语言，这是因为它运行在浏览器的渲染主线程中，而渲染主线程只有一个。\n>\n> 而渲染主线程承担着诸多的工作，渲染页面、执行 JS 都在其中运行。\n>\n> 如果使用同步的方式，就极有可能导致主线程产生阻塞，从而导致消息队列中的很多其他任务无法得到执行。这样一来，一方面会导致繁忙的主线程白白的消耗时间，另一方面导致页面无法及时更新，给用户造成卡死现象。\n>\n> 所以浏览器采用异步的方式来避免。具体做法是当某些任务发生时，比如计时器、网络、事件监听，主线程将任务交给其他线程去处理，自身立即结束任务的执行，转而执行后续代码。当其他线程完成时，将事先传递的回调函数包装成任务，加入到消息队列的末尾排队，等待主线程调度执行。\n>\n> 在这种异步模式下，浏览器永不阻塞，从而最大限度的保证了单线程的流畅运行。\n\n#### JS为何会阻碍渲染？\n\n先看代码\n\n```html\n<h1>Mr.Yuan is awesome!</h1>\n<button>change</button>\n<script>\n  var h1 = document.querySelector('h1');\n  var btn = document.querySelector('button');\n\n  // 死循环指定的时间\n  function delay(duration) {\n    var start = Date.now();\n    while (Date.now() - start < duration) {}\n  }\n\n  btn.onclick = function () {\n    h1.textContent = '陈广文很帅！';\n    delay(3000);\n  };\n</script>\n```\n\n点击按钮后，会发生什么呢？\n\n<见具体演示>\n\n#### 任务有优先级吗？\n\n任务没有优先级，在消息队列中先进先出\n\n但**消息队列是有优先级的**\n\n根据 W3C 的最新解释:\n\n- 每个任务都有一个任务类型，同一个类型的任务必须在一个队列，不同类型的任务可以分属于不同的队列。\n  在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务执行。\n- 浏览器必须准备好一个微队列，微队列中的任务优先所有其他任务执行\n  https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint\n\n> 随着浏览器的复杂度急剧提升，W3C 不再使用宏队列的说法\n\n在目前 chrome 的实现中，至少包含了下面的队列：\n\n- 延时队列：用于存放计时器到达后的回调任务，优先级「中」\n- 交互队列：用于存放用户操作后产生的事件处理任务，优先级「高」\n- 微队列：用户存放需要最快执行的任务，优先级「最高」\n\n> 添加任务到微队列的主要方式主要是使用 Promise、MutationObserver\n>\n> \n>\n> 例如：\n>\n> ```js\n> // 立即把一个函数添加到微队列\n> Promise.resolve().then(函数)\n> ```\n\n> 浏览器还有很多其他的队列，由于和我们开发关系不大，不作考虑\n\n> 面试题：阐述一下 JS 的事件循环\n>\n> \n>\n> 参考答案：\n>\n> 事件循环又叫做消息循环，是浏览器渲染主线程的工作方式。\n>\n> 在 Chrome 的源码中，它开启一个不会结束的 for 循环，每次循环从消息队列中取出第一个任务执行，而其他线程只需要在合适的时候将任务加入到队列末尾即可。\n>\n> 过去把消息队列简单分为宏队列和微队列，这种说法目前已无法满足复杂的浏览器环境，取而代之的是一种更加灵活多变的处理方式。\n>\n> 根据 W3C 官方的解释，每个任务有不同的类型，同类型的任务必须在同一个队列，不同的任务可以属于不同的队列。不同任务队列有不同的优先级，在一次事件循环中，由浏览器自行决定取哪一个队列的任务。但浏览器必须有一个微队列，微队列的任务一定具有最高的优先级，必须优先调度执行。\n\n> 面试题：JS 中的计时器能做到精确计时吗？为什么？\n>\n> \n>\n> 参考答案：\n>\n> 不行，因为：\n>\n> 1. 计算机硬件没有原子钟，无法做到精确计时\n> 2. 操作系统的计时函数本身就有少量偏差，由于 JS 的计时器最终调用的是操作系统的函数，也就携带了这些偏差\n> 3. 按照 W3C 的标准，浏览器实现计时器时，如果嵌套层级超过 5 层，则会带有 4 毫秒的最少时间，这样在计时时间少于 4 毫秒时又带来了偏差\n> 4. 受事件循环的影响，计时器的回调函数只能在主线程空闲时运行，因此又带来了偏差\n\n\n## 浏览器渲染过程\n\n### 浏览器是如何渲染页面的？\n\n当浏览器的网络线程收到 HTML 文档后，会产生一个渲染任务，并将其传递给渲染主线程的消息队列。\n\n在事件循环机制的作用下，渲染主线程取出消息队列中的渲染任务，开启渲染流程。\n\n![image](/img/20230711021718.png)\n\n-------\n\n整个渲染流程分为多个阶段，分别是： HTML 解析、样式计算、布局、分层、绘制、分块、光栅化、画\n\n每个阶段都有明确的输入输出，上一个阶段的输出会成为下一个阶段的输入。\n\n这样，整个渲染流程就形成了一套组织严密的生产流水线。\n\n![image](/img/20230711021839.png)\n\n-------\n\n#### 渲染的第一步是**解析 HTML**。\n\n![image](/img/20230711022045.png)\n\n解析过程中遇到 CSS 解析 CSS，遇到 JS 执行 JS。为了提高解析效率，浏览器在开始解析前，会启动一个预解析的线程，率先下载 HTML 中的外部 CSS 文件和 外部的 JS 文件。\n\n![image](/imhg/20230711022147.png)\n\ncss与js是完全不同的\n\n![image](/img/20230711022309.png)\n\n如果主线程解析到`link`位置，此时外部的 CSS 文件还没有下载解析好，主线程不会等待，继续解析后续的 HTML。这是因为下载和解析 CSS 的工作是在预解析线程中进行的。这就是 CSS 不会阻塞 HTML 解析的根本原因。\n\n如果主线程解析到`script`位置，会停止解析 HTML，转而等待 JS 文件下载好，并将全局代码解析执行完成后，才能继续解析 HTML。这是因为 JS 代码的执行过程可能会修改当前的 DOM 树，所以 DOM 树的生成必须暂停。这就是 JS 会阻塞 HTML 解析的根本原因。\n\n第一步完成后，会得到 DOM 树和 CSSOM 树，浏览器的默认样式、内部样式、外部样式、行内样式均会包含在 CSSOM 树中。\n\n-------\n\n#### 渲染的下一步是**样式计算**。\n\n![image](/img/20230711022430.png)\n\n主线程会遍历得到的 DOM 树，依次为树中的每个节点计算出它最终的样式，称之为 Computed Style。\n\n在这一过程中，很多预设值会变成绝对值，比如`red`会变成`rgb(255,0,0)`；相对单位会变成绝对单位，比如`em`会变成`px`\n\n这一步完成后，会得到一棵带有样式的 DOM 树。\n\n--------\n\n#### 接下来是**布局**，布局完成后会得到布局树。\n\n![image](/img/20230711022532.png)\n\n布局阶段会依次遍历 DOM 树的每一个节点，计算每个节点的几何信息。例如节点的宽高、相对包含块的位置。\n\n大部分时候，DOM 树和布局树并非一一对应。\n\n![image](/img/20230711022631.png)\n\n比如`display:none`的节点没有几何信息，因此不会生成到布局树；又比如使用了伪元素选择器，虽然 DOM 树中不存在这些伪元素节点，但它们拥有几何信息，所以会生成到布局树中。还有匿名行盒、匿名块盒等等都会导致 DOM 树和布局树无法一一对应。\n\n![image](/img/20230711022723.png)\n\n-----------\n\n#### 下一步是**分层**\n\n![image](/img/20230711022759.png)\n\n主线程会使用一套复杂的策略对整个布局树中进行分层。\n\n分层的好处在于，将来某一个层改变后，仅会对该层进行后续处理，从而提升效率。\n\n滚动条、堆叠上下文、transform、opacity 等样式都会或多或少的影响分层结果，也可以通过`will-change`属性更大程度的影响分层结果。\n\n---------\n\n#### 再下一步是**绘制**\n\n![image](/img/20230711022913.png)\n\n主线程会为每个层单独产生绘制指令集，用于描述这一层的内容该如何画出来。\n\n------\n#### 再来是**分块**\n\n![image](/img/20230711023058.png)\n\n完成绘制后，主线程将每个图层的绘制信息提交给合成线程，剩余工作将由合成线程完成。\n\n合成线程首先对每个图层进行分块，将其划分为更多的小区域。\n\n它会从线程池中拿取多个线程来完成分块工作。\n\n![image](/img/20230711023204.png)\n\n----\n\n#### 分块完成后，进入**光栅化**阶段。\n\n![image](/img/20230711023306.png)\n\n合成线程会将块信息交给 GPU 进程，以极高的速度完成光栅化。\n\nGPU 进程会开启多个线程来完成光栅化，并且优先处理靠近视口区域的块。\n\n光栅化的结果，就是一块一块的位图\n\n![image](/img/20230711023306.png)\n\n---------\n\n#### 最后一个阶段就是**画**了\n\n![image](/img/20230711023453.png)\n\n合成线程拿到每个层、每个块的位图后，生成一个个「指引（quad）」信息。\n\n指引会标识出每个位图应该画到屏幕的哪个位置，以及会考虑到旋转、缩放等变形。\n\n变形发生在合成线程，与渲染主线程无关，这就是`transform`效率高的本质原因。\n\n合成线程会把 quad 提交给 GPU 进程，由 GPU 进程产生系统调用，提交给 GPU 硬件，完成最终的屏幕成像。\n\n\n#### **完整流程**\n\n![image](/img/20230711023600.png)\n\n### 什么是 reflow？\n\nreflow 的本质就是重新计算 layout 树。\n\n当进行了会影响布局树的操作后，需要重新计算布局树，会引发 layout。\n\n为了避免连续的多次操作导致布局树反复计算，浏览器会合并这些操作，当 JS 代码全部完成后再进行统一计算。所以，改动属性造成的 reflow 是异步完成的。\n\n也同样因为如此，当 JS 获取布局属性时，就可能造成无法获取到最新的布局信息。\n\n浏览器在反复权衡下，最终决定获取属性立即 reflow。\n\n### 什么是 repaint？\n\nrepaint 的本质就是重新根据分层信息计算了绘制指令。\n\n当改动了可见样式后，就需要重新计算，会引发 repaint。\n\n由于元素的布局信息也属于可见样式，所以 reflow 一定会引起 repaint。\n\n### 为什么 transform 的效率高？\n\n因为 transform 既不会影响布局也不会影响绘制指令，它影响的只是渲染流程的最后一个「draw」阶段\n\n由于 draw 阶段在合成线程中，所以 transform 的变化几乎不会影响渲染主线程。反之，渲染主线程无论如何忙碌，也不会影响 transform 的变化。\n\n##  CSS 之包含块\n\n>**上文说到布局树的几何计算会算出css包含块，以下是css包含块的详细解释**\n\n一说到 CSS 盒模型，这是很多小伙伴耳熟能详的知识，甚至有的小伙伴还能说出 border-box 和 content-box 这两种盒模型的区别。\n\n但是一说到 CSS 包含块，有的小伙伴就懵圈了，什么是包含块？好像从来没有听说过这玩意儿。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142005.png\" alt=\"image-20220814222004395\" style=\"zoom: 20%;\" />\n\n好吧，如果你对包含块的知识一无所知，那么系好安全带，咱们准备出发了。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n包含块英语全称为**containing block**，实际上平时你在书写 CSS 时，大多数情况下你是感受不到它的存在，因此你不知道这个知识点也是一件很正常的事情。但是这玩意儿是确确实实存在的，在 CSS 规范中也是明确书写了的：\n\n*https://drafts.csswg.org/css2/#containing-block-details*\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142459.png\" alt=\"image-20220814222458695\" style=\"zoom:50%;\" />\n\n并且，如果你不了解它的运作机制，有时就会出现一些你认为的莫名其妙的现象。\n\n那么，这个包含块究竟说了什么内容呢？\n\n说起来也简单，**就是元素的尺寸和位置，会受它的包含块所影响。对于一些属性，例如 width, height, padding, margin，绝对定位元素的偏移值（比如 position 被设置为 absolute 或 fixed），当我们对其赋予百分比值时，这些值的计算值，就是通过元素的包含块计算得来。**\n\n来吧，少年，让我们从最简单的 case 开始看。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143153.png\" alt=\"image-20220814223152726\" style=\"zoom: 50%;\" />\n\n```html\n<body>\n  <div class=\"container\">\n    <div class=\"item\"></div>\n  </div>\n</body>\n```\n\n```css\n.container{\n  width: 500px;\n  height: 300px;\n  background-color: skyblue;\n}\n.item{\n  width: 50%;\n  height: 50%;\n  background-color: red;\n}\n```\n\n请仔细阅读上面的代码，然后你认为 div.item 这个盒子的宽高是多少？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143451.png\" alt=\"image-20220814223451349\" style=\"zoom: 33%;\" />\n\n相信你能够很自信的回答这个简单的问题，div.item 盒子的 width 为 250px，height 为 150px。\n\n这个答案确实是没有问题的，但是如果我追问你是怎么得到这个答案的，我猜不了解包含块的你大概率会说，因为它的父元素 div.container 的 width 为 500px，50% 就是 250px，height 为 300px，因此 50% 就是 150px。\n\n这个答案实际上是不准确的。正确的答案应该是，**div.item 的宽高是根据它的包含块来计算的**，而这里包含块的大小，正是这个元素最近的祖先块元素的内容区。\n\n因此正如我前面所说，**很多时候你都感受不到包含块的存在。**\n\n\n\n包含块分为两种，一种是根元素（HTML 元素）所在的包含块，被称之为初始包含块（**initial containing block**）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。\n\n\n\n另外一种是对于非根元素，对于非根元素的包含块判定就有几种不同的情况了。大致可以分为如下几种：\n\n- 如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的块容器（block container）的内容区域（content area）的边缘建立。\n- 如果 position 属性是 fixed，那么包含块由视口建立。\n- 如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。\n\n前面两条实际上都还比较好理解，第三条往往是初学者容易比较忽视的，我们来看一个示例：\n\n```html\n<body>\n    <div class=\"container\">\n      <div class=\"item\">\n        <div class=\"item2\"></div>\n      </div>\n    </div>\n  </body>\n```\n\n```css\n.container {\n  width: 500px;\n  height: 300px;\n  background-color: skyblue;\n  position: relative;\n}\n.item {\n  width: 300px;\n  height: 150px;\n  border: 5px solid;\n  margin-left: 100px;\n}\n.item2 {\n  width: 100px;\n  height: 100px;\n  background-color: red;\n  position: absolute;\n  left: 10px;\n  top: 10px;\n}\n```\n\n首先阅读上面的代码，然后你能在脑海里面想出其大致的样子么？或者用笔和纸画一下也行。\n\n公布正确答案：\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-153548.png\" alt=\"image-20220814233548188\" style=\"zoom: 33%;\" />\n\n怎么样？有没有和你所想象的对上？\n\n其实原因也非常简单，根据上面的第三条规则，对于 div.item2 来讲，它的包含块应该是 div.container，而非 div.item。\n\n如果你能把上面非根元素的包含块判定规则掌握，那么关于包含块的知识你就已经掌握 80% 了。\n\n实际上对于非根元素来讲，包含块还有一种可能，那就是如果 position 属性是 absolute 或 fixed，包含块也可能是由满足以下条件的最近父级元素的内边距区的边缘组成的：\n\n- transform 或 perspective 的值不是 none\n-  will-change 的值是 transform 或 perspective \n- filter 的值不是 none 或 will-change 的值是 filter(只在 Firefox 下生效). \n- contain 的值是 paint (例如: contain: paint;)\n\n我们还是来看一个示例：\n\n```html\n<body>\n  <div class=\"container\">\n    <div class=\"item\">\n      <div class=\"item2\"></div>\n    </div>\n  </div>\n</body>\n```\n\n```css\n.container {\n  width: 500px;\n  height: 300px;\n  background-color: skyblue;\n  position: relative;\n}\n.item {\n  width: 300px;\n  height: 150px;\n  border: 5px solid;\n  margin-left: 100px;\n  transform: rotate(0deg); /* 新增代码 */\n}\n.item2 {\n  width: 100px;\n  height: 100px;\n  background-color: red;\n  position: absolute;\n  left: 10px;\n  top: 10px;\n}\n```\n\n我们对于上面的代码只新增了一条声明，那就是 transform: rotate(0deg)，此时的渲染效果却发生了改变，如下图所示：\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154347.png\" alt=\"image-20220814234347149\" style=\"zoom:33%;\" />\n\n可以看到，此时对于 div.item2 来讲，包含块就变成了 div.item。\n\n好了，到这里，关于包含块的知识就基本讲完了。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n我们再把 CSS 规范中所举的例子来看一下。\n\n```html\n<html>\n  <head>\n    <title>Illustration of containing blocks</title>\n  </head>\n  <body id=\"body\">\n    <div id=\"div1\">\n      <p id=\"p1\">This is text in the first paragraph...</p>\n      <p id=\"p2\">\n        This is text\n        <em id=\"em1\">\n          in the\n          <strong id=\"strong1\">second</strong>\n          paragraph.\n        </em>\n      </p>\n    </div>\n  </body>\n</html>\n```\n\n上面是一段简单的 HTML 代码，在没有添加任何 CSS 代码的情况下，你能说出各自的包含块么？\n\n对应的结果如下：\n\n| 元素    | 包含块                      |\n| ------- | --------------------------- |\n| html    | initial C.B. (UA-dependent) |\n| body    | html                        |\n| div1    | body                        |\n| p1      | div1                        |\n| p2      | div1                        |\n| em1     | p2                          |\n| strong1 | p2                          |\n\n首先 HTML 作为根元素，对应的包含块就是前面我们所说的初始包含块，而对于 body 而言，这是一个 static 定位的元素，因此该元素的包含块参照第一条为 html，以此类推 div1、p1、p2 以及 em1 的包含块也都是它们的父元素。\n\n不过 strong1 比较例外，它的包含块确实 p2，而非 em1。为什么会这样？建议你再把非根元素的第一条规则读一下：\n\n- 如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的**块容器（block container）**的内容区域（content area）的边缘建立。\n\n没错，因为 em1 不是块容器，而包含块是**离它最近的块容器**的内容区域，所以是 p2。\n\n接下来添加如下的 CSS：\n\n```css\n#div1 { \n  position: absolute; \n  left: 50px; top: 50px \n}\n```\n\n上面的代码我们对 div1 进行了定位，那么此时的包含块会发生变化么？你可以先在自己思考一下。\n\n答案如下：\n\n| 元素    | 包含块                      |\n| ------- | --------------------------- |\n| html    | initial C.B. (UA-dependent) |\n| body    | html                        |\n| div1    | initial C.B. (UA-dependent) |\n| p1      | div1                        |\n| p2      | div1                        |\n| em1     | p2                          |\n| strong1 | p2                          |\n\n可以看到，这里 div1 的包含块就发生了变化，变为了初始包含块。这里你可以参考前文中的这两句话：\n\n- 初始包含块（**initial containing block**）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。\n- 如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。\n\n是不是一下子就理解了。没错，因为我们对 div1 进行了定位，因此它会应用非根元素包含块计算规则的第三条规则，寻找离它最近的  position 的值不是 static 的祖先元素，不过显然 body 的定位方式为 static，因此 div1 的包含块最终就变成了初始包含块。\n\n接下来我们继续修改我们的 CSS：\n\n```css\n#div1 { \n  position: absolute; \n  left: 50px; \n  top: 50px \n}\n#em1  { \n  position: absolute; \n  left: 100px; \n  top: 100px \n}\n```\n\n这里我们对 em1 同样进行了 absolute 绝对定位，你想一想会有什么样的变化？\n\n没错，聪明的你大概应该知道，em1 的包含块不再是 p2，而变成了 div1，而 strong1 的包含块也不再是 p2 了，而是变成了 em1。\n\n如下表所示：\n\n| 元素    | 包含块                                                       |\n| ------- | ------------------------------------------------------------ |\n| html    | initial C.B. (UA-dependent)                                  |\n| body    | html                                                         |\n| div1    | initial C.B. (UA-dependent)                                  |\n| p1      | div1                                                         |\n| p2      | div1                                                         |\n| em1     | div1（因为定位了，参阅非根元素包含块确定规则的第三条）       |\n| strong1 | em1（因为 em1 变为了块容器，参阅非根元素包含块确定规则的第一条） |\n\n好了，这就是 CSS 规范中所举的例子。如果你全都能看明白，以后你还能跟别人说你是看过这一块知识对应的 CSS 规范的人。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-013519.png\" alt=\"image-20220815093518833\" style=\"zoom:33%;\" />\n\n另外，关于包含块的知识，在 MDN 上除了解说了什么是包含块以外，也举出了很多简单易懂的示例。\n\n具体你可以移步到：*https://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block*\n\n\n\n好了，这就是有关包含块的所有内容了，你学会了么？-）\n\n---\n\n-*EOF*-\n\n\n## CSS 属性计算过程\n\n你是否了解 CSS 的属性计算过程呢？\n\n有的同学可能会讲，CSS属性我倒是知道，例如：\n\n```css\np{\n  color : red;\n}\n```\n\n上面的 CSS 代码中，p 是元素选择器，color 就是其中的一个 CSS 属性。\n\n但是要说 CSS 属性的计算过程，还真的不是很清楚。\n\n没关系，通过此篇文章，能够让你彻底明白什么是 CSS 属性的计算流程。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n首先，不知道你有没有考虑过这样的一个问题，假设在 HTML 中有这么一段代码：\n\n```html\n<body>\n  <h1>这是一个h1标题</h1>\n</body>\n```\n\n上面的代码也非常简单，就是在 body 中有一个 h1 标题而已，该 h1 标题呈现出来的外观是如下：\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060724.png\" alt=\"image-20220813140724136\" style=\"zoom:50%;\" />\n\n目前我们没有设置该 h1 的任何样式，但是却能看到该 h1 有一定的默认样式，例如有默认的字体大小、默认的颜色。\n\n那么问题来了，我们这个 h1 元素上面除了有默认字体大小、默认颜色等属性以外，究竟还有哪些属性呢？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014216.png\" alt=\"image-20220815094215982\" style=\"zoom:30%;\" />\n\n答案是**该元素上面会有 CSS 所有的属性。**你可以打开浏览器的开发者面板，选择【元素】，切换到【计算样式】，之后勾选【全部显示】，此时你就能看到在此 h1 上面所有 CSS 属性对应的值。\n\n![image-20220813141516153](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-061516.png)\n\n换句话说，**我们所书写的任何一个 HTML 元素，实际上都有完整的一整套 CSS 样式**。这一点往往是让初学者比较意外的，因为我们平时在书写 CSS 样式时，往往只会书写必要的部分，例如前面的：\n\n```css\np{\n  color : red;\n}\n```\n\n这往往会给我们造成一种错觉，认为该 p 元素上面就只有 color 属性。而真实的情况确是，任何一个 HTML 元素，都有一套完整的 CSS 样式，只不过你没有书写的样式，**大概率可能**会使用其默认值。例如上图中 h1 一个样式都没有设置，全部都用的默认值。\n\n但是注意，我这里强调的是“大概率可能”，难道还有我们“没有设置值，但是不使用默认值”的情况么？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014459.png\" alt=\"image-20220815094458940\" style=\"zoom:25%;\" />\n\n嗯，确实有的，所以我才强调你要了解“CSS 属性的计算过程”。\n\n总的来讲，属性值的计算过程，分为如下这么 *4* 个步骤：\n\n- 确定声明值\n- 层叠冲突\n- 使用继承\n- 使用默认值\n\n\n\n### 确定声明值\n\n首先第一步，是确定声明值。所谓声明值就是作者自己所书写的 CSS 样式，例如前面的：\n\n```css\np{\n  color : red;\n}\n```\n\n这里我们声明了 p 元素为红色，那么就会应用此属性设置。\n\n当然，除了作者样式表，一般浏览器还会存在“用户代理样式表”，简单来讲就是浏览器内置了一套样式表。\n\n![image-20220813143500066](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-063500.png)\n\n在上面的示例中，作者样式表中设置了 color 属性，而用户代理样式表（浏览器提供的样式表）中设置了诸如 display、margin-block-start、margin-block-end、margin-inline-start、margin-inline-end 等属性对应的值。\n\n这些值目前来讲也没有什么冲突，因此最终就会应用这些属性值。\n\n\n\n### 层叠冲突\n\n在确定声明值时，可能出现一种情况，那就是声明的样式规则发生了冲突。\n\n此时会进入解决层叠冲突的流程。而这一步又可以细分为下面这三个步骤：\n\n- 比较源的重要性\n- 比较优先级\n- 比较次序\n\n来来来，我们一步一步来看。\n\n\n\n#### 比较源的重要性\n\n当不同的 CSS 样式来源拥有相同的声明时，此时就会根据样式表来源的重要性来确定应用哪一条样式规则。\n\n那么问题来了，咱们的样式表的源究竟有几种呢？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-100047.png\" alt=\"image-20220823180047075\" style=\"zoom:40%;\" />\n\n整体来讲有三种来源：\n\n- 浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式统称**用户代理样式**。\n- 网页的作者可以定义文档的样式，这是最常见的样式表，称之为**页面作者样式**。\n- 浏览器的用户，可以使用自定义样式表定制使用体验，称之为**用户样式**。\n\n对应的重要性顺序依次为：页面作者样式 > 用户样式 > 用户代理样式\n\n更详细的来源重要性比较，可以参阅 *MDN*：*https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade*\n\n\n\n我们来看一个示例。\n\n例如现在有**页面作者样式表**和**用户代理样式表**中存在属性的冲突，那么会以作者样式表优先。\n\n```css\np{\n  color : red;\n  display: inline-block;\n}\n```\n\n![image-20220813144222152](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-064222.png)\n\n可以明显的看到，作者样式表和用户代理样式表中同时存在的 display 属性的设置，最终作者样式表干掉了用户代理样式表中冲突的属性。这就是第一步，根据不同源的重要性来决定应用哪一个源的样式。\n\n\n\n#### 比较优先级\n\n那么接下来，如果是在在同一个源中有样式声明冲突怎么办呢？此时就会进行样式声明的优先级比较。\n\n例如：\n\n```html\n<div class=\"test\">\n  <h1>test</h1>\n</div>\n```\n\n```css\n.test h1{\n  font-size: 50px;\n}\n\nh1 {\n  font-size: 20px;\n}\n```\n\n在上面的代码中，同属于**页面作者样式**，源的重要性是相同的，此时会以选择器的权重来比较重要性。\n\n很明显，上面的选择器的权重要大于下面的选择器，因此最终标题呈现为 *50px*。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2021-09-16-071546.png\" alt=\"image-20210916151546500\" style=\"zoom: 40%;\" />\n\n可以看到，落败的作者样式在 *Elements>Styles* 中会被划掉。\n\n有关选择器权重的计算方式，不清楚的同学，可以进入此传送门：*https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity*\n\n\n\n#### 比较次序\n\n经历了上面两个步骤，大多数的样式声明能够被确定下来。但是还剩下最后一种情况，那就是样式声明既是同源，权重也相同。\n\n此时就会进入第三个步骤，比较样式声明的次序。\n\n举个例子：\n\n```css\nh1 {\n  font-size: 50px;\n}\n\nh1 {\n  font-size: 20px;\n}\n```\n\n在上面的代码中，同样都是**页面作者样式**，**选择器的权重也相同**，此时位于下面的样式声明会层叠掉上面的那一条样式声明，最终会应用 *20px* 这一条属性值。\n\n![image-20220823183928330](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-103928.png)\n\n\n\n至此，样式声明中存在冲突的所有情况，就全部被解决了。\n\n\n\n### 使用继承\n\n层叠冲突这一步完成后，解决了相同元素被声明了多条样式规则究竟应用哪一条样式规则的问题。\n\n那么如果没有声明的属性呢？此时就使用默认值么？\n\n*No、No、No*，别急，此时还有第三个步骤，那就是使用继承而来的值。\n\n例如：\n\n```html\n<div>\n  <p>Lorem ipsum dolor sit amet.</p>\n</div>\n```\n\n```css\ndiv {\n  color: red;\n}\n```\n\n在上面的代码中，我们针对 div 设置了 color 属性值为红色，而针对 p 元素我们没有声明任何的属性，但是由于 color 是可以继承的，因此 p 元素从最近的 div 身上继承到了 color 属性的值。\n\n![image-20220813145102293](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065102.png)\n\n这里有两个点需要同学们注意一下。\n\n首先第一个是我强调了是**最近的** div 元素，看下面的例子：\n\n```html\n<div class=\"test\">\n  <div>\n    <p>Lorem ipsum dolor sit amet.</p>\n  </div>\n</div>\n```\n\n```css\ndiv {\n  color: red;\n}\n.test{\n  color: blue;\n}\n```\n\n![image-20220813145652726](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065653.png)\n\n因为这里并不涉及到选中 p 元素声明 color 值，而是从父元素上面继承到 color 对应的值，因此这里是**谁近就听谁**的，初学者往往会产生混淆，又去比较权重，但是这里根本不会涉及到权重比较，因为压根儿就没有选中到 p 元素。\n\n\n\n第二个就是哪些属性能够继承？\n\n关于这一点的话，大家可以在 MDN 上面很轻松的查阅到。例如我们以 text-align 为例，如下图所示：\n\n![image-20220813150147885](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070148.png)\n\n\n\n\n\n### 使用默认值\n\n好了，目前走到这一步，如果属性值都还不能确定下来，那么就只能是使用默认值了。\n\n如下图所示：\n\n![image-20220813150824752](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070825.png)\n\n前面我们也说过，一个 HTML 元素要在浏览器中渲染出来，必须具备所有的 CSS 属性值，但是绝大部分我们是不会去设置的，用户代理样式表里面也不会去设置，也无法从继承拿到，因此最终都是用默认值。\n\n好了，这就是关于 CSS 属性计算过程的所有知识了。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n\n\n### 一道面试题\n\n好了，学习了今天的内容，让我来用一道面试题测试测试大家的理解程度。\n\n下面的代码，最终渲染出来的效果，a 元素是什么颜色？p 元素又是什么颜色？\n\n```html\n<div>\n  <a href=\"\">test</a>\n  <p>test</p>\n</div>\n```\n\n```css\ndiv {\n  color: red;\n}\n```\n\n大家能说出为什么会呈现这样的结果么？\n\n解答如下：\n\n![image-20220813151941113](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-071941.png)\n\n实际上原因很简单，因为 a 元素在用户代理样式表中已经设置了 color 属性对应的值，因此会应用此声明值。而在 p 元素中无论是作者样式表还是用户代理样式表，都没有对此属性进行声明，然而由于 color 属性是可以继承的，因此最终 p 元素的 color 属性值通过继承来自于父元素。\n\n\n\n你答对了么？-）\n\n---\n\n-*EOF*-\n\n\n\n","source":"_posts/前端.md","raw":"---\ntitle: 前端+\ndate: 2023-07-07 18:31:49\ntags: 前端\n---\n## 事件循环\n\n### 浏览器的进程模型\n\n#### 何为进程？\n\n程序运行需要有它自己专属的内存空间，可以把这块内存空间简单的理解为进程\n\n<img src=\"http://mdrs.yuanjin.tech/img/202208092057573.png\" alt=\"image-20220809205743532\" style=\"zoom:50%;\" />\n\n每个应用至少有一个进程，进程之间相互独立，即使要通信，也需要双方同意。\n\n#### 何为线程？\n\n有了进程后，就可以运行程序的代码了。\n\n运行代码的「人」称之为「线程」。\n\n一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，该线程称之为主线程。*当主线程结束时，进程也相应结束*\n\n如果程序需要同时执行多块代码，主线程就会启动更多的线程来执行代码，所以一个进程中可以包含多个线程。\n\n![image-20220809210859457](http://mdrs.yuanjin.tech/img/202208092108499.png)\n\n#### 浏览器有哪些进程和线程？\n\n**浏览器是一个多进程多线程的应用程序**\n\n浏览器内部工作极其复杂。\n\n为了避免相互影响，为了减少连环崩溃的几率，当启动浏览器后，它会自动启动多个进程。\n\n![image-20220809213152371](http://mdrs.yuanjin.tech/img/202208092131410.png)\n\n> 可以在浏览器的任务管理器中查看当前的所有进程\n\n其中，最主要的进程有：\n\n1. 浏览器进程\n\n   主要负责界面显示、用户交互、子进程管理等。浏览器进程内部会启动多个线程处理不同的任务。\n\n2. 网络进程\n\n   负责加载网络资源。网络进程内部会启动多个线程来处理不同的网络任务。\n\n3. **渲染进程**（本节课重点讲解的进程）\n\n   渲染进程启动后，会开启一个**渲染主线程**，主线程负责执行 HTML、CSS、JS 代码。\n\n   默认情况下，浏览器会为每个标签页开启一个新的渲染进程，以保证不同的标签页之间不相互影响。\n\n   > 将来该默认模式可能会有所改变，有兴趣的同学可参见[chrome官方说明文档](https://chromium.googlesource.com/chromium/src/+/main/docs/process_model_and_site_isolation.md#Modes-and-Availability)\n\n### 渲染主线程是如何工作的？\n\n渲染主线程是浏览器中最繁忙的线程，需要它处理的任务包括但不限于：\n\n- 解析 HTML\n- 解析 CSS\n- 计算样式\n- 布局\n- 处理图层\n- 每秒把页面画 60 次\n- 执行全局 JS 代码\n- 执行事件处理函数\n- 执行计时器的回调函数\n- ......\n\n> 思考题：为什么渲染进程不适用多个线程来处理这些事情？\n\n要处理这么多的任务，主线程遇到了一个前所未有的难题：如何调度任务？\n\n比如：\n\n- 我正在执行一个 JS 函数，执行到一半的时候用户点击了按钮，我该立即去执行点击事件的处理函数吗？\n- 我正在执行一个 JS 函数，执行到一半的时候某个计时器到达了时间，我该立即去执行它的回调吗？\n- 浏览器进程通知我“用户点击了按钮”，与此同时，某个计时器也到达了时间，我应该处理哪一个呢？\n- ......\n\n渲染主线程想出了一个绝妙的主意来处理这个问题：排队\n\n![image-20220809223027806](http://mdrs.yuanjin.tech/img/202208092230847.png)\n\n1. 在最开始的时候，渲染主线程会进入一个无限循环\n2. 每一次循环会检查消息队列中是否有任务存在。如果有，就取出第一个任务执行，执行完一个后进入下一次循环；如果没有，则进入休眠状态。\n3. 其他所有线程（包括其他进程的线程）可以随时向消息队列添加任务。新任务会加到消息队列的末尾。在添加新任务时，如果主线程是休眠状态，则会将其唤醒以继续循环拿取任务\n\n这样一来，就可以让每个任务有条不紊的、持续的进行下去了。\n\n**整个过程，被称之为事件循环（消息循环）**\n\n### 若干解释\n\n#### 何为异步？\n\n代码在执行过程中，会遇到一些无法立即处理的任务，比如：\n\n- 计时完成后需要执行的任务 —— `setTimeout`、`setInterval`\n- 网络通信完成后需要执行的任务 -- `XHR`、`Fetch`\n- 用户操作后需要执行的任务 -- `addEventListener`\n\n如果让渲染主线程等待这些任务的时机达到，就会导致主线程长期处于「阻塞」的状态，从而导致浏览器「卡死」\n\n![image-20220810104344296](http://mdrs.yuanjin.tech/img/202208101043348.png)\n\n**渲染主线程承担着极其重要的工作，无论如何都不能阻塞！**\n\n因此，浏览器选择**异步**来解决这个问题\n\n![image-20220810104858857](http://mdrs.yuanjin.tech/img/202208101048899.png)\n\n使用异步的方式，**渲染主线程永不阻塞**\n\n> 面试题：如何理解 JS 的异步？\n>\n> \n>\n> 参考答案：\n>\n> JS是一门单线程的语言，这是因为它运行在浏览器的渲染主线程中，而渲染主线程只有一个。\n>\n> 而渲染主线程承担着诸多的工作，渲染页面、执行 JS 都在其中运行。\n>\n> 如果使用同步的方式，就极有可能导致主线程产生阻塞，从而导致消息队列中的很多其他任务无法得到执行。这样一来，一方面会导致繁忙的主线程白白的消耗时间，另一方面导致页面无法及时更新，给用户造成卡死现象。\n>\n> 所以浏览器采用异步的方式来避免。具体做法是当某些任务发生时，比如计时器、网络、事件监听，主线程将任务交给其他线程去处理，自身立即结束任务的执行，转而执行后续代码。当其他线程完成时，将事先传递的回调函数包装成任务，加入到消息队列的末尾排队，等待主线程调度执行。\n>\n> 在这种异步模式下，浏览器永不阻塞，从而最大限度的保证了单线程的流畅运行。\n\n#### JS为何会阻碍渲染？\n\n先看代码\n\n```html\n<h1>Mr.Yuan is awesome!</h1>\n<button>change</button>\n<script>\n  var h1 = document.querySelector('h1');\n  var btn = document.querySelector('button');\n\n  // 死循环指定的时间\n  function delay(duration) {\n    var start = Date.now();\n    while (Date.now() - start < duration) {}\n  }\n\n  btn.onclick = function () {\n    h1.textContent = '陈广文很帅！';\n    delay(3000);\n  };\n</script>\n```\n\n点击按钮后，会发生什么呢？\n\n<见具体演示>\n\n#### 任务有优先级吗？\n\n任务没有优先级，在消息队列中先进先出\n\n但**消息队列是有优先级的**\n\n根据 W3C 的最新解释:\n\n- 每个任务都有一个任务类型，同一个类型的任务必须在一个队列，不同类型的任务可以分属于不同的队列。\n  在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务执行。\n- 浏览器必须准备好一个微队列，微队列中的任务优先所有其他任务执行\n  https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint\n\n> 随着浏览器的复杂度急剧提升，W3C 不再使用宏队列的说法\n\n在目前 chrome 的实现中，至少包含了下面的队列：\n\n- 延时队列：用于存放计时器到达后的回调任务，优先级「中」\n- 交互队列：用于存放用户操作后产生的事件处理任务，优先级「高」\n- 微队列：用户存放需要最快执行的任务，优先级「最高」\n\n> 添加任务到微队列的主要方式主要是使用 Promise、MutationObserver\n>\n> \n>\n> 例如：\n>\n> ```js\n> // 立即把一个函数添加到微队列\n> Promise.resolve().then(函数)\n> ```\n\n> 浏览器还有很多其他的队列，由于和我们开发关系不大，不作考虑\n\n> 面试题：阐述一下 JS 的事件循环\n>\n> \n>\n> 参考答案：\n>\n> 事件循环又叫做消息循环，是浏览器渲染主线程的工作方式。\n>\n> 在 Chrome 的源码中，它开启一个不会结束的 for 循环，每次循环从消息队列中取出第一个任务执行，而其他线程只需要在合适的时候将任务加入到队列末尾即可。\n>\n> 过去把消息队列简单分为宏队列和微队列，这种说法目前已无法满足复杂的浏览器环境，取而代之的是一种更加灵活多变的处理方式。\n>\n> 根据 W3C 官方的解释，每个任务有不同的类型，同类型的任务必须在同一个队列，不同的任务可以属于不同的队列。不同任务队列有不同的优先级，在一次事件循环中，由浏览器自行决定取哪一个队列的任务。但浏览器必须有一个微队列，微队列的任务一定具有最高的优先级，必须优先调度执行。\n\n> 面试题：JS 中的计时器能做到精确计时吗？为什么？\n>\n> \n>\n> 参考答案：\n>\n> 不行，因为：\n>\n> 1. 计算机硬件没有原子钟，无法做到精确计时\n> 2. 操作系统的计时函数本身就有少量偏差，由于 JS 的计时器最终调用的是操作系统的函数，也就携带了这些偏差\n> 3. 按照 W3C 的标准，浏览器实现计时器时，如果嵌套层级超过 5 层，则会带有 4 毫秒的最少时间，这样在计时时间少于 4 毫秒时又带来了偏差\n> 4. 受事件循环的影响，计时器的回调函数只能在主线程空闲时运行，因此又带来了偏差\n\n\n## 浏览器渲染过程\n\n### 浏览器是如何渲染页面的？\n\n当浏览器的网络线程收到 HTML 文档后，会产生一个渲染任务，并将其传递给渲染主线程的消息队列。\n\n在事件循环机制的作用下，渲染主线程取出消息队列中的渲染任务，开启渲染流程。\n\n![image](/img/20230711021718.png)\n\n-------\n\n整个渲染流程分为多个阶段，分别是： HTML 解析、样式计算、布局、分层、绘制、分块、光栅化、画\n\n每个阶段都有明确的输入输出，上一个阶段的输出会成为下一个阶段的输入。\n\n这样，整个渲染流程就形成了一套组织严密的生产流水线。\n\n![image](/img/20230711021839.png)\n\n-------\n\n#### 渲染的第一步是**解析 HTML**。\n\n![image](/img/20230711022045.png)\n\n解析过程中遇到 CSS 解析 CSS，遇到 JS 执行 JS。为了提高解析效率，浏览器在开始解析前，会启动一个预解析的线程，率先下载 HTML 中的外部 CSS 文件和 外部的 JS 文件。\n\n![image](/imhg/20230711022147.png)\n\ncss与js是完全不同的\n\n![image](/img/20230711022309.png)\n\n如果主线程解析到`link`位置，此时外部的 CSS 文件还没有下载解析好，主线程不会等待，继续解析后续的 HTML。这是因为下载和解析 CSS 的工作是在预解析线程中进行的。这就是 CSS 不会阻塞 HTML 解析的根本原因。\n\n如果主线程解析到`script`位置，会停止解析 HTML，转而等待 JS 文件下载好，并将全局代码解析执行完成后，才能继续解析 HTML。这是因为 JS 代码的执行过程可能会修改当前的 DOM 树，所以 DOM 树的生成必须暂停。这就是 JS 会阻塞 HTML 解析的根本原因。\n\n第一步完成后，会得到 DOM 树和 CSSOM 树，浏览器的默认样式、内部样式、外部样式、行内样式均会包含在 CSSOM 树中。\n\n-------\n\n#### 渲染的下一步是**样式计算**。\n\n![image](/img/20230711022430.png)\n\n主线程会遍历得到的 DOM 树，依次为树中的每个节点计算出它最终的样式，称之为 Computed Style。\n\n在这一过程中，很多预设值会变成绝对值，比如`red`会变成`rgb(255,0,0)`；相对单位会变成绝对单位，比如`em`会变成`px`\n\n这一步完成后，会得到一棵带有样式的 DOM 树。\n\n--------\n\n#### 接下来是**布局**，布局完成后会得到布局树。\n\n![image](/img/20230711022532.png)\n\n布局阶段会依次遍历 DOM 树的每一个节点，计算每个节点的几何信息。例如节点的宽高、相对包含块的位置。\n\n大部分时候，DOM 树和布局树并非一一对应。\n\n![image](/img/20230711022631.png)\n\n比如`display:none`的节点没有几何信息，因此不会生成到布局树；又比如使用了伪元素选择器，虽然 DOM 树中不存在这些伪元素节点，但它们拥有几何信息，所以会生成到布局树中。还有匿名行盒、匿名块盒等等都会导致 DOM 树和布局树无法一一对应。\n\n![image](/img/20230711022723.png)\n\n-----------\n\n#### 下一步是**分层**\n\n![image](/img/20230711022759.png)\n\n主线程会使用一套复杂的策略对整个布局树中进行分层。\n\n分层的好处在于，将来某一个层改变后，仅会对该层进行后续处理，从而提升效率。\n\n滚动条、堆叠上下文、transform、opacity 等样式都会或多或少的影响分层结果，也可以通过`will-change`属性更大程度的影响分层结果。\n\n---------\n\n#### 再下一步是**绘制**\n\n![image](/img/20230711022913.png)\n\n主线程会为每个层单独产生绘制指令集，用于描述这一层的内容该如何画出来。\n\n------\n#### 再来是**分块**\n\n![image](/img/20230711023058.png)\n\n完成绘制后，主线程将每个图层的绘制信息提交给合成线程，剩余工作将由合成线程完成。\n\n合成线程首先对每个图层进行分块，将其划分为更多的小区域。\n\n它会从线程池中拿取多个线程来完成分块工作。\n\n![image](/img/20230711023204.png)\n\n----\n\n#### 分块完成后，进入**光栅化**阶段。\n\n![image](/img/20230711023306.png)\n\n合成线程会将块信息交给 GPU 进程，以极高的速度完成光栅化。\n\nGPU 进程会开启多个线程来完成光栅化，并且优先处理靠近视口区域的块。\n\n光栅化的结果，就是一块一块的位图\n\n![image](/img/20230711023306.png)\n\n---------\n\n#### 最后一个阶段就是**画**了\n\n![image](/img/20230711023453.png)\n\n合成线程拿到每个层、每个块的位图后，生成一个个「指引（quad）」信息。\n\n指引会标识出每个位图应该画到屏幕的哪个位置，以及会考虑到旋转、缩放等变形。\n\n变形发生在合成线程，与渲染主线程无关，这就是`transform`效率高的本质原因。\n\n合成线程会把 quad 提交给 GPU 进程，由 GPU 进程产生系统调用，提交给 GPU 硬件，完成最终的屏幕成像。\n\n\n#### **完整流程**\n\n![image](/img/20230711023600.png)\n\n### 什么是 reflow？\n\nreflow 的本质就是重新计算 layout 树。\n\n当进行了会影响布局树的操作后，需要重新计算布局树，会引发 layout。\n\n为了避免连续的多次操作导致布局树反复计算，浏览器会合并这些操作，当 JS 代码全部完成后再进行统一计算。所以，改动属性造成的 reflow 是异步完成的。\n\n也同样因为如此，当 JS 获取布局属性时，就可能造成无法获取到最新的布局信息。\n\n浏览器在反复权衡下，最终决定获取属性立即 reflow。\n\n### 什么是 repaint？\n\nrepaint 的本质就是重新根据分层信息计算了绘制指令。\n\n当改动了可见样式后，就需要重新计算，会引发 repaint。\n\n由于元素的布局信息也属于可见样式，所以 reflow 一定会引起 repaint。\n\n### 为什么 transform 的效率高？\n\n因为 transform 既不会影响布局也不会影响绘制指令，它影响的只是渲染流程的最后一个「draw」阶段\n\n由于 draw 阶段在合成线程中，所以 transform 的变化几乎不会影响渲染主线程。反之，渲染主线程无论如何忙碌，也不会影响 transform 的变化。\n\n##  CSS 之包含块\n\n>**上文说到布局树的几何计算会算出css包含块，以下是css包含块的详细解释**\n\n一说到 CSS 盒模型，这是很多小伙伴耳熟能详的知识，甚至有的小伙伴还能说出 border-box 和 content-box 这两种盒模型的区别。\n\n但是一说到 CSS 包含块，有的小伙伴就懵圈了，什么是包含块？好像从来没有听说过这玩意儿。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142005.png\" alt=\"image-20220814222004395\" style=\"zoom: 20%;\" />\n\n好吧，如果你对包含块的知识一无所知，那么系好安全带，咱们准备出发了。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n包含块英语全称为**containing block**，实际上平时你在书写 CSS 时，大多数情况下你是感受不到它的存在，因此你不知道这个知识点也是一件很正常的事情。但是这玩意儿是确确实实存在的，在 CSS 规范中也是明确书写了的：\n\n*https://drafts.csswg.org/css2/#containing-block-details*\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142459.png\" alt=\"image-20220814222458695\" style=\"zoom:50%;\" />\n\n并且，如果你不了解它的运作机制，有时就会出现一些你认为的莫名其妙的现象。\n\n那么，这个包含块究竟说了什么内容呢？\n\n说起来也简单，**就是元素的尺寸和位置，会受它的包含块所影响。对于一些属性，例如 width, height, padding, margin，绝对定位元素的偏移值（比如 position 被设置为 absolute 或 fixed），当我们对其赋予百分比值时，这些值的计算值，就是通过元素的包含块计算得来。**\n\n来吧，少年，让我们从最简单的 case 开始看。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143153.png\" alt=\"image-20220814223152726\" style=\"zoom: 50%;\" />\n\n```html\n<body>\n  <div class=\"container\">\n    <div class=\"item\"></div>\n  </div>\n</body>\n```\n\n```css\n.container{\n  width: 500px;\n  height: 300px;\n  background-color: skyblue;\n}\n.item{\n  width: 50%;\n  height: 50%;\n  background-color: red;\n}\n```\n\n请仔细阅读上面的代码，然后你认为 div.item 这个盒子的宽高是多少？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143451.png\" alt=\"image-20220814223451349\" style=\"zoom: 33%;\" />\n\n相信你能够很自信的回答这个简单的问题，div.item 盒子的 width 为 250px，height 为 150px。\n\n这个答案确实是没有问题的，但是如果我追问你是怎么得到这个答案的，我猜不了解包含块的你大概率会说，因为它的父元素 div.container 的 width 为 500px，50% 就是 250px，height 为 300px，因此 50% 就是 150px。\n\n这个答案实际上是不准确的。正确的答案应该是，**div.item 的宽高是根据它的包含块来计算的**，而这里包含块的大小，正是这个元素最近的祖先块元素的内容区。\n\n因此正如我前面所说，**很多时候你都感受不到包含块的存在。**\n\n\n\n包含块分为两种，一种是根元素（HTML 元素）所在的包含块，被称之为初始包含块（**initial containing block**）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。\n\n\n\n另外一种是对于非根元素，对于非根元素的包含块判定就有几种不同的情况了。大致可以分为如下几种：\n\n- 如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的块容器（block container）的内容区域（content area）的边缘建立。\n- 如果 position 属性是 fixed，那么包含块由视口建立。\n- 如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。\n\n前面两条实际上都还比较好理解，第三条往往是初学者容易比较忽视的，我们来看一个示例：\n\n```html\n<body>\n    <div class=\"container\">\n      <div class=\"item\">\n        <div class=\"item2\"></div>\n      </div>\n    </div>\n  </body>\n```\n\n```css\n.container {\n  width: 500px;\n  height: 300px;\n  background-color: skyblue;\n  position: relative;\n}\n.item {\n  width: 300px;\n  height: 150px;\n  border: 5px solid;\n  margin-left: 100px;\n}\n.item2 {\n  width: 100px;\n  height: 100px;\n  background-color: red;\n  position: absolute;\n  left: 10px;\n  top: 10px;\n}\n```\n\n首先阅读上面的代码，然后你能在脑海里面想出其大致的样子么？或者用笔和纸画一下也行。\n\n公布正确答案：\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-153548.png\" alt=\"image-20220814233548188\" style=\"zoom: 33%;\" />\n\n怎么样？有没有和你所想象的对上？\n\n其实原因也非常简单，根据上面的第三条规则，对于 div.item2 来讲，它的包含块应该是 div.container，而非 div.item。\n\n如果你能把上面非根元素的包含块判定规则掌握，那么关于包含块的知识你就已经掌握 80% 了。\n\n实际上对于非根元素来讲，包含块还有一种可能，那就是如果 position 属性是 absolute 或 fixed，包含块也可能是由满足以下条件的最近父级元素的内边距区的边缘组成的：\n\n- transform 或 perspective 的值不是 none\n-  will-change 的值是 transform 或 perspective \n- filter 的值不是 none 或 will-change 的值是 filter(只在 Firefox 下生效). \n- contain 的值是 paint (例如: contain: paint;)\n\n我们还是来看一个示例：\n\n```html\n<body>\n  <div class=\"container\">\n    <div class=\"item\">\n      <div class=\"item2\"></div>\n    </div>\n  </div>\n</body>\n```\n\n```css\n.container {\n  width: 500px;\n  height: 300px;\n  background-color: skyblue;\n  position: relative;\n}\n.item {\n  width: 300px;\n  height: 150px;\n  border: 5px solid;\n  margin-left: 100px;\n  transform: rotate(0deg); /* 新增代码 */\n}\n.item2 {\n  width: 100px;\n  height: 100px;\n  background-color: red;\n  position: absolute;\n  left: 10px;\n  top: 10px;\n}\n```\n\n我们对于上面的代码只新增了一条声明，那就是 transform: rotate(0deg)，此时的渲染效果却发生了改变，如下图所示：\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154347.png\" alt=\"image-20220814234347149\" style=\"zoom:33%;\" />\n\n可以看到，此时对于 div.item2 来讲，包含块就变成了 div.item。\n\n好了，到这里，关于包含块的知识就基本讲完了。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n我们再把 CSS 规范中所举的例子来看一下。\n\n```html\n<html>\n  <head>\n    <title>Illustration of containing blocks</title>\n  </head>\n  <body id=\"body\">\n    <div id=\"div1\">\n      <p id=\"p1\">This is text in the first paragraph...</p>\n      <p id=\"p2\">\n        This is text\n        <em id=\"em1\">\n          in the\n          <strong id=\"strong1\">second</strong>\n          paragraph.\n        </em>\n      </p>\n    </div>\n  </body>\n</html>\n```\n\n上面是一段简单的 HTML 代码，在没有添加任何 CSS 代码的情况下，你能说出各自的包含块么？\n\n对应的结果如下：\n\n| 元素    | 包含块                      |\n| ------- | --------------------------- |\n| html    | initial C.B. (UA-dependent) |\n| body    | html                        |\n| div1    | body                        |\n| p1      | div1                        |\n| p2      | div1                        |\n| em1     | p2                          |\n| strong1 | p2                          |\n\n首先 HTML 作为根元素，对应的包含块就是前面我们所说的初始包含块，而对于 body 而言，这是一个 static 定位的元素，因此该元素的包含块参照第一条为 html，以此类推 div1、p1、p2 以及 em1 的包含块也都是它们的父元素。\n\n不过 strong1 比较例外，它的包含块确实 p2，而非 em1。为什么会这样？建议你再把非根元素的第一条规则读一下：\n\n- 如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的**块容器（block container）**的内容区域（content area）的边缘建立。\n\n没错，因为 em1 不是块容器，而包含块是**离它最近的块容器**的内容区域，所以是 p2。\n\n接下来添加如下的 CSS：\n\n```css\n#div1 { \n  position: absolute; \n  left: 50px; top: 50px \n}\n```\n\n上面的代码我们对 div1 进行了定位，那么此时的包含块会发生变化么？你可以先在自己思考一下。\n\n答案如下：\n\n| 元素    | 包含块                      |\n| ------- | --------------------------- |\n| html    | initial C.B. (UA-dependent) |\n| body    | html                        |\n| div1    | initial C.B. (UA-dependent) |\n| p1      | div1                        |\n| p2      | div1                        |\n| em1     | p2                          |\n| strong1 | p2                          |\n\n可以看到，这里 div1 的包含块就发生了变化，变为了初始包含块。这里你可以参考前文中的这两句话：\n\n- 初始包含块（**initial containing block**）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。\n- 如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。\n\n是不是一下子就理解了。没错，因为我们对 div1 进行了定位，因此它会应用非根元素包含块计算规则的第三条规则，寻找离它最近的  position 的值不是 static 的祖先元素，不过显然 body 的定位方式为 static，因此 div1 的包含块最终就变成了初始包含块。\n\n接下来我们继续修改我们的 CSS：\n\n```css\n#div1 { \n  position: absolute; \n  left: 50px; \n  top: 50px \n}\n#em1  { \n  position: absolute; \n  left: 100px; \n  top: 100px \n}\n```\n\n这里我们对 em1 同样进行了 absolute 绝对定位，你想一想会有什么样的变化？\n\n没错，聪明的你大概应该知道，em1 的包含块不再是 p2，而变成了 div1，而 strong1 的包含块也不再是 p2 了，而是变成了 em1。\n\n如下表所示：\n\n| 元素    | 包含块                                                       |\n| ------- | ------------------------------------------------------------ |\n| html    | initial C.B. (UA-dependent)                                  |\n| body    | html                                                         |\n| div1    | initial C.B. (UA-dependent)                                  |\n| p1      | div1                                                         |\n| p2      | div1                                                         |\n| em1     | div1（因为定位了，参阅非根元素包含块确定规则的第三条）       |\n| strong1 | em1（因为 em1 变为了块容器，参阅非根元素包含块确定规则的第一条） |\n\n好了，这就是 CSS 规范中所举的例子。如果你全都能看明白，以后你还能跟别人说你是看过这一块知识对应的 CSS 规范的人。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-013519.png\" alt=\"image-20220815093518833\" style=\"zoom:33%;\" />\n\n另外，关于包含块的知识，在 MDN 上除了解说了什么是包含块以外，也举出了很多简单易懂的示例。\n\n具体你可以移步到：*https://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block*\n\n\n\n好了，这就是有关包含块的所有内容了，你学会了么？-）\n\n---\n\n-*EOF*-\n\n\n## CSS 属性计算过程\n\n你是否了解 CSS 的属性计算过程呢？\n\n有的同学可能会讲，CSS属性我倒是知道，例如：\n\n```css\np{\n  color : red;\n}\n```\n\n上面的 CSS 代码中，p 是元素选择器，color 就是其中的一个 CSS 属性。\n\n但是要说 CSS 属性的计算过程，还真的不是很清楚。\n\n没关系，通过此篇文章，能够让你彻底明白什么是 CSS 属性的计算流程。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n首先，不知道你有没有考虑过这样的一个问题，假设在 HTML 中有这么一段代码：\n\n```html\n<body>\n  <h1>这是一个h1标题</h1>\n</body>\n```\n\n上面的代码也非常简单，就是在 body 中有一个 h1 标题而已，该 h1 标题呈现出来的外观是如下：\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060724.png\" alt=\"image-20220813140724136\" style=\"zoom:50%;\" />\n\n目前我们没有设置该 h1 的任何样式，但是却能看到该 h1 有一定的默认样式，例如有默认的字体大小、默认的颜色。\n\n那么问题来了，我们这个 h1 元素上面除了有默认字体大小、默认颜色等属性以外，究竟还有哪些属性呢？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014216.png\" alt=\"image-20220815094215982\" style=\"zoom:30%;\" />\n\n答案是**该元素上面会有 CSS 所有的属性。**你可以打开浏览器的开发者面板，选择【元素】，切换到【计算样式】，之后勾选【全部显示】，此时你就能看到在此 h1 上面所有 CSS 属性对应的值。\n\n![image-20220813141516153](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-061516.png)\n\n换句话说，**我们所书写的任何一个 HTML 元素，实际上都有完整的一整套 CSS 样式**。这一点往往是让初学者比较意外的，因为我们平时在书写 CSS 样式时，往往只会书写必要的部分，例如前面的：\n\n```css\np{\n  color : red;\n}\n```\n\n这往往会给我们造成一种错觉，认为该 p 元素上面就只有 color 属性。而真实的情况确是，任何一个 HTML 元素，都有一套完整的 CSS 样式，只不过你没有书写的样式，**大概率可能**会使用其默认值。例如上图中 h1 一个样式都没有设置，全部都用的默认值。\n\n但是注意，我这里强调的是“大概率可能”，难道还有我们“没有设置值，但是不使用默认值”的情况么？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014459.png\" alt=\"image-20220815094458940\" style=\"zoom:25%;\" />\n\n嗯，确实有的，所以我才强调你要了解“CSS 属性的计算过程”。\n\n总的来讲，属性值的计算过程，分为如下这么 *4* 个步骤：\n\n- 确定声明值\n- 层叠冲突\n- 使用继承\n- 使用默认值\n\n\n\n### 确定声明值\n\n首先第一步，是确定声明值。所谓声明值就是作者自己所书写的 CSS 样式，例如前面的：\n\n```css\np{\n  color : red;\n}\n```\n\n这里我们声明了 p 元素为红色，那么就会应用此属性设置。\n\n当然，除了作者样式表，一般浏览器还会存在“用户代理样式表”，简单来讲就是浏览器内置了一套样式表。\n\n![image-20220813143500066](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-063500.png)\n\n在上面的示例中，作者样式表中设置了 color 属性，而用户代理样式表（浏览器提供的样式表）中设置了诸如 display、margin-block-start、margin-block-end、margin-inline-start、margin-inline-end 等属性对应的值。\n\n这些值目前来讲也没有什么冲突，因此最终就会应用这些属性值。\n\n\n\n### 层叠冲突\n\n在确定声明值时，可能出现一种情况，那就是声明的样式规则发生了冲突。\n\n此时会进入解决层叠冲突的流程。而这一步又可以细分为下面这三个步骤：\n\n- 比较源的重要性\n- 比较优先级\n- 比较次序\n\n来来来，我们一步一步来看。\n\n\n\n#### 比较源的重要性\n\n当不同的 CSS 样式来源拥有相同的声明时，此时就会根据样式表来源的重要性来确定应用哪一条样式规则。\n\n那么问题来了，咱们的样式表的源究竟有几种呢？\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-100047.png\" alt=\"image-20220823180047075\" style=\"zoom:40%;\" />\n\n整体来讲有三种来源：\n\n- 浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式统称**用户代理样式**。\n- 网页的作者可以定义文档的样式，这是最常见的样式表，称之为**页面作者样式**。\n- 浏览器的用户，可以使用自定义样式表定制使用体验，称之为**用户样式**。\n\n对应的重要性顺序依次为：页面作者样式 > 用户样式 > 用户代理样式\n\n更详细的来源重要性比较，可以参阅 *MDN*：*https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade*\n\n\n\n我们来看一个示例。\n\n例如现在有**页面作者样式表**和**用户代理样式表**中存在属性的冲突，那么会以作者样式表优先。\n\n```css\np{\n  color : red;\n  display: inline-block;\n}\n```\n\n![image-20220813144222152](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-064222.png)\n\n可以明显的看到，作者样式表和用户代理样式表中同时存在的 display 属性的设置，最终作者样式表干掉了用户代理样式表中冲突的属性。这就是第一步，根据不同源的重要性来决定应用哪一个源的样式。\n\n\n\n#### 比较优先级\n\n那么接下来，如果是在在同一个源中有样式声明冲突怎么办呢？此时就会进行样式声明的优先级比较。\n\n例如：\n\n```html\n<div class=\"test\">\n  <h1>test</h1>\n</div>\n```\n\n```css\n.test h1{\n  font-size: 50px;\n}\n\nh1 {\n  font-size: 20px;\n}\n```\n\n在上面的代码中，同属于**页面作者样式**，源的重要性是相同的，此时会以选择器的权重来比较重要性。\n\n很明显，上面的选择器的权重要大于下面的选择器，因此最终标题呈现为 *50px*。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2021-09-16-071546.png\" alt=\"image-20210916151546500\" style=\"zoom: 40%;\" />\n\n可以看到，落败的作者样式在 *Elements>Styles* 中会被划掉。\n\n有关选择器权重的计算方式，不清楚的同学，可以进入此传送门：*https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity*\n\n\n\n#### 比较次序\n\n经历了上面两个步骤，大多数的样式声明能够被确定下来。但是还剩下最后一种情况，那就是样式声明既是同源，权重也相同。\n\n此时就会进入第三个步骤，比较样式声明的次序。\n\n举个例子：\n\n```css\nh1 {\n  font-size: 50px;\n}\n\nh1 {\n  font-size: 20px;\n}\n```\n\n在上面的代码中，同样都是**页面作者样式**，**选择器的权重也相同**，此时位于下面的样式声明会层叠掉上面的那一条样式声明，最终会应用 *20px* 这一条属性值。\n\n![image-20220823183928330](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-103928.png)\n\n\n\n至此，样式声明中存在冲突的所有情况，就全部被解决了。\n\n\n\n### 使用继承\n\n层叠冲突这一步完成后，解决了相同元素被声明了多条样式规则究竟应用哪一条样式规则的问题。\n\n那么如果没有声明的属性呢？此时就使用默认值么？\n\n*No、No、No*，别急，此时还有第三个步骤，那就是使用继承而来的值。\n\n例如：\n\n```html\n<div>\n  <p>Lorem ipsum dolor sit amet.</p>\n</div>\n```\n\n```css\ndiv {\n  color: red;\n}\n```\n\n在上面的代码中，我们针对 div 设置了 color 属性值为红色，而针对 p 元素我们没有声明任何的属性，但是由于 color 是可以继承的，因此 p 元素从最近的 div 身上继承到了 color 属性的值。\n\n![image-20220813145102293](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065102.png)\n\n这里有两个点需要同学们注意一下。\n\n首先第一个是我强调了是**最近的** div 元素，看下面的例子：\n\n```html\n<div class=\"test\">\n  <div>\n    <p>Lorem ipsum dolor sit amet.</p>\n  </div>\n</div>\n```\n\n```css\ndiv {\n  color: red;\n}\n.test{\n  color: blue;\n}\n```\n\n![image-20220813145652726](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065653.png)\n\n因为这里并不涉及到选中 p 元素声明 color 值，而是从父元素上面继承到 color 对应的值，因此这里是**谁近就听谁**的，初学者往往会产生混淆，又去比较权重，但是这里根本不会涉及到权重比较，因为压根儿就没有选中到 p 元素。\n\n\n\n第二个就是哪些属性能够继承？\n\n关于这一点的话，大家可以在 MDN 上面很轻松的查阅到。例如我们以 text-align 为例，如下图所示：\n\n![image-20220813150147885](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070148.png)\n\n\n\n\n\n### 使用默认值\n\n好了，目前走到这一步，如果属性值都还不能确定下来，那么就只能是使用默认值了。\n\n如下图所示：\n\n![image-20220813150824752](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070825.png)\n\n前面我们也说过，一个 HTML 元素要在浏览器中渲染出来，必须具备所有的 CSS 属性值，但是绝大部分我们是不会去设置的，用户代理样式表里面也不会去设置，也无法从继承拿到，因此最终都是用默认值。\n\n好了，这就是关于 CSS 属性计算过程的所有知识了。\n\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n\n\n### 一道面试题\n\n好了，学习了今天的内容，让我来用一道面试题测试测试大家的理解程度。\n\n下面的代码，最终渲染出来的效果，a 元素是什么颜色？p 元素又是什么颜色？\n\n```html\n<div>\n  <a href=\"\">test</a>\n  <p>test</p>\n</div>\n```\n\n```css\ndiv {\n  color: red;\n}\n```\n\n大家能说出为什么会呈现这样的结果么？\n\n解答如下：\n\n![image-20220813151941113](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-071941.png)\n\n实际上原因很简单，因为 a 元素在用户代理样式表中已经设置了 color 属性对应的值，因此会应用此声明值。而在 p 元素中无论是作者样式表还是用户代理样式表，都没有对此属性进行声明，然而由于 color 属性是可以继承的，因此最终 p 元素的 color 属性值通过继承来自于父元素。\n\n\n\n你答对了么？-）\n\n---\n\n-*EOF*-\n\n\n\n","slug":"前端","published":1,"updated":"2024-01-21T12:47:06.446Z","comments":1,"layout":"post","photos":[],"_id":"cls214yql000lzcjv8y8tbznk","content":"<h2 id=\"事件循环\"><a href=\"#事件循环\" class=\"headerlink\" title=\"事件循环\"></a>事件循环</h2><h3 id=\"浏览器的进程模型\"><a href=\"#浏览器的进程模型\" class=\"headerlink\" title=\"浏览器的进程模型\"></a>浏览器的进程模型</h3><h4 id=\"何为进程？\"><a href=\"#何为进程？\" class=\"headerlink\" title=\"何为进程？\"></a>何为进程？</h4><p>程序运行需要有它自己专属的内存空间，可以把这块内存空间简单的理解为进程</p>\n<img src=\"http://mdrs.yuanjin.tech/img/202208092057573.png\" class=\"lazyload\" data-srcset=\"http://mdrs.yuanjin.tech/img/202208092057573.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220809205743532\" style=\"zoom:50%;\" />\n\n<p>每个应用至少有一个进程，进程之间相互独立，即使要通信，也需要双方同意。</p>\n<h4 id=\"何为线程？\"><a href=\"#何为线程？\" class=\"headerlink\" title=\"何为线程？\"></a>何为线程？</h4><p>有了进程后，就可以运行程序的代码了。</p>\n<p>运行代码的「人」称之为「线程」。</p>\n<p>一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，该线程称之为主线程。<em>当主线程结束时，进程也相应结束</em></p>\n<p>如果程序需要同时执行多块代码，主线程就会启动更多的线程来执行代码，所以一个进程中可以包含多个线程。</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208092108499.png\" class=\"lazyload\" data-srcset=\"http://mdrs.yuanjin.tech/img/202208092108499.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220809210859457\"></p>\n<h4 id=\"浏览器有哪些进程和线程？\"><a href=\"#浏览器有哪些进程和线程？\" class=\"headerlink\" title=\"浏览器有哪些进程和线程？\"></a>浏览器有哪些进程和线程？</h4><p><strong>浏览器是一个多进程多线程的应用程序</strong></p>\n<p>浏览器内部工作极其复杂。</p>\n<p>为了避免相互影响，为了减少连环崩溃的几率，当启动浏览器后，它会自动启动多个进程。</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208092131410.png\" class=\"lazyload\" data-srcset=\"http://mdrs.yuanjin.tech/img/202208092131410.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220809213152371\"></p>\n<blockquote>\n<p>可以在浏览器的任务管理器中查看当前的所有进程</p>\n</blockquote>\n<p>其中，最主要的进程有：</p>\n<ol>\n<li><p>浏览器进程</p>\n<p>主要负责界面显示、用户交互、子进程管理等。浏览器进程内部会启动多个线程处理不同的任务。</p>\n</li>\n<li><p>网络进程</p>\n<p>负责加载网络资源。网络进程内部会启动多个线程来处理不同的网络任务。</p>\n</li>\n<li><p><strong>渲染进程</strong>（本节课重点讲解的进程）</p>\n<p>渲染进程启动后，会开启一个<strong>渲染主线程</strong>，主线程负责执行 HTML、CSS、JS 代码。</p>\n<p>默认情况下，浏览器会为每个标签页开启一个新的渲染进程，以保证不同的标签页之间不相互影响。</p>\n<blockquote>\n<p>将来该默认模式可能会有所改变，有兴趣的同学可参见<a href=\"https://chromium.googlesource.com/chromium/src/+/main/docs/process_model_and_site_isolation.md#Modes-and-Availability\">chrome官方说明文档</a></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"渲染主线程是如何工作的？\"><a href=\"#渲染主线程是如何工作的？\" class=\"headerlink\" title=\"渲染主线程是如何工作的？\"></a>渲染主线程是如何工作的？</h3><p>渲染主线程是浏览器中最繁忙的线程，需要它处理的任务包括但不限于：</p>\n<ul>\n<li>解析 HTML</li>\n<li>解析 CSS</li>\n<li>计算样式</li>\n<li>布局</li>\n<li>处理图层</li>\n<li>每秒把页面画 60 次</li>\n<li>执行全局 JS 代码</li>\n<li>执行事件处理函数</li>\n<li>执行计时器的回调函数</li>\n<li>……</li>\n</ul>\n<blockquote>\n<p>思考题：为什么渲染进程不适用多个线程来处理这些事情？</p>\n</blockquote>\n<p>要处理这么多的任务，主线程遇到了一个前所未有的难题：如何调度任务？</p>\n<p>比如：</p>\n<ul>\n<li>我正在执行一个 JS 函数，执行到一半的时候用户点击了按钮，我该立即去执行点击事件的处理函数吗？</li>\n<li>我正在执行一个 JS 函数，执行到一半的时候某个计时器到达了时间，我该立即去执行它的回调吗？</li>\n<li>浏览器进程通知我“用户点击了按钮”，与此同时，某个计时器也到达了时间，我应该处理哪一个呢？</li>\n<li>……</li>\n</ul>\n<p>渲染主线程想出了一个绝妙的主意来处理这个问题：排队</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208092230847.png\" class=\"lazyload\" data-srcset=\"http://mdrs.yuanjin.tech/img/202208092230847.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220809223027806\"></p>\n<ol>\n<li>在最开始的时候，渲染主线程会进入一个无限循环</li>\n<li>每一次循环会检查消息队列中是否有任务存在。如果有，就取出第一个任务执行，执行完一个后进入下一次循环；如果没有，则进入休眠状态。</li>\n<li>其他所有线程（包括其他进程的线程）可以随时向消息队列添加任务。新任务会加到消息队列的末尾。在添加新任务时，如果主线程是休眠状态，则会将其唤醒以继续循环拿取任务</li>\n</ol>\n<p>这样一来，就可以让每个任务有条不紊的、持续的进行下去了。</p>\n<p><strong>整个过程，被称之为事件循环（消息循环）</strong></p>\n<h3 id=\"若干解释\"><a href=\"#若干解释\" class=\"headerlink\" title=\"若干解释\"></a>若干解释</h3><h4 id=\"何为异步？\"><a href=\"#何为异步？\" class=\"headerlink\" title=\"何为异步？\"></a>何为异步？</h4><p>代码在执行过程中，会遇到一些无法立即处理的任务，比如：</p>\n<ul>\n<li>计时完成后需要执行的任务 —— <code>setTimeout</code>、<code>setInterval</code></li>\n<li>网络通信完成后需要执行的任务 – <code>XHR</code>、<code>Fetch</code></li>\n<li>用户操作后需要执行的任务 – <code>addEventListener</code></li>\n</ul>\n<p>如果让渲染主线程等待这些任务的时机达到，就会导致主线程长期处于「阻塞」的状态，从而导致浏览器「卡死」</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208101043348.png\" class=\"lazyload\" data-srcset=\"http://mdrs.yuanjin.tech/img/202208101043348.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220810104344296\"></p>\n<p><strong>渲染主线程承担着极其重要的工作，无论如何都不能阻塞！</strong></p>\n<p>因此，浏览器选择<strong>异步</strong>来解决这个问题</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208101048899.png\" class=\"lazyload\" data-srcset=\"http://mdrs.yuanjin.tech/img/202208101048899.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220810104858857\"></p>\n<p>使用异步的方式，<strong>渲染主线程永不阻塞</strong></p>\n<blockquote>\n<p>面试题：如何理解 JS 的异步？</p>\n<p>参考答案：</p>\n<p>JS是一门单线程的语言，这是因为它运行在浏览器的渲染主线程中，而渲染主线程只有一个。</p>\n<p>而渲染主线程承担着诸多的工作，渲染页面、执行 JS 都在其中运行。</p>\n<p>如果使用同步的方式，就极有可能导致主线程产生阻塞，从而导致消息队列中的很多其他任务无法得到执行。这样一来，一方面会导致繁忙的主线程白白的消耗时间，另一方面导致页面无法及时更新，给用户造成卡死现象。</p>\n<p>所以浏览器采用异步的方式来避免。具体做法是当某些任务发生时，比如计时器、网络、事件监听，主线程将任务交给其他线程去处理，自身立即结束任务的执行，转而执行后续代码。当其他线程完成时，将事先传递的回调函数包装成任务，加入到消息队列的末尾排队，等待主线程调度执行。</p>\n<p>在这种异步模式下，浏览器永不阻塞，从而最大限度的保证了单线程的流畅运行。</p>\n</blockquote>\n<h4 id=\"JS为何会阻碍渲染？\"><a href=\"#JS为何会阻碍渲染？\" class=\"headerlink\" title=\"JS为何会阻碍渲染？\"></a>JS为何会阻碍渲染？</h4><p>先看代码</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Mr.Yuan is awesome!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>change<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">var</span> h1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;h1&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">var</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 死循环指定的时间</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">delay</span>(<span class=\"params\">duration</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> start = <span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">while</span> (<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>() - start &lt; duration) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  btn.<span class=\"property\">onclick</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    h1.<span class=\"property\">textContent</span> = <span class=\"string\">&#x27;陈广文很帅！&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">delay</span>(<span class=\"number\">3000</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>点击按钮后，会发生什么呢？</p>\n<p>&lt;见具体演示&gt;</p>\n<h4 id=\"任务有优先级吗？\"><a href=\"#任务有优先级吗？\" class=\"headerlink\" title=\"任务有优先级吗？\"></a>任务有优先级吗？</h4><p>任务没有优先级，在消息队列中先进先出</p>\n<p>但<strong>消息队列是有优先级的</strong></p>\n<p>根据 W3C 的最新解释:</p>\n<ul>\n<li>每个任务都有一个任务类型，同一个类型的任务必须在一个队列，不同类型的任务可以分属于不同的队列。<br>在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务执行。</li>\n<li>浏览器必须准备好一个微队列，微队列中的任务优先所有其他任务执行<br><a href=\"https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint\">https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint</a></li>\n</ul>\n<blockquote>\n<p>随着浏览器的复杂度急剧提升，W3C 不再使用宏队列的说法</p>\n</blockquote>\n<p>在目前 chrome 的实现中，至少包含了下面的队列：</p>\n<ul>\n<li>延时队列：用于存放计时器到达后的回调任务，优先级「中」</li>\n<li>交互队列：用于存放用户操作后产生的事件处理任务，优先级「高」</li>\n<li>微队列：用户存放需要最快执行的任务，优先级「最高」</li>\n</ul>\n<blockquote>\n<p>添加任务到微队列的主要方式主要是使用 Promise、MutationObserver</p>\n<p>例如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 立即把一个函数添加到微队列</span></span><br><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>().<span class=\"title function_\">then</span>(函数)</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>浏览器还有很多其他的队列，由于和我们开发关系不大，不作考虑</p>\n</blockquote>\n<blockquote>\n<p>面试题：阐述一下 JS 的事件循环</p>\n<p>参考答案：</p>\n<p>事件循环又叫做消息循环，是浏览器渲染主线程的工作方式。</p>\n<p>在 Chrome 的源码中，它开启一个不会结束的 for 循环，每次循环从消息队列中取出第一个任务执行，而其他线程只需要在合适的时候将任务加入到队列末尾即可。</p>\n<p>过去把消息队列简单分为宏队列和微队列，这种说法目前已无法满足复杂的浏览器环境，取而代之的是一种更加灵活多变的处理方式。</p>\n<p>根据 W3C 官方的解释，每个任务有不同的类型，同类型的任务必须在同一个队列，不同的任务可以属于不同的队列。不同任务队列有不同的优先级，在一次事件循环中，由浏览器自行决定取哪一个队列的任务。但浏览器必须有一个微队列，微队列的任务一定具有最高的优先级，必须优先调度执行。</p>\n</blockquote>\n<blockquote>\n<p>面试题：JS 中的计时器能做到精确计时吗？为什么？</p>\n<p>参考答案：</p>\n<p>不行，因为：</p>\n<ol>\n<li>计算机硬件没有原子钟，无法做到精确计时</li>\n<li>操作系统的计时函数本身就有少量偏差，由于 JS 的计时器最终调用的是操作系统的函数，也就携带了这些偏差</li>\n<li>按照 W3C 的标准，浏览器实现计时器时，如果嵌套层级超过 5 层，则会带有 4 毫秒的最少时间，这样在计时时间少于 4 毫秒时又带来了偏差</li>\n<li>受事件循环的影响，计时器的回调函数只能在主线程空闲时运行，因此又带来了偏差</li>\n</ol>\n</blockquote>\n<h2 id=\"浏览器渲染过程\"><a href=\"#浏览器渲染过程\" class=\"headerlink\" title=\"浏览器渲染过程\"></a>浏览器渲染过程</h2><h3 id=\"浏览器是如何渲染页面的？\"><a href=\"#浏览器是如何渲染页面的？\" class=\"headerlink\" title=\"浏览器是如何渲染页面的？\"></a>浏览器是如何渲染页面的？</h3><p>当浏览器的网络线程收到 HTML 文档后，会产生一个渲染任务，并将其传递给渲染主线程的消息队列。</p>\n<p>在事件循环机制的作用下，渲染主线程取出消息队列中的渲染任务，开启渲染流程。</p>\n<p><img src=\"/img/20230711021718.png\" class=\"lazyload\" data-srcset=\"/img/20230711021718.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<hr>\n<p>整个渲染流程分为多个阶段，分别是： HTML 解析、样式计算、布局、分层、绘制、分块、光栅化、画</p>\n<p>每个阶段都有明确的输入输出，上一个阶段的输出会成为下一个阶段的输入。</p>\n<p>这样，整个渲染流程就形成了一套组织严密的生产流水线。</p>\n<p><img src=\"/img/20230711021839.png\" class=\"lazyload\" data-srcset=\"/img/20230711021839.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<hr>\n<h4 id=\"渲染的第一步是解析-HTML。\"><a href=\"#渲染的第一步是解析-HTML。\" class=\"headerlink\" title=\"渲染的第一步是解析 HTML。\"></a>渲染的第一步是<strong>解析 HTML</strong>。</h4><p><img src=\"/img/20230711022045.png\" class=\"lazyload\" data-srcset=\"/img/20230711022045.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>解析过程中遇到 CSS 解析 CSS，遇到 JS 执行 JS。为了提高解析效率，浏览器在开始解析前，会启动一个预解析的线程，率先下载 HTML 中的外部 CSS 文件和 外部的 JS 文件。</p>\n<p><img src=\"/imhg/20230711022147.png\" class=\"lazyload\" data-srcset=\"/imhg/20230711022147.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>css与js是完全不同的</p>\n<p><img src=\"/img/20230711022309.png\" class=\"lazyload\" data-srcset=\"/img/20230711022309.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>如果主线程解析到<code>link</code>位置，此时外部的 CSS 文件还没有下载解析好，主线程不会等待，继续解析后续的 HTML。这是因为下载和解析 CSS 的工作是在预解析线程中进行的。这就是 CSS 不会阻塞 HTML 解析的根本原因。</p>\n<p>如果主线程解析到<code>script</code>位置，会停止解析 HTML，转而等待 JS 文件下载好，并将全局代码解析执行完成后，才能继续解析 HTML。这是因为 JS 代码的执行过程可能会修改当前的 DOM 树，所以 DOM 树的生成必须暂停。这就是 JS 会阻塞 HTML 解析的根本原因。</p>\n<p>第一步完成后，会得到 DOM 树和 CSSOM 树，浏览器的默认样式、内部样式、外部样式、行内样式均会包含在 CSSOM 树中。</p>\n<hr>\n<h4 id=\"渲染的下一步是样式计算。\"><a href=\"#渲染的下一步是样式计算。\" class=\"headerlink\" title=\"渲染的下一步是样式计算。\"></a>渲染的下一步是<strong>样式计算</strong>。</h4><p><img src=\"/img/20230711022430.png\" class=\"lazyload\" data-srcset=\"/img/20230711022430.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>主线程会遍历得到的 DOM 树，依次为树中的每个节点计算出它最终的样式，称之为 Computed Style。</p>\n<p>在这一过程中，很多预设值会变成绝对值，比如<code>red</code>会变成<code>rgb(255,0,0)</code>；相对单位会变成绝对单位，比如<code>em</code>会变成<code>px</code></p>\n<p>这一步完成后，会得到一棵带有样式的 DOM 树。</p>\n<hr>\n<h4 id=\"接下来是布局，布局完成后会得到布局树。\"><a href=\"#接下来是布局，布局完成后会得到布局树。\" class=\"headerlink\" title=\"接下来是布局，布局完成后会得到布局树。\"></a>接下来是<strong>布局</strong>，布局完成后会得到布局树。</h4><p><img src=\"/img/20230711022532.png\" class=\"lazyload\" data-srcset=\"/img/20230711022532.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>布局阶段会依次遍历 DOM 树的每一个节点，计算每个节点的几何信息。例如节点的宽高、相对包含块的位置。</p>\n<p>大部分时候，DOM 树和布局树并非一一对应。</p>\n<p><img src=\"/img/20230711022631.png\" class=\"lazyload\" data-srcset=\"/img/20230711022631.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>比如<code>display:none</code>的节点没有几何信息，因此不会生成到布局树；又比如使用了伪元素选择器，虽然 DOM 树中不存在这些伪元素节点，但它们拥有几何信息，所以会生成到布局树中。还有匿名行盒、匿名块盒等等都会导致 DOM 树和布局树无法一一对应。</p>\n<p><img src=\"/img/20230711022723.png\" class=\"lazyload\" data-srcset=\"/img/20230711022723.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<hr>\n<h4 id=\"下一步是分层\"><a href=\"#下一步是分层\" class=\"headerlink\" title=\"下一步是分层\"></a>下一步是<strong>分层</strong></h4><p><img src=\"/img/20230711022759.png\" class=\"lazyload\" data-srcset=\"/img/20230711022759.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>主线程会使用一套复杂的策略对整个布局树中进行分层。</p>\n<p>分层的好处在于，将来某一个层改变后，仅会对该层进行后续处理，从而提升效率。</p>\n<p>滚动条、堆叠上下文、transform、opacity 等样式都会或多或少的影响分层结果，也可以通过<code>will-change</code>属性更大程度的影响分层结果。</p>\n<hr>\n<h4 id=\"再下一步是绘制\"><a href=\"#再下一步是绘制\" class=\"headerlink\" title=\"再下一步是绘制\"></a>再下一步是<strong>绘制</strong></h4><p><img src=\"/img/20230711022913.png\" class=\"lazyload\" data-srcset=\"/img/20230711022913.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>主线程会为每个层单独产生绘制指令集，用于描述这一层的内容该如何画出来。</p>\n<hr>\n<h4 id=\"再来是分块\"><a href=\"#再来是分块\" class=\"headerlink\" title=\"再来是分块\"></a>再来是<strong>分块</strong></h4><p><img src=\"/img/20230711023058.png\" class=\"lazyload\" data-srcset=\"/img/20230711023058.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>完成绘制后，主线程将每个图层的绘制信息提交给合成线程，剩余工作将由合成线程完成。</p>\n<p>合成线程首先对每个图层进行分块，将其划分为更多的小区域。</p>\n<p>它会从线程池中拿取多个线程来完成分块工作。</p>\n<p><img src=\"/img/20230711023204.png\" class=\"lazyload\" data-srcset=\"/img/20230711023204.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<hr>\n<h4 id=\"分块完成后，进入光栅化阶段。\"><a href=\"#分块完成后，进入光栅化阶段。\" class=\"headerlink\" title=\"分块完成后，进入光栅化阶段。\"></a>分块完成后，进入<strong>光栅化</strong>阶段。</h4><p><img src=\"/img/20230711023306.png\" class=\"lazyload\" data-srcset=\"/img/20230711023306.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>合成线程会将块信息交给 GPU 进程，以极高的速度完成光栅化。</p>\n<p>GPU 进程会开启多个线程来完成光栅化，并且优先处理靠近视口区域的块。</p>\n<p>光栅化的结果，就是一块一块的位图</p>\n<p><img src=\"/img/20230711023306.png\" class=\"lazyload\" data-srcset=\"/img/20230711023306.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<hr>\n<h4 id=\"最后一个阶段就是画了\"><a href=\"#最后一个阶段就是画了\" class=\"headerlink\" title=\"最后一个阶段就是画了\"></a>最后一个阶段就是<strong>画</strong>了</h4><p><img src=\"/img/20230711023453.png\" class=\"lazyload\" data-srcset=\"/img/20230711023453.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>合成线程拿到每个层、每个块的位图后，生成一个个「指引（quad）」信息。</p>\n<p>指引会标识出每个位图应该画到屏幕的哪个位置，以及会考虑到旋转、缩放等变形。</p>\n<p>变形发生在合成线程，与渲染主线程无关，这就是<code>transform</code>效率高的本质原因。</p>\n<p>合成线程会把 quad 提交给 GPU 进程，由 GPU 进程产生系统调用，提交给 GPU 硬件，完成最终的屏幕成像。</p>\n<h4 id=\"完整流程\"><a href=\"#完整流程\" class=\"headerlink\" title=\"完整流程\"></a><strong>完整流程</strong></h4><p><img src=\"/img/20230711023600.png\" class=\"lazyload\" data-srcset=\"/img/20230711023600.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<h3 id=\"什么是-reflow？\"><a href=\"#什么是-reflow？\" class=\"headerlink\" title=\"什么是 reflow？\"></a>什么是 reflow？</h3><p>reflow 的本质就是重新计算 layout 树。</p>\n<p>当进行了会影响布局树的操作后，需要重新计算布局树，会引发 layout。</p>\n<p>为了避免连续的多次操作导致布局树反复计算，浏览器会合并这些操作，当 JS 代码全部完成后再进行统一计算。所以，改动属性造成的 reflow 是异步完成的。</p>\n<p>也同样因为如此，当 JS 获取布局属性时，就可能造成无法获取到最新的布局信息。</p>\n<p>浏览器在反复权衡下，最终决定获取属性立即 reflow。</p>\n<h3 id=\"什么是-repaint？\"><a href=\"#什么是-repaint？\" class=\"headerlink\" title=\"什么是 repaint？\"></a>什么是 repaint？</h3><p>repaint 的本质就是重新根据分层信息计算了绘制指令。</p>\n<p>当改动了可见样式后，就需要重新计算，会引发 repaint。</p>\n<p>由于元素的布局信息也属于可见样式，所以 reflow 一定会引起 repaint。</p>\n<h3 id=\"为什么-transform-的效率高？\"><a href=\"#为什么-transform-的效率高？\" class=\"headerlink\" title=\"为什么 transform 的效率高？\"></a>为什么 transform 的效率高？</h3><p>因为 transform 既不会影响布局也不会影响绘制指令，它影响的只是渲染流程的最后一个「draw」阶段</p>\n<p>由于 draw 阶段在合成线程中，所以 transform 的变化几乎不会影响渲染主线程。反之，渲染主线程无论如何忙碌，也不会影响 transform 的变化。</p>\n<h2 id=\"CSS-之包含块\"><a href=\"#CSS-之包含块\" class=\"headerlink\" title=\"CSS 之包含块\"></a>CSS 之包含块</h2><blockquote>\n<p><strong>上文说到布局树的几何计算会算出css包含块，以下是css包含块的详细解释</strong></p>\n</blockquote>\n<p>一说到 CSS 盒模型，这是很多小伙伴耳熟能详的知识，甚至有的小伙伴还能说出 border-box 和 content-box 这两种盒模型的区别。</p>\n<p>但是一说到 CSS 包含块，有的小伙伴就懵圈了，什么是包含块？好像从来没有听说过这玩意儿。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142005.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142005.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814222004395\" style=\"zoom: 20%;\" />\n\n<p>好吧，如果你对包含块的知识一无所知，那么系好安全带，咱们准备出发了。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n<p>包含块英语全称为<strong>containing block</strong>，实际上平时你在书写 CSS 时，大多数情况下你是感受不到它的存在，因此你不知道这个知识点也是一件很正常的事情。但是这玩意儿是确确实实存在的，在 CSS 规范中也是明确书写了的：</p>\n<p><em><a href=\"https://drafts.csswg.org/css2/#containing-block-details\">https://drafts.csswg.org/css2/#containing-block-details</a></em></p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142459.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142459.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814222458695\" style=\"zoom:50%;\" />\n\n<p>并且，如果你不了解它的运作机制，有时就会出现一些你认为的莫名其妙的现象。</p>\n<p>那么，这个包含块究竟说了什么内容呢？</p>\n<p>说起来也简单，<strong>就是元素的尺寸和位置，会受它的包含块所影响。对于一些属性，例如 width, height, padding, margin，绝对定位元素的偏移值（比如 position 被设置为 absolute 或 fixed），当我们对其赋予百分比值时，这些值的计算值，就是通过元素的包含块计算得来。</strong></p>\n<p>来吧，少年，让我们从最简单的 case 开始看。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143153.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143153.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814223152726\" style=\"zoom: 50%;\" />\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.container</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: skyblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>请仔细阅读上面的代码，然后你认为 div.item 这个盒子的宽高是多少？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143451.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143451.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814223451349\" style=\"zoom: 33%;\" />\n\n<p>相信你能够很自信的回答这个简单的问题，div.item 盒子的 width 为 250px，height 为 150px。</p>\n<p>这个答案确实是没有问题的，但是如果我追问你是怎么得到这个答案的，我猜不了解包含块的你大概率会说，因为它的父元素 div.container 的 width 为 500px，50% 就是 250px，height 为 300px，因此 50% 就是 150px。</p>\n<p>这个答案实际上是不准确的。正确的答案应该是，<strong>div.item 的宽高是根据它的包含块来计算的</strong>，而这里包含块的大小，正是这个元素最近的祖先块元素的内容区。</p>\n<p>因此正如我前面所说，<strong>很多时候你都感受不到包含块的存在。</strong></p>\n<p>包含块分为两种，一种是根元素（HTML 元素）所在的包含块，被称之为初始包含块（<strong>initial containing block</strong>）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。</p>\n<p>另外一种是对于非根元素，对于非根元素的包含块判定就有几种不同的情况了。大致可以分为如下几种：</p>\n<ul>\n<li>如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的块容器（block container）的内容区域（content area）的边缘建立。</li>\n<li>如果 position 属性是 fixed，那么包含块由视口建立。</li>\n<li>如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。</li>\n</ul>\n<p>前面两条实际上都还比较好理解，第三条往往是初学者容易比较忽视的，我们来看一个示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: skyblue;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>首先阅读上面的代码，然后你能在脑海里面想出其大致的样子么？或者用笔和纸画一下也行。</p>\n<p>公布正确答案：</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-153548.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-153548.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814233548188\" style=\"zoom: 33%;\" />\n\n<p>怎么样？有没有和你所想象的对上？</p>\n<p>其实原因也非常简单，根据上面的第三条规则，对于 div.item2 来讲，它的包含块应该是 div.container，而非 div.item。</p>\n<p>如果你能把上面非根元素的包含块判定规则掌握，那么关于包含块的知识你就已经掌握 80% 了。</p>\n<p>实际上对于非根元素来讲，包含块还有一种可能，那就是如果 position 属性是 absolute 或 fixed，包含块也可能是由满足以下条件的最近父级元素的内边距区的边缘组成的：</p>\n<ul>\n<li>transform 或 perspective 的值不是 none</li>\n<li>will-change 的值是 transform 或 perspective </li>\n<li>filter 的值不是 none 或 will-change 的值是 filter(只在 Firefox 下生效). </li>\n<li>contain 的值是 paint (例如: contain: paint;)</li>\n</ul>\n<p>我们还是来看一个示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: skyblue;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>); <span class=\"comment\">/* 新增代码 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们对于上面的代码只新增了一条声明，那就是 transform: rotate(0deg)，此时的渲染效果却发生了改变，如下图所示：</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154347.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154347.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814234347149\" style=\"zoom:33%;\" />\n\n<p>可以看到，此时对于 div.item2 来讲，包含块就变成了 div.item。</p>\n<p>好了，到这里，关于包含块的知识就基本讲完了。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n<p>我们再把 CSS 规范中所举的例子来看一下。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Illustration of containing blocks<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;body&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p1&quot;</span>&gt;</span>This is text in the first paragraph...<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p2&quot;</span>&gt;</span></span><br><span class=\"line\">        This is text</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">em</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;em1&quot;</span>&gt;</span></span><br><span class=\"line\">          in the</span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;strong1&quot;</span>&gt;</span>second<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">          paragraph.</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>上面是一段简单的 HTML 代码，在没有添加任何 CSS 代码的情况下，你能说出各自的包含块么？</p>\n<p>对应的结果如下：</p>\n<table>\n<thead>\n<tr>\n<th>元素</th>\n<th>包含块</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>html</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>body</td>\n<td>html</td>\n</tr>\n<tr>\n<td>div1</td>\n<td>body</td>\n</tr>\n<tr>\n<td>p1</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>p2</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>em1</td>\n<td>p2</td>\n</tr>\n<tr>\n<td>strong1</td>\n<td>p2</td>\n</tr>\n</tbody></table>\n<p>首先 HTML 作为根元素，对应的包含块就是前面我们所说的初始包含块，而对于 body 而言，这是一个 static 定位的元素，因此该元素的包含块参照第一条为 html，以此类推 div1、p1、p2 以及 em1 的包含块也都是它们的父元素。</p>\n<p>不过 strong1 比较例外，它的包含块确实 p2，而非 em1。为什么会这样？建议你再把非根元素的第一条规则读一下：</p>\n<ul>\n<li>如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的<strong>块容器（block container）</strong>的内容区域（content area）的边缘建立。</li>\n</ul>\n<p>没错，因为 em1 不是块容器，而包含块是<strong>离它最近的块容器</strong>的内容区域，所以是 p2。</p>\n<p>接下来添加如下的 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#div1</span> &#123; </span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute; </span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">50px</span>; <span class=\"attribute\">top</span>: <span class=\"number\">50px</span> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的代码我们对 div1 进行了定位，那么此时的包含块会发生变化么？你可以先在自己思考一下。</p>\n<p>答案如下：</p>\n<table>\n<thead>\n<tr>\n<th>元素</th>\n<th>包含块</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>html</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>body</td>\n<td>html</td>\n</tr>\n<tr>\n<td>div1</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>p1</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>p2</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>em1</td>\n<td>p2</td>\n</tr>\n<tr>\n<td>strong1</td>\n<td>p2</td>\n</tr>\n</tbody></table>\n<p>可以看到，这里 div1 的包含块就发生了变化，变为了初始包含块。这里你可以参考前文中的这两句话：</p>\n<ul>\n<li>初始包含块（<strong>initial containing block</strong>）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。</li>\n<li>如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。</li>\n</ul>\n<p>是不是一下子就理解了。没错，因为我们对 div1 进行了定位，因此它会应用非根元素包含块计算规则的第三条规则，寻找离它最近的  position 的值不是 static 的祖先元素，不过显然 body 的定位方式为 static，因此 div1 的包含块最终就变成了初始包含块。</p>\n<p>接下来我们继续修改我们的 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#div1</span> &#123; </span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute; </span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">50px</span>; </span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">50px</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#em1</span>  &#123; </span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute; </span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>; </span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">100px</span> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里我们对 em1 同样进行了 absolute 绝对定位，你想一想会有什么样的变化？</p>\n<p>没错，聪明的你大概应该知道，em1 的包含块不再是 p2，而变成了 div1，而 strong1 的包含块也不再是 p2 了，而是变成了 em1。</p>\n<p>如下表所示：</p>\n<table>\n<thead>\n<tr>\n<th>元素</th>\n<th>包含块</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>html</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>body</td>\n<td>html</td>\n</tr>\n<tr>\n<td>div1</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>p1</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>p2</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>em1</td>\n<td>div1（因为定位了，参阅非根元素包含块确定规则的第三条）</td>\n</tr>\n<tr>\n<td>strong1</td>\n<td>em1（因为 em1 变为了块容器，参阅非根元素包含块确定规则的第一条）</td>\n</tr>\n</tbody></table>\n<p>好了，这就是 CSS 规范中所举的例子。如果你全都能看明白，以后你还能跟别人说你是看过这一块知识对应的 CSS 规范的人。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-013519.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-013519.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220815093518833\" style=\"zoom:33%;\" />\n\n<p>另外，关于包含块的知识，在 MDN 上除了解说了什么是包含块以外，也举出了很多简单易懂的示例。</p>\n<p>具体你可以移步到：<em><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block\">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block</a></em></p>\n<p>好了，这就是有关包含块的所有内容了，你学会了么？-）</p>\n<hr>\n<p>-<em>EOF</em>-</p>\n<h2 id=\"CSS-属性计算过程\"><a href=\"#CSS-属性计算过程\" class=\"headerlink\" title=\"CSS 属性计算过程\"></a>CSS 属性计算过程</h2><p>你是否了解 CSS 的属性计算过程呢？</p>\n<p>有的同学可能会讲，CSS属性我倒是知道，例如：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的 CSS 代码中，p 是元素选择器，color 就是其中的一个 CSS 属性。</p>\n<p>但是要说 CSS 属性的计算过程，还真的不是很清楚。</p>\n<p>没关系，通过此篇文章，能够让你彻底明白什么是 CSS 属性的计算流程。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n<p>首先，不知道你有没有考虑过这样的一个问题，假设在 HTML 中有这么一段代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>这是一个h1标题<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>上面的代码也非常简单，就是在 body 中有一个 h1 标题而已，该 h1 标题呈现出来的外观是如下：</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060724.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060724.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813140724136\" style=\"zoom:50%;\" />\n\n<p>目前我们没有设置该 h1 的任何样式，但是却能看到该 h1 有一定的默认样式，例如有默认的字体大小、默认的颜色。</p>\n<p>那么问题来了，我们这个 h1 元素上面除了有默认字体大小、默认颜色等属性以外，究竟还有哪些属性呢？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014216.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014216.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220815094215982\" style=\"zoom:30%;\" />\n\n<p>答案是<strong>该元素上面会有 CSS 所有的属性。</strong>你可以打开浏览器的开发者面板，选择【元素】，切换到【计算样式】，之后勾选【全部显示】，此时你就能看到在此 h1 上面所有 CSS 属性对应的值。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-061516.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-061516.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813141516153\"></p>\n<p>换句话说，<strong>我们所书写的任何一个 HTML 元素，实际上都有完整的一整套 CSS 样式</strong>。这一点往往是让初学者比较意外的，因为我们平时在书写 CSS 样式时，往往只会书写必要的部分，例如前面的：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这往往会给我们造成一种错觉，认为该 p 元素上面就只有 color 属性。而真实的情况确是，任何一个 HTML 元素，都有一套完整的 CSS 样式，只不过你没有书写的样式，<strong>大概率可能</strong>会使用其默认值。例如上图中 h1 一个样式都没有设置，全部都用的默认值。</p>\n<p>但是注意，我这里强调的是“大概率可能”，难道还有我们“没有设置值，但是不使用默认值”的情况么？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014459.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014459.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220815094458940\" style=\"zoom:25%;\" />\n\n<p>嗯，确实有的，所以我才强调你要了解“CSS 属性的计算过程”。</p>\n<p>总的来讲，属性值的计算过程，分为如下这么 <em>4</em> 个步骤：</p>\n<ul>\n<li>确定声明值</li>\n<li>层叠冲突</li>\n<li>使用继承</li>\n<li>使用默认值</li>\n</ul>\n<h3 id=\"确定声明值\"><a href=\"#确定声明值\" class=\"headerlink\" title=\"确定声明值\"></a>确定声明值</h3><p>首先第一步，是确定声明值。所谓声明值就是作者自己所书写的 CSS 样式，例如前面的：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里我们声明了 p 元素为红色，那么就会应用此属性设置。</p>\n<p>当然，除了作者样式表，一般浏览器还会存在“用户代理样式表”，简单来讲就是浏览器内置了一套样式表。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-063500.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-063500.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813143500066\"></p>\n<p>在上面的示例中，作者样式表中设置了 color 属性，而用户代理样式表（浏览器提供的样式表）中设置了诸如 display、margin-block-start、margin-block-end、margin-inline-start、margin-inline-end 等属性对应的值。</p>\n<p>这些值目前来讲也没有什么冲突，因此最终就会应用这些属性值。</p>\n<h3 id=\"层叠冲突\"><a href=\"#层叠冲突\" class=\"headerlink\" title=\"层叠冲突\"></a>层叠冲突</h3><p>在确定声明值时，可能出现一种情况，那就是声明的样式规则发生了冲突。</p>\n<p>此时会进入解决层叠冲突的流程。而这一步又可以细分为下面这三个步骤：</p>\n<ul>\n<li>比较源的重要性</li>\n<li>比较优先级</li>\n<li>比较次序</li>\n</ul>\n<p>来来来，我们一步一步来看。</p>\n<h4 id=\"比较源的重要性\"><a href=\"#比较源的重要性\" class=\"headerlink\" title=\"比较源的重要性\"></a>比较源的重要性</h4><p>当不同的 CSS 样式来源拥有相同的声明时，此时就会根据样式表来源的重要性来确定应用哪一条样式规则。</p>\n<p>那么问题来了，咱们的样式表的源究竟有几种呢？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-100047.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-100047.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220823180047075\" style=\"zoom:40%;\" />\n\n<p>整体来讲有三种来源：</p>\n<ul>\n<li>浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式统称<strong>用户代理样式</strong>。</li>\n<li>网页的作者可以定义文档的样式，这是最常见的样式表，称之为<strong>页面作者样式</strong>。</li>\n<li>浏览器的用户，可以使用自定义样式表定制使用体验，称之为<strong>用户样式</strong>。</li>\n</ul>\n<p>对应的重要性顺序依次为：页面作者样式 &gt; 用户样式 &gt; 用户代理样式</p>\n<p>更详细的来源重要性比较，可以参阅 <em>MDN</em>：<em><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade\">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade</a></em></p>\n<p>我们来看一个示例。</p>\n<p>例如现在有<strong>页面作者样式表</strong>和<strong>用户代理样式表</strong>中存在属性的冲突，那么会以作者样式表优先。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-064222.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-064222.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813144222152\"></p>\n<p>可以明显的看到，作者样式表和用户代理样式表中同时存在的 display 属性的设置，最终作者样式表干掉了用户代理样式表中冲突的属性。这就是第一步，根据不同源的重要性来决定应用哪一个源的样式。</p>\n<h4 id=\"比较优先级\"><a href=\"#比较优先级\" class=\"headerlink\" title=\"比较优先级\"></a>比较优先级</h4><p>那么接下来，如果是在在同一个源中有样式声明冲突怎么办呢？此时就会进行样式声明的优先级比较。</p>\n<p>例如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.test</span> <span class=\"selector-tag\">h1</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，同属于<strong>页面作者样式</strong>，源的重要性是相同的，此时会以选择器的权重来比较重要性。</p>\n<p>很明显，上面的选择器的权重要大于下面的选择器，因此最终标题呈现为 <em>50px</em>。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2021-09-16-071546.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2021-09-16-071546.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210916151546500\" style=\"zoom: 40%;\" />\n\n<p>可以看到，落败的作者样式在 <em>Elements&gt;Styles</em> 中会被划掉。</p>\n<p>有关选择器权重的计算方式，不清楚的同学，可以进入此传送门：<em><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity\">https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity</a></em></p>\n<h4 id=\"比较次序\"><a href=\"#比较次序\" class=\"headerlink\" title=\"比较次序\"></a>比较次序</h4><p>经历了上面两个步骤，大多数的样式声明能够被确定下来。但是还剩下最后一种情况，那就是样式声明既是同源，权重也相同。</p>\n<p>此时就会进入第三个步骤，比较样式声明的次序。</p>\n<p>举个例子：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，同样都是<strong>页面作者样式</strong>，<strong>选择器的权重也相同</strong>，此时位于下面的样式声明会层叠掉上面的那一条样式声明，最终会应用 <em>20px</em> 这一条属性值。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-103928.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-103928.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220823183928330\"></p>\n<p>至此，样式声明中存在冲突的所有情况，就全部被解决了。</p>\n<h3 id=\"使用继承\"><a href=\"#使用继承\" class=\"headerlink\" title=\"使用继承\"></a>使用继承</h3><p>层叠冲突这一步完成后，解决了相同元素被声明了多条样式规则究竟应用哪一条样式规则的问题。</p>\n<p>那么如果没有声明的属性呢？此时就使用默认值么？</p>\n<p><em>No、No、No</em>，别急，此时还有第三个步骤，那就是使用继承而来的值。</p>\n<p>例如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，我们针对 div 设置了 color 属性值为红色，而针对 p 元素我们没有声明任何的属性，但是由于 color 是可以继承的，因此 p 元素从最近的 div 身上继承到了 color 属性的值。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065102.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065102.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813145102293\"></p>\n<p>这里有两个点需要同学们注意一下。</p>\n<p>首先第一个是我强调了是<strong>最近的</strong> div 元素，看下面的例子：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: blue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065653.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065653.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813145652726\"></p>\n<p>因为这里并不涉及到选中 p 元素声明 color 值，而是从父元素上面继承到 color 对应的值，因此这里是<strong>谁近就听谁</strong>的，初学者往往会产生混淆，又去比较权重，但是这里根本不会涉及到权重比较，因为压根儿就没有选中到 p 元素。</p>\n<p>第二个就是哪些属性能够继承？</p>\n<p>关于这一点的话，大家可以在 MDN 上面很轻松的查阅到。例如我们以 text-align 为例，如下图所示：</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070148.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070148.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813150147885\"></p>\n<h3 id=\"使用默认值\"><a href=\"#使用默认值\" class=\"headerlink\" title=\"使用默认值\"></a>使用默认值</h3><p>好了，目前走到这一步，如果属性值都还不能确定下来，那么就只能是使用默认值了。</p>\n<p>如下图所示：</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070825.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070825.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813150824752\"></p>\n<p>前面我们也说过，一个 HTML 元素要在浏览器中渲染出来，必须具备所有的 CSS 属性值，但是绝大部分我们是不会去设置的，用户代理样式表里面也不会去设置，也无法从继承拿到，因此最终都是用默认值。</p>\n<p>好了，这就是关于 CSS 属性计算过程的所有知识了。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n\n\n<h3 id=\"一道面试题\"><a href=\"#一道面试题\" class=\"headerlink\" title=\"一道面试题\"></a>一道面试题</h3><p>好了，学习了今天的内容，让我来用一道面试题测试测试大家的理解程度。</p>\n<p>下面的代码，最终渲染出来的效果，a 元素是什么颜色？p 元素又是什么颜色？</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>大家能说出为什么会呈现这样的结果么？</p>\n<p>解答如下：</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-071941.png\" class=\"lazyload\" data-srcset=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-071941.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220813151941113\"></p>\n<p>实际上原因很简单，因为 a 元素在用户代理样式表中已经设置了 color 属性对应的值，因此会应用此声明值。而在 p 元素中无论是作者样式表还是用户代理样式表，都没有对此属性进行声明，然而由于 color 属性是可以继承的，因此最终 p 元素的 color 属性值通过继承来自于父元素。</p>\n<p>你答对了么？-）</p>\n<hr>\n<p>-<em>EOF</em>-</p>\n","excerpt":"","more":"<h2 id=\"事件循环\"><a href=\"#事件循环\" class=\"headerlink\" title=\"事件循环\"></a>事件循环</h2><h3 id=\"浏览器的进程模型\"><a href=\"#浏览器的进程模型\" class=\"headerlink\" title=\"浏览器的进程模型\"></a>浏览器的进程模型</h3><h4 id=\"何为进程？\"><a href=\"#何为进程？\" class=\"headerlink\" title=\"何为进程？\"></a>何为进程？</h4><p>程序运行需要有它自己专属的内存空间，可以把这块内存空间简单的理解为进程</p>\n<img src=\"http://mdrs.yuanjin.tech/img/202208092057573.png\" alt=\"image-20220809205743532\" style=\"zoom:50%;\" />\n\n<p>每个应用至少有一个进程，进程之间相互独立，即使要通信，也需要双方同意。</p>\n<h4 id=\"何为线程？\"><a href=\"#何为线程？\" class=\"headerlink\" title=\"何为线程？\"></a>何为线程？</h4><p>有了进程后，就可以运行程序的代码了。</p>\n<p>运行代码的「人」称之为「线程」。</p>\n<p>一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，该线程称之为主线程。<em>当主线程结束时，进程也相应结束</em></p>\n<p>如果程序需要同时执行多块代码，主线程就会启动更多的线程来执行代码，所以一个进程中可以包含多个线程。</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208092108499.png\" alt=\"image-20220809210859457\"></p>\n<h4 id=\"浏览器有哪些进程和线程？\"><a href=\"#浏览器有哪些进程和线程？\" class=\"headerlink\" title=\"浏览器有哪些进程和线程？\"></a>浏览器有哪些进程和线程？</h4><p><strong>浏览器是一个多进程多线程的应用程序</strong></p>\n<p>浏览器内部工作极其复杂。</p>\n<p>为了避免相互影响，为了减少连环崩溃的几率，当启动浏览器后，它会自动启动多个进程。</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208092131410.png\" alt=\"image-20220809213152371\"></p>\n<blockquote>\n<p>可以在浏览器的任务管理器中查看当前的所有进程</p>\n</blockquote>\n<p>其中，最主要的进程有：</p>\n<ol>\n<li><p>浏览器进程</p>\n<p>主要负责界面显示、用户交互、子进程管理等。浏览器进程内部会启动多个线程处理不同的任务。</p>\n</li>\n<li><p>网络进程</p>\n<p>负责加载网络资源。网络进程内部会启动多个线程来处理不同的网络任务。</p>\n</li>\n<li><p><strong>渲染进程</strong>（本节课重点讲解的进程）</p>\n<p>渲染进程启动后，会开启一个<strong>渲染主线程</strong>，主线程负责执行 HTML、CSS、JS 代码。</p>\n<p>默认情况下，浏览器会为每个标签页开启一个新的渲染进程，以保证不同的标签页之间不相互影响。</p>\n<blockquote>\n<p>将来该默认模式可能会有所改变，有兴趣的同学可参见<a href=\"https://chromium.googlesource.com/chromium/src/+/main/docs/process_model_and_site_isolation.md#Modes-and-Availability\">chrome官方说明文档</a></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"渲染主线程是如何工作的？\"><a href=\"#渲染主线程是如何工作的？\" class=\"headerlink\" title=\"渲染主线程是如何工作的？\"></a>渲染主线程是如何工作的？</h3><p>渲染主线程是浏览器中最繁忙的线程，需要它处理的任务包括但不限于：</p>\n<ul>\n<li>解析 HTML</li>\n<li>解析 CSS</li>\n<li>计算样式</li>\n<li>布局</li>\n<li>处理图层</li>\n<li>每秒把页面画 60 次</li>\n<li>执行全局 JS 代码</li>\n<li>执行事件处理函数</li>\n<li>执行计时器的回调函数</li>\n<li>……</li>\n</ul>\n<blockquote>\n<p>思考题：为什么渲染进程不适用多个线程来处理这些事情？</p>\n</blockquote>\n<p>要处理这么多的任务，主线程遇到了一个前所未有的难题：如何调度任务？</p>\n<p>比如：</p>\n<ul>\n<li>我正在执行一个 JS 函数，执行到一半的时候用户点击了按钮，我该立即去执行点击事件的处理函数吗？</li>\n<li>我正在执行一个 JS 函数，执行到一半的时候某个计时器到达了时间，我该立即去执行它的回调吗？</li>\n<li>浏览器进程通知我“用户点击了按钮”，与此同时，某个计时器也到达了时间，我应该处理哪一个呢？</li>\n<li>……</li>\n</ul>\n<p>渲染主线程想出了一个绝妙的主意来处理这个问题：排队</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208092230847.png\" alt=\"image-20220809223027806\"></p>\n<ol>\n<li>在最开始的时候，渲染主线程会进入一个无限循环</li>\n<li>每一次循环会检查消息队列中是否有任务存在。如果有，就取出第一个任务执行，执行完一个后进入下一次循环；如果没有，则进入休眠状态。</li>\n<li>其他所有线程（包括其他进程的线程）可以随时向消息队列添加任务。新任务会加到消息队列的末尾。在添加新任务时，如果主线程是休眠状态，则会将其唤醒以继续循环拿取任务</li>\n</ol>\n<p>这样一来，就可以让每个任务有条不紊的、持续的进行下去了。</p>\n<p><strong>整个过程，被称之为事件循环（消息循环）</strong></p>\n<h3 id=\"若干解释\"><a href=\"#若干解释\" class=\"headerlink\" title=\"若干解释\"></a>若干解释</h3><h4 id=\"何为异步？\"><a href=\"#何为异步？\" class=\"headerlink\" title=\"何为异步？\"></a>何为异步？</h4><p>代码在执行过程中，会遇到一些无法立即处理的任务，比如：</p>\n<ul>\n<li>计时完成后需要执行的任务 —— <code>setTimeout</code>、<code>setInterval</code></li>\n<li>网络通信完成后需要执行的任务 – <code>XHR</code>、<code>Fetch</code></li>\n<li>用户操作后需要执行的任务 – <code>addEventListener</code></li>\n</ul>\n<p>如果让渲染主线程等待这些任务的时机达到，就会导致主线程长期处于「阻塞」的状态，从而导致浏览器「卡死」</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208101043348.png\" alt=\"image-20220810104344296\"></p>\n<p><strong>渲染主线程承担着极其重要的工作，无论如何都不能阻塞！</strong></p>\n<p>因此，浏览器选择<strong>异步</strong>来解决这个问题</p>\n<p><img src=\"http://mdrs.yuanjin.tech/img/202208101048899.png\" alt=\"image-20220810104858857\"></p>\n<p>使用异步的方式，<strong>渲染主线程永不阻塞</strong></p>\n<blockquote>\n<p>面试题：如何理解 JS 的异步？</p>\n<p>参考答案：</p>\n<p>JS是一门单线程的语言，这是因为它运行在浏览器的渲染主线程中，而渲染主线程只有一个。</p>\n<p>而渲染主线程承担着诸多的工作，渲染页面、执行 JS 都在其中运行。</p>\n<p>如果使用同步的方式，就极有可能导致主线程产生阻塞，从而导致消息队列中的很多其他任务无法得到执行。这样一来，一方面会导致繁忙的主线程白白的消耗时间，另一方面导致页面无法及时更新，给用户造成卡死现象。</p>\n<p>所以浏览器采用异步的方式来避免。具体做法是当某些任务发生时，比如计时器、网络、事件监听，主线程将任务交给其他线程去处理，自身立即结束任务的执行，转而执行后续代码。当其他线程完成时，将事先传递的回调函数包装成任务，加入到消息队列的末尾排队，等待主线程调度执行。</p>\n<p>在这种异步模式下，浏览器永不阻塞，从而最大限度的保证了单线程的流畅运行。</p>\n</blockquote>\n<h4 id=\"JS为何会阻碍渲染？\"><a href=\"#JS为何会阻碍渲染？\" class=\"headerlink\" title=\"JS为何会阻碍渲染？\"></a>JS为何会阻碍渲染？</h4><p>先看代码</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Mr.Yuan is awesome!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>change<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">var</span> h1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;h1&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">var</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 死循环指定的时间</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">delay</span>(<span class=\"params\">duration</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> start = <span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">while</span> (<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>() - start &lt; duration) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  btn.<span class=\"property\">onclick</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    h1.<span class=\"property\">textContent</span> = <span class=\"string\">&#x27;陈广文很帅！&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">delay</span>(<span class=\"number\">3000</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>点击按钮后，会发生什么呢？</p>\n<p>&lt;见具体演示&gt;</p>\n<h4 id=\"任务有优先级吗？\"><a href=\"#任务有优先级吗？\" class=\"headerlink\" title=\"任务有优先级吗？\"></a>任务有优先级吗？</h4><p>任务没有优先级，在消息队列中先进先出</p>\n<p>但<strong>消息队列是有优先级的</strong></p>\n<p>根据 W3C 的最新解释:</p>\n<ul>\n<li>每个任务都有一个任务类型，同一个类型的任务必须在一个队列，不同类型的任务可以分属于不同的队列。<br>在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务执行。</li>\n<li>浏览器必须准备好一个微队列，微队列中的任务优先所有其他任务执行<br><a href=\"https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint\">https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint</a></li>\n</ul>\n<blockquote>\n<p>随着浏览器的复杂度急剧提升，W3C 不再使用宏队列的说法</p>\n</blockquote>\n<p>在目前 chrome 的实现中，至少包含了下面的队列：</p>\n<ul>\n<li>延时队列：用于存放计时器到达后的回调任务，优先级「中」</li>\n<li>交互队列：用于存放用户操作后产生的事件处理任务，优先级「高」</li>\n<li>微队列：用户存放需要最快执行的任务，优先级「最高」</li>\n</ul>\n<blockquote>\n<p>添加任务到微队列的主要方式主要是使用 Promise、MutationObserver</p>\n<p>例如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 立即把一个函数添加到微队列</span></span><br><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>().<span class=\"title function_\">then</span>(函数)</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>浏览器还有很多其他的队列，由于和我们开发关系不大，不作考虑</p>\n</blockquote>\n<blockquote>\n<p>面试题：阐述一下 JS 的事件循环</p>\n<p>参考答案：</p>\n<p>事件循环又叫做消息循环，是浏览器渲染主线程的工作方式。</p>\n<p>在 Chrome 的源码中，它开启一个不会结束的 for 循环，每次循环从消息队列中取出第一个任务执行，而其他线程只需要在合适的时候将任务加入到队列末尾即可。</p>\n<p>过去把消息队列简单分为宏队列和微队列，这种说法目前已无法满足复杂的浏览器环境，取而代之的是一种更加灵活多变的处理方式。</p>\n<p>根据 W3C 官方的解释，每个任务有不同的类型，同类型的任务必须在同一个队列，不同的任务可以属于不同的队列。不同任务队列有不同的优先级，在一次事件循环中，由浏览器自行决定取哪一个队列的任务。但浏览器必须有一个微队列，微队列的任务一定具有最高的优先级，必须优先调度执行。</p>\n</blockquote>\n<blockquote>\n<p>面试题：JS 中的计时器能做到精确计时吗？为什么？</p>\n<p>参考答案：</p>\n<p>不行，因为：</p>\n<ol>\n<li>计算机硬件没有原子钟，无法做到精确计时</li>\n<li>操作系统的计时函数本身就有少量偏差，由于 JS 的计时器最终调用的是操作系统的函数，也就携带了这些偏差</li>\n<li>按照 W3C 的标准，浏览器实现计时器时，如果嵌套层级超过 5 层，则会带有 4 毫秒的最少时间，这样在计时时间少于 4 毫秒时又带来了偏差</li>\n<li>受事件循环的影响，计时器的回调函数只能在主线程空闲时运行，因此又带来了偏差</li>\n</ol>\n</blockquote>\n<h2 id=\"浏览器渲染过程\"><a href=\"#浏览器渲染过程\" class=\"headerlink\" title=\"浏览器渲染过程\"></a>浏览器渲染过程</h2><h3 id=\"浏览器是如何渲染页面的？\"><a href=\"#浏览器是如何渲染页面的？\" class=\"headerlink\" title=\"浏览器是如何渲染页面的？\"></a>浏览器是如何渲染页面的？</h3><p>当浏览器的网络线程收到 HTML 文档后，会产生一个渲染任务，并将其传递给渲染主线程的消息队列。</p>\n<p>在事件循环机制的作用下，渲染主线程取出消息队列中的渲染任务，开启渲染流程。</p>\n<p><img src=\"/img/20230711021718.png\" alt=\"image\"></p>\n<hr>\n<p>整个渲染流程分为多个阶段，分别是： HTML 解析、样式计算、布局、分层、绘制、分块、光栅化、画</p>\n<p>每个阶段都有明确的输入输出，上一个阶段的输出会成为下一个阶段的输入。</p>\n<p>这样，整个渲染流程就形成了一套组织严密的生产流水线。</p>\n<p><img src=\"/img/20230711021839.png\" alt=\"image\"></p>\n<hr>\n<h4 id=\"渲染的第一步是解析-HTML。\"><a href=\"#渲染的第一步是解析-HTML。\" class=\"headerlink\" title=\"渲染的第一步是解析 HTML。\"></a>渲染的第一步是<strong>解析 HTML</strong>。</h4><p><img src=\"/img/20230711022045.png\" alt=\"image\"></p>\n<p>解析过程中遇到 CSS 解析 CSS，遇到 JS 执行 JS。为了提高解析效率，浏览器在开始解析前，会启动一个预解析的线程，率先下载 HTML 中的外部 CSS 文件和 外部的 JS 文件。</p>\n<p><img src=\"/imhg/20230711022147.png\" alt=\"image\"></p>\n<p>css与js是完全不同的</p>\n<p><img src=\"/img/20230711022309.png\" alt=\"image\"></p>\n<p>如果主线程解析到<code>link</code>位置，此时外部的 CSS 文件还没有下载解析好，主线程不会等待，继续解析后续的 HTML。这是因为下载和解析 CSS 的工作是在预解析线程中进行的。这就是 CSS 不会阻塞 HTML 解析的根本原因。</p>\n<p>如果主线程解析到<code>script</code>位置，会停止解析 HTML，转而等待 JS 文件下载好，并将全局代码解析执行完成后，才能继续解析 HTML。这是因为 JS 代码的执行过程可能会修改当前的 DOM 树，所以 DOM 树的生成必须暂停。这就是 JS 会阻塞 HTML 解析的根本原因。</p>\n<p>第一步完成后，会得到 DOM 树和 CSSOM 树，浏览器的默认样式、内部样式、外部样式、行内样式均会包含在 CSSOM 树中。</p>\n<hr>\n<h4 id=\"渲染的下一步是样式计算。\"><a href=\"#渲染的下一步是样式计算。\" class=\"headerlink\" title=\"渲染的下一步是样式计算。\"></a>渲染的下一步是<strong>样式计算</strong>。</h4><p><img src=\"/img/20230711022430.png\" alt=\"image\"></p>\n<p>主线程会遍历得到的 DOM 树，依次为树中的每个节点计算出它最终的样式，称之为 Computed Style。</p>\n<p>在这一过程中，很多预设值会变成绝对值，比如<code>red</code>会变成<code>rgb(255,0,0)</code>；相对单位会变成绝对单位，比如<code>em</code>会变成<code>px</code></p>\n<p>这一步完成后，会得到一棵带有样式的 DOM 树。</p>\n<hr>\n<h4 id=\"接下来是布局，布局完成后会得到布局树。\"><a href=\"#接下来是布局，布局完成后会得到布局树。\" class=\"headerlink\" title=\"接下来是布局，布局完成后会得到布局树。\"></a>接下来是<strong>布局</strong>，布局完成后会得到布局树。</h4><p><img src=\"/img/20230711022532.png\" alt=\"image\"></p>\n<p>布局阶段会依次遍历 DOM 树的每一个节点，计算每个节点的几何信息。例如节点的宽高、相对包含块的位置。</p>\n<p>大部分时候，DOM 树和布局树并非一一对应。</p>\n<p><img src=\"/img/20230711022631.png\" alt=\"image\"></p>\n<p>比如<code>display:none</code>的节点没有几何信息，因此不会生成到布局树；又比如使用了伪元素选择器，虽然 DOM 树中不存在这些伪元素节点，但它们拥有几何信息，所以会生成到布局树中。还有匿名行盒、匿名块盒等等都会导致 DOM 树和布局树无法一一对应。</p>\n<p><img src=\"/img/20230711022723.png\" alt=\"image\"></p>\n<hr>\n<h4 id=\"下一步是分层\"><a href=\"#下一步是分层\" class=\"headerlink\" title=\"下一步是分层\"></a>下一步是<strong>分层</strong></h4><p><img src=\"/img/20230711022759.png\" alt=\"image\"></p>\n<p>主线程会使用一套复杂的策略对整个布局树中进行分层。</p>\n<p>分层的好处在于，将来某一个层改变后，仅会对该层进行后续处理，从而提升效率。</p>\n<p>滚动条、堆叠上下文、transform、opacity 等样式都会或多或少的影响分层结果，也可以通过<code>will-change</code>属性更大程度的影响分层结果。</p>\n<hr>\n<h4 id=\"再下一步是绘制\"><a href=\"#再下一步是绘制\" class=\"headerlink\" title=\"再下一步是绘制\"></a>再下一步是<strong>绘制</strong></h4><p><img src=\"/img/20230711022913.png\" alt=\"image\"></p>\n<p>主线程会为每个层单独产生绘制指令集，用于描述这一层的内容该如何画出来。</p>\n<hr>\n<h4 id=\"再来是分块\"><a href=\"#再来是分块\" class=\"headerlink\" title=\"再来是分块\"></a>再来是<strong>分块</strong></h4><p><img src=\"/img/20230711023058.png\" alt=\"image\"></p>\n<p>完成绘制后，主线程将每个图层的绘制信息提交给合成线程，剩余工作将由合成线程完成。</p>\n<p>合成线程首先对每个图层进行分块，将其划分为更多的小区域。</p>\n<p>它会从线程池中拿取多个线程来完成分块工作。</p>\n<p><img src=\"/img/20230711023204.png\" alt=\"image\"></p>\n<hr>\n<h4 id=\"分块完成后，进入光栅化阶段。\"><a href=\"#分块完成后，进入光栅化阶段。\" class=\"headerlink\" title=\"分块完成后，进入光栅化阶段。\"></a>分块完成后，进入<strong>光栅化</strong>阶段。</h4><p><img src=\"/img/20230711023306.png\" alt=\"image\"></p>\n<p>合成线程会将块信息交给 GPU 进程，以极高的速度完成光栅化。</p>\n<p>GPU 进程会开启多个线程来完成光栅化，并且优先处理靠近视口区域的块。</p>\n<p>光栅化的结果，就是一块一块的位图</p>\n<p><img src=\"/img/20230711023306.png\" alt=\"image\"></p>\n<hr>\n<h4 id=\"最后一个阶段就是画了\"><a href=\"#最后一个阶段就是画了\" class=\"headerlink\" title=\"最后一个阶段就是画了\"></a>最后一个阶段就是<strong>画</strong>了</h4><p><img src=\"/img/20230711023453.png\" alt=\"image\"></p>\n<p>合成线程拿到每个层、每个块的位图后，生成一个个「指引（quad）」信息。</p>\n<p>指引会标识出每个位图应该画到屏幕的哪个位置，以及会考虑到旋转、缩放等变形。</p>\n<p>变形发生在合成线程，与渲染主线程无关，这就是<code>transform</code>效率高的本质原因。</p>\n<p>合成线程会把 quad 提交给 GPU 进程，由 GPU 进程产生系统调用，提交给 GPU 硬件，完成最终的屏幕成像。</p>\n<h4 id=\"完整流程\"><a href=\"#完整流程\" class=\"headerlink\" title=\"完整流程\"></a><strong>完整流程</strong></h4><p><img src=\"/img/20230711023600.png\" alt=\"image\"></p>\n<h3 id=\"什么是-reflow？\"><a href=\"#什么是-reflow？\" class=\"headerlink\" title=\"什么是 reflow？\"></a>什么是 reflow？</h3><p>reflow 的本质就是重新计算 layout 树。</p>\n<p>当进行了会影响布局树的操作后，需要重新计算布局树，会引发 layout。</p>\n<p>为了避免连续的多次操作导致布局树反复计算，浏览器会合并这些操作，当 JS 代码全部完成后再进行统一计算。所以，改动属性造成的 reflow 是异步完成的。</p>\n<p>也同样因为如此，当 JS 获取布局属性时，就可能造成无法获取到最新的布局信息。</p>\n<p>浏览器在反复权衡下，最终决定获取属性立即 reflow。</p>\n<h3 id=\"什么是-repaint？\"><a href=\"#什么是-repaint？\" class=\"headerlink\" title=\"什么是 repaint？\"></a>什么是 repaint？</h3><p>repaint 的本质就是重新根据分层信息计算了绘制指令。</p>\n<p>当改动了可见样式后，就需要重新计算，会引发 repaint。</p>\n<p>由于元素的布局信息也属于可见样式，所以 reflow 一定会引起 repaint。</p>\n<h3 id=\"为什么-transform-的效率高？\"><a href=\"#为什么-transform-的效率高？\" class=\"headerlink\" title=\"为什么 transform 的效率高？\"></a>为什么 transform 的效率高？</h3><p>因为 transform 既不会影响布局也不会影响绘制指令，它影响的只是渲染流程的最后一个「draw」阶段</p>\n<p>由于 draw 阶段在合成线程中，所以 transform 的变化几乎不会影响渲染主线程。反之，渲染主线程无论如何忙碌，也不会影响 transform 的变化。</p>\n<h2 id=\"CSS-之包含块\"><a href=\"#CSS-之包含块\" class=\"headerlink\" title=\"CSS 之包含块\"></a>CSS 之包含块</h2><blockquote>\n<p><strong>上文说到布局树的几何计算会算出css包含块，以下是css包含块的详细解释</strong></p>\n</blockquote>\n<p>一说到 CSS 盒模型，这是很多小伙伴耳熟能详的知识，甚至有的小伙伴还能说出 border-box 和 content-box 这两种盒模型的区别。</p>\n<p>但是一说到 CSS 包含块，有的小伙伴就懵圈了，什么是包含块？好像从来没有听说过这玩意儿。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142005.png\" alt=\"image-20220814222004395\" style=\"zoom: 20%;\" />\n\n<p>好吧，如果你对包含块的知识一无所知，那么系好安全带，咱们准备出发了。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n<p>包含块英语全称为<strong>containing block</strong>，实际上平时你在书写 CSS 时，大多数情况下你是感受不到它的存在，因此你不知道这个知识点也是一件很正常的事情。但是这玩意儿是确确实实存在的，在 CSS 规范中也是明确书写了的：</p>\n<p><em><a href=\"https://drafts.csswg.org/css2/#containing-block-details\">https://drafts.csswg.org/css2/#containing-block-details</a></em></p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-142459.png\" alt=\"image-20220814222458695\" style=\"zoom:50%;\" />\n\n<p>并且，如果你不了解它的运作机制，有时就会出现一些你认为的莫名其妙的现象。</p>\n<p>那么，这个包含块究竟说了什么内容呢？</p>\n<p>说起来也简单，<strong>就是元素的尺寸和位置，会受它的包含块所影响。对于一些属性，例如 width, height, padding, margin，绝对定位元素的偏移值（比如 position 被设置为 absolute 或 fixed），当我们对其赋予百分比值时，这些值的计算值，就是通过元素的包含块计算得来。</strong></p>\n<p>来吧，少年，让我们从最简单的 case 开始看。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143153.png\" alt=\"image-20220814223152726\" style=\"zoom: 50%;\" />\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.container</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: skyblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>请仔细阅读上面的代码，然后你认为 div.item 这个盒子的宽高是多少？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-143451.png\" alt=\"image-20220814223451349\" style=\"zoom: 33%;\" />\n\n<p>相信你能够很自信的回答这个简单的问题，div.item 盒子的 width 为 250px，height 为 150px。</p>\n<p>这个答案确实是没有问题的，但是如果我追问你是怎么得到这个答案的，我猜不了解包含块的你大概率会说，因为它的父元素 div.container 的 width 为 500px，50% 就是 250px，height 为 300px，因此 50% 就是 150px。</p>\n<p>这个答案实际上是不准确的。正确的答案应该是，<strong>div.item 的宽高是根据它的包含块来计算的</strong>，而这里包含块的大小，正是这个元素最近的祖先块元素的内容区。</p>\n<p>因此正如我前面所说，<strong>很多时候你都感受不到包含块的存在。</strong></p>\n<p>包含块分为两种，一种是根元素（HTML 元素）所在的包含块，被称之为初始包含块（<strong>initial containing block</strong>）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。</p>\n<p>另外一种是对于非根元素，对于非根元素的包含块判定就有几种不同的情况了。大致可以分为如下几种：</p>\n<ul>\n<li>如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的块容器（block container）的内容区域（content area）的边缘建立。</li>\n<li>如果 position 属性是 fixed，那么包含块由视口建立。</li>\n<li>如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。</li>\n</ul>\n<p>前面两条实际上都还比较好理解，第三条往往是初学者容易比较忽视的，我们来看一个示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: skyblue;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>首先阅读上面的代码，然后你能在脑海里面想出其大致的样子么？或者用笔和纸画一下也行。</p>\n<p>公布正确答案：</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-153548.png\" alt=\"image-20220814233548188\" style=\"zoom: 33%;\" />\n\n<p>怎么样？有没有和你所想象的对上？</p>\n<p>其实原因也非常简单，根据上面的第三条规则，对于 div.item2 来讲，它的包含块应该是 div.container，而非 div.item。</p>\n<p>如果你能把上面非根元素的包含块判定规则掌握，那么关于包含块的知识你就已经掌握 80% 了。</p>\n<p>实际上对于非根元素来讲，包含块还有一种可能，那就是如果 position 属性是 absolute 或 fixed，包含块也可能是由满足以下条件的最近父级元素的内边距区的边缘组成的：</p>\n<ul>\n<li>transform 或 perspective 的值不是 none</li>\n<li>will-change 的值是 transform 或 perspective </li>\n<li>filter 的值不是 none 或 will-change 的值是 filter(只在 Firefox 下生效). </li>\n<li>contain 的值是 paint (例如: contain: paint;)</li>\n</ul>\n<p>我们还是来看一个示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: skyblue;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>); <span class=\"comment\">/* 新增代码 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们对于上面的代码只新增了一条声明，那就是 transform: rotate(0deg)，此时的渲染效果却发生了改变，如下图所示：</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154347.png\" alt=\"image-20220814234347149\" style=\"zoom:33%;\" />\n\n<p>可以看到，此时对于 div.item2 来讲，包含块就变成了 div.item。</p>\n<p>好了，到这里，关于包含块的知识就基本讲完了。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n<p>我们再把 CSS 规范中所举的例子来看一下。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Illustration of containing blocks<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;body&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p1&quot;</span>&gt;</span>This is text in the first paragraph...<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p2&quot;</span>&gt;</span></span><br><span class=\"line\">        This is text</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">em</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;em1&quot;</span>&gt;</span></span><br><span class=\"line\">          in the</span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;strong1&quot;</span>&gt;</span>second<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">          paragraph.</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>上面是一段简单的 HTML 代码，在没有添加任何 CSS 代码的情况下，你能说出各自的包含块么？</p>\n<p>对应的结果如下：</p>\n<table>\n<thead>\n<tr>\n<th>元素</th>\n<th>包含块</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>html</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>body</td>\n<td>html</td>\n</tr>\n<tr>\n<td>div1</td>\n<td>body</td>\n</tr>\n<tr>\n<td>p1</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>p2</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>em1</td>\n<td>p2</td>\n</tr>\n<tr>\n<td>strong1</td>\n<td>p2</td>\n</tr>\n</tbody></table>\n<p>首先 HTML 作为根元素，对应的包含块就是前面我们所说的初始包含块，而对于 body 而言，这是一个 static 定位的元素，因此该元素的包含块参照第一条为 html，以此类推 div1、p1、p2 以及 em1 的包含块也都是它们的父元素。</p>\n<p>不过 strong1 比较例外，它的包含块确实 p2，而非 em1。为什么会这样？建议你再把非根元素的第一条规则读一下：</p>\n<ul>\n<li>如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的<strong>块容器（block container）</strong>的内容区域（content area）的边缘建立。</li>\n</ul>\n<p>没错，因为 em1 不是块容器，而包含块是<strong>离它最近的块容器</strong>的内容区域，所以是 p2。</p>\n<p>接下来添加如下的 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#div1</span> &#123; </span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute; </span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">50px</span>; <span class=\"attribute\">top</span>: <span class=\"number\">50px</span> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的代码我们对 div1 进行了定位，那么此时的包含块会发生变化么？你可以先在自己思考一下。</p>\n<p>答案如下：</p>\n<table>\n<thead>\n<tr>\n<th>元素</th>\n<th>包含块</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>html</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>body</td>\n<td>html</td>\n</tr>\n<tr>\n<td>div1</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>p1</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>p2</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>em1</td>\n<td>p2</td>\n</tr>\n<tr>\n<td>strong1</td>\n<td>p2</td>\n</tr>\n</tbody></table>\n<p>可以看到，这里 div1 的包含块就发生了变化，变为了初始包含块。这里你可以参考前文中的这两句话：</p>\n<ul>\n<li>初始包含块（<strong>initial containing block</strong>）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。</li>\n<li>如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。</li>\n</ul>\n<p>是不是一下子就理解了。没错，因为我们对 div1 进行了定位，因此它会应用非根元素包含块计算规则的第三条规则，寻找离它最近的  position 的值不是 static 的祖先元素，不过显然 body 的定位方式为 static，因此 div1 的包含块最终就变成了初始包含块。</p>\n<p>接下来我们继续修改我们的 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#div1</span> &#123; </span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute; </span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">50px</span>; </span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">50px</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#em1</span>  &#123; </span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute; </span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>; </span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">100px</span> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里我们对 em1 同样进行了 absolute 绝对定位，你想一想会有什么样的变化？</p>\n<p>没错，聪明的你大概应该知道，em1 的包含块不再是 p2，而变成了 div1，而 strong1 的包含块也不再是 p2 了，而是变成了 em1。</p>\n<p>如下表所示：</p>\n<table>\n<thead>\n<tr>\n<th>元素</th>\n<th>包含块</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>html</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>body</td>\n<td>html</td>\n</tr>\n<tr>\n<td>div1</td>\n<td>initial C.B. (UA-dependent)</td>\n</tr>\n<tr>\n<td>p1</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>p2</td>\n<td>div1</td>\n</tr>\n<tr>\n<td>em1</td>\n<td>div1（因为定位了，参阅非根元素包含块确定规则的第三条）</td>\n</tr>\n<tr>\n<td>strong1</td>\n<td>em1（因为 em1 变为了块容器，参阅非根元素包含块确定规则的第一条）</td>\n</tr>\n</tbody></table>\n<p>好了，这就是 CSS 规范中所举的例子。如果你全都能看明白，以后你还能跟别人说你是看过这一块知识对应的 CSS 规范的人。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-013519.png\" alt=\"image-20220815093518833\" style=\"zoom:33%;\" />\n\n<p>另外，关于包含块的知识，在 MDN 上除了解说了什么是包含块以外，也举出了很多简单易懂的示例。</p>\n<p>具体你可以移步到：<em><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block\">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block</a></em></p>\n<p>好了，这就是有关包含块的所有内容了，你学会了么？-）</p>\n<hr>\n<p>-<em>EOF</em>-</p>\n<h2 id=\"CSS-属性计算过程\"><a href=\"#CSS-属性计算过程\" class=\"headerlink\" title=\"CSS 属性计算过程\"></a>CSS 属性计算过程</h2><p>你是否了解 CSS 的属性计算过程呢？</p>\n<p>有的同学可能会讲，CSS属性我倒是知道，例如：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的 CSS 代码中，p 是元素选择器，color 就是其中的一个 CSS 属性。</p>\n<p>但是要说 CSS 属性的计算过程，还真的不是很清楚。</p>\n<p>没关系，通过此篇文章，能够让你彻底明白什么是 CSS 属性的计算流程。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060434.png\" alt=\"image-20220813140434032\" style=\"zoom:50%;\" />\n\n<p>首先，不知道你有没有考虑过这样的一个问题，假设在 HTML 中有这么一段代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>这是一个h1标题<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>上面的代码也非常简单，就是在 body 中有一个 h1 标题而已，该 h1 标题呈现出来的外观是如下：</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-060724.png\" alt=\"image-20220813140724136\" style=\"zoom:50%;\" />\n\n<p>目前我们没有设置该 h1 的任何样式，但是却能看到该 h1 有一定的默认样式，例如有默认的字体大小、默认的颜色。</p>\n<p>那么问题来了，我们这个 h1 元素上面除了有默认字体大小、默认颜色等属性以外，究竟还有哪些属性呢？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014216.png\" alt=\"image-20220815094215982\" style=\"zoom:30%;\" />\n\n<p>答案是<strong>该元素上面会有 CSS 所有的属性。</strong>你可以打开浏览器的开发者面板，选择【元素】，切换到【计算样式】，之后勾选【全部显示】，此时你就能看到在此 h1 上面所有 CSS 属性对应的值。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-061516.png\" alt=\"image-20220813141516153\"></p>\n<p>换句话说，<strong>我们所书写的任何一个 HTML 元素，实际上都有完整的一整套 CSS 样式</strong>。这一点往往是让初学者比较意外的，因为我们平时在书写 CSS 样式时，往往只会书写必要的部分，例如前面的：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这往往会给我们造成一种错觉，认为该 p 元素上面就只有 color 属性。而真实的情况确是，任何一个 HTML 元素，都有一套完整的 CSS 样式，只不过你没有书写的样式，<strong>大概率可能</strong>会使用其默认值。例如上图中 h1 一个样式都没有设置，全部都用的默认值。</p>\n<p>但是注意，我这里强调的是“大概率可能”，难道还有我们“没有设置值，但是不使用默认值”的情况么？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-15-014459.png\" alt=\"image-20220815094458940\" style=\"zoom:25%;\" />\n\n<p>嗯，确实有的，所以我才强调你要了解“CSS 属性的计算过程”。</p>\n<p>总的来讲，属性值的计算过程，分为如下这么 <em>4</em> 个步骤：</p>\n<ul>\n<li>确定声明值</li>\n<li>层叠冲突</li>\n<li>使用继承</li>\n<li>使用默认值</li>\n</ul>\n<h3 id=\"确定声明值\"><a href=\"#确定声明值\" class=\"headerlink\" title=\"确定声明值\"></a>确定声明值</h3><p>首先第一步，是确定声明值。所谓声明值就是作者自己所书写的 CSS 样式，例如前面的：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里我们声明了 p 元素为红色，那么就会应用此属性设置。</p>\n<p>当然，除了作者样式表，一般浏览器还会存在“用户代理样式表”，简单来讲就是浏览器内置了一套样式表。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-063500.png\" alt=\"image-20220813143500066\"></p>\n<p>在上面的示例中，作者样式表中设置了 color 属性，而用户代理样式表（浏览器提供的样式表）中设置了诸如 display、margin-block-start、margin-block-end、margin-inline-start、margin-inline-end 等属性对应的值。</p>\n<p>这些值目前来讲也没有什么冲突，因此最终就会应用这些属性值。</p>\n<h3 id=\"层叠冲突\"><a href=\"#层叠冲突\" class=\"headerlink\" title=\"层叠冲突\"></a>层叠冲突</h3><p>在确定声明值时，可能出现一种情况，那就是声明的样式规则发生了冲突。</p>\n<p>此时会进入解决层叠冲突的流程。而这一步又可以细分为下面这三个步骤：</p>\n<ul>\n<li>比较源的重要性</li>\n<li>比较优先级</li>\n<li>比较次序</li>\n</ul>\n<p>来来来，我们一步一步来看。</p>\n<h4 id=\"比较源的重要性\"><a href=\"#比较源的重要性\" class=\"headerlink\" title=\"比较源的重要性\"></a>比较源的重要性</h4><p>当不同的 CSS 样式来源拥有相同的声明时，此时就会根据样式表来源的重要性来确定应用哪一条样式规则。</p>\n<p>那么问题来了，咱们的样式表的源究竟有几种呢？</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-100047.png\" alt=\"image-20220823180047075\" style=\"zoom:40%;\" />\n\n<p>整体来讲有三种来源：</p>\n<ul>\n<li>浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式统称<strong>用户代理样式</strong>。</li>\n<li>网页的作者可以定义文档的样式，这是最常见的样式表，称之为<strong>页面作者样式</strong>。</li>\n<li>浏览器的用户，可以使用自定义样式表定制使用体验，称之为<strong>用户样式</strong>。</li>\n</ul>\n<p>对应的重要性顺序依次为：页面作者样式 &gt; 用户样式 &gt; 用户代理样式</p>\n<p>更详细的来源重要性比较，可以参阅 <em>MDN</em>：<em><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade\">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade</a></em></p>\n<p>我们来看一个示例。</p>\n<p>例如现在有<strong>页面作者样式表</strong>和<strong>用户代理样式表</strong>中存在属性的冲突，那么会以作者样式表优先。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span> : red;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-064222.png\" alt=\"image-20220813144222152\"></p>\n<p>可以明显的看到，作者样式表和用户代理样式表中同时存在的 display 属性的设置，最终作者样式表干掉了用户代理样式表中冲突的属性。这就是第一步，根据不同源的重要性来决定应用哪一个源的样式。</p>\n<h4 id=\"比较优先级\"><a href=\"#比较优先级\" class=\"headerlink\" title=\"比较优先级\"></a>比较优先级</h4><p>那么接下来，如果是在在同一个源中有样式声明冲突怎么办呢？此时就会进行样式声明的优先级比较。</p>\n<p>例如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.test</span> <span class=\"selector-tag\">h1</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，同属于<strong>页面作者样式</strong>，源的重要性是相同的，此时会以选择器的权重来比较重要性。</p>\n<p>很明显，上面的选择器的权重要大于下面的选择器，因此最终标题呈现为 <em>50px</em>。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2021-09-16-071546.png\" alt=\"image-20210916151546500\" style=\"zoom: 40%;\" />\n\n<p>可以看到，落败的作者样式在 <em>Elements&gt;Styles</em> 中会被划掉。</p>\n<p>有关选择器权重的计算方式，不清楚的同学，可以进入此传送门：<em><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity\">https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity</a></em></p>\n<h4 id=\"比较次序\"><a href=\"#比较次序\" class=\"headerlink\" title=\"比较次序\"></a>比较次序</h4><p>经历了上面两个步骤，大多数的样式声明能够被确定下来。但是还剩下最后一种情况，那就是样式声明既是同源，权重也相同。</p>\n<p>此时就会进入第三个步骤，比较样式声明的次序。</p>\n<p>举个例子：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，同样都是<strong>页面作者样式</strong>，<strong>选择器的权重也相同</strong>，此时位于下面的样式声明会层叠掉上面的那一条样式声明，最终会应用 <em>20px</em> 这一条属性值。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-23-103928.png\" alt=\"image-20220823183928330\"></p>\n<p>至此，样式声明中存在冲突的所有情况，就全部被解决了。</p>\n<h3 id=\"使用继承\"><a href=\"#使用继承\" class=\"headerlink\" title=\"使用继承\"></a>使用继承</h3><p>层叠冲突这一步完成后，解决了相同元素被声明了多条样式规则究竟应用哪一条样式规则的问题。</p>\n<p>那么如果没有声明的属性呢？此时就使用默认值么？</p>\n<p><em>No、No、No</em>，别急，此时还有第三个步骤，那就是使用继承而来的值。</p>\n<p>例如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，我们针对 div 设置了 color 属性值为红色，而针对 p 元素我们没有声明任何的属性，但是由于 color 是可以继承的，因此 p 元素从最近的 div 身上继承到了 color 属性的值。</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065102.png\" alt=\"image-20220813145102293\"></p>\n<p>这里有两个点需要同学们注意一下。</p>\n<p>首先第一个是我强调了是<strong>最近的</strong> div 元素，看下面的例子：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: blue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-065653.png\" alt=\"image-20220813145652726\"></p>\n<p>因为这里并不涉及到选中 p 元素声明 color 值，而是从父元素上面继承到 color 对应的值，因此这里是<strong>谁近就听谁</strong>的，初学者往往会产生混淆，又去比较权重，但是这里根本不会涉及到权重比较，因为压根儿就没有选中到 p 元素。</p>\n<p>第二个就是哪些属性能够继承？</p>\n<p>关于这一点的话，大家可以在 MDN 上面很轻松的查阅到。例如我们以 text-align 为例，如下图所示：</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070148.png\" alt=\"image-20220813150147885\"></p>\n<h3 id=\"使用默认值\"><a href=\"#使用默认值\" class=\"headerlink\" title=\"使用默认值\"></a>使用默认值</h3><p>好了，目前走到这一步，如果属性值都还不能确定下来，那么就只能是使用默认值了。</p>\n<p>如下图所示：</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-070825.png\" alt=\"image-20220813150824752\"></p>\n<p>前面我们也说过，一个 HTML 元素要在浏览器中渲染出来，必须具备所有的 CSS 属性值，但是绝大部分我们是不会去设置的，用户代理样式表里面也不会去设置，也无法从继承拿到，因此最终都是用默认值。</p>\n<p>好了，这就是关于 CSS 属性计算过程的所有知识了。</p>\n<img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-14-154655.png\" alt=\"image-20220814234654914\" style=\"zoom:33%;\" />\n\n\n\n<h3 id=\"一道面试题\"><a href=\"#一道面试题\" class=\"headerlink\" title=\"一道面试题\"></a>一道面试题</h3><p>好了，学习了今天的内容，让我来用一道面试题测试测试大家的理解程度。</p>\n<p>下面的代码，最终渲染出来的效果，a 元素是什么颜色？p 元素又是什么颜色？</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>大家能说出为什么会呈现这样的结果么？</p>\n<p>解答如下：</p>\n<p><img src=\"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-08-13-071941.png\" alt=\"image-20220813151941113\"></p>\n<p>实际上原因很简单，因为 a 元素在用户代理样式表中已经设置了 color 属性对应的值，因此会应用此声明值。而在 p 元素中无论是作者样式表还是用户代理样式表，都没有对此属性进行声明，然而由于 color 属性是可以继承的，因此最终 p 元素的 color 属性值通过继承来自于父元素。</p>\n<p>你答对了么？-）</p>\n<hr>\n<p>-<em>EOF</em>-</p>\n","popularPost_tmp_postPath":true,"eyeCatchImage":"http://mdrs.yuanjin.tech/img/202208092057573.png","popularPost_tmp_gaData":{"updated":"Sun Jan 21 2024 20:47:06 GMT+0800 (中国标准时间)","title":"前端+","path":"2023/07/07/前端/","eyeCatchImage":"http://mdrs.yuanjin.tech/img/202208092057573.png","excerpt":null,"date":{"_isAMomentObject":true,"_i":"2023-07-07T10:31:49.000Z","_isUTC":false,"_pf":{"empty":false,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":false,"invalidEra":null,"invalidMonth":null,"invalidFormat":false,"userInvalidated":false,"iso":false,"parsedDateParts":[],"era":null,"meridiem":null,"rfc2822":false,"weekdayMismatch":false},"_locale":{"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"_longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"_invalidDate":"Invalid date","_dayOfMonthOrdinalParse":{},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"_months":["January","February","March","April","May","June","July","August","September","October","November","December"],"_monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"_week":{"dow":0,"doy":6},"_weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"_weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"_weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"_meridiemParse":{},"_eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"_abbr":"en","_config":{"calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"invalidDate":"Invalid date","dayOfMonthOrdinalParse":{},"relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"week":{"dow":0,"doy":6},"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"meridiemParse":{},"eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"abbr":"en"},"_dayOfMonthOrdinalParseLenient":{}},"_d":"2023-07-07T10:31:49.000Z","_isValid":true,"_z":null},"pv":0,"totalPV":0,"categories":"","tags":["前端"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"从51到32","date":"2023-07-08T01:52:35.000Z","plugins":["mathjax"],"_content":"\n## c语言程序入门应用\n\n### 关键字与数据类型\n![image](/img/2023-07-08101610.png)\n\n#include => 包含头文件  \n**头文件预处理在源文件与编译器之间**  \n#define => 宏定义  \n一般在头部，将c中某关键字进行替换\n\n\n![ima](/img/20230708102636.jpg)\n>32个关键字，编译器预先定义了有一定物理意义的字符串 =>不同编译器有不>同的定义sizeof 也是关键字:查看变量在内存空间中容量的工具，用法sizeof(变量)通>过关键字定义的不同数据类型的变量，限制变量 (资源)的大小(e.g.4字节，2字节...)\n\n![imag](/img/2023-07-08102810.png)\n\nc中的数据类型有明确规范，无论输入还是输出都要标明\n\n>    %d 十进制有符号整数  \n>    %u 十进制无符号整数  \n>    %f 浮点数  \n>    %s 字符串  \n>    %c 单个字符  \n>    %p 指针的值  \n>    %e 指数形式的浮点数  \n>    %x, %X 无符号以十六进制表示的整数  \n>    %o 无符号以八进制表示的整数  \n>    %g 把输出的值按照 %e 或者 %f 类型中输出长度较小的方式输出  \n>    %p 输出地址符  \n>    %lu 32位无符号整数  \n>    %llu 64位无符号整数  \n>    %% 输出百分号字符本身。   \n\n>    除了格式化说明符之外，printf() 函数还支持一些标志和选项，用于控制输出的精度、宽度、填充字符和对齐方式等。  例如：\n>    %-10s：左对齐并占用宽度为 10 的字符串；\n>    %5.2f：右对齐并占用宽度为 5，保留两位小数的浮点数；\n>    %#x：输出带有 0x 前缀的十六进制数。\n\n\n### 局部变量、全局变量、静态变量\n对于单一文件而言的:局部变量、全局变量、静态变量\n>局部变量:定义在函数内部的变量=>代码块作用域\n>全局变量:定义在函数外部的变量=>文件作用域\n>静态变量:有static修饰的变量\n有很多种组合，不需要都搞清楚，等遇到了再分析: where (可见性)?& static (生命周期)?\n\n下面这个例子很好的展示了这一点并且展示了冒泡排序\n**示例**\n``` c\n#include<stdio.h>\n\nint main()\n{\n    int class[10];\n    for (int i = 0; i < 10; i++) // 循环输入10次\n    {\n        scanf(\"%d\",&class[i]);\n    }\n    printf(\"你输入了：\");\n    for (int j = 0; j < 10; j++) //遍历数组并输出\n    {\n        printf(\"%d \",class[j]);\n    }\n    for (int i = 0; i < 10; i++) //冒泡排序\n    {\n        for (int j = 0; j < 10; j++)\n        {\n            if (class[j+1]>class[j])\n            {\n                int null = class[j];\n                class[j] = class[j+1];\n                class[j+1] = null;\n            }\n        }\n    }\n    printf(\"\\n\");\n    for (int j = 0; j < 10; j++) //遍历排序好的数组并输出\n    {\n        printf(\"排第%d的数是%d\\n\",j+1,class[j]);\n    }\n    \n}\n```\n卧槽无语了，刚开始写的博客，这个代码应该是上一章节的\n\n\n### 数组\n\n例：char a[num]={……}\n\n**当char中使用中文时，应该是二维数组**\n```bash\nchar wday[7][7] = {\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\",\"星期天\"};\n```\n\n**注意事项**\n>int a[]={……}; 可以在定义的时候给出初始值。可省略。  \n>int b[][5]={...}; 同上，但是第二个不能省略  \n>a[]=3; 这样做就不对了，里面没有定位，不能省略。  \n>b[][2]=2; 同上，不能省略。 a[x]=3；这样做也对，但是要保证变量x的值正确。C不会自动给你查越界。\n\n\n**以下例子很好的展示数组**\n``` c\n#include <stdio.h>\n\nvoid  main()\n{\n    int tick = 0; //0~86399\n    short mouth[12] = {31,29,31,30,31,30,31,31,30,31,30,31}; \n    short date; \n    short yue;\n    short week; \n    char wday[][7] = {\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\",\"星期天\"};\n    printf(\"请输入一个在 1~366 区间的数\\n\");\n    scanf_s(\"%d\", &tick); \n    week =  (tick+8)%7 ; //这个应该不会错的\n    date = tick;\n    for (int i = 0; i < 12; i++)  //依次遍历，一旦小于等于0，则该次遍历为月份\n    {\n      tick = tick - mouth[i];\n      if (tick<=0){yue=i+1;break;};\n    }\n    for (int j = 0; j < yue; j++) //遍历之后获得减掉前面月份天数的值，即为当月日期\n    {\n      date= date-mouth[j-1];\n    }\n    printf(\"当前日期为: 20-%02d-%02d-%s\\n\", yue, date, wday[week]);  \n}\n```\n### 枚举\n\n说实话还是不太理解\n\n枚举方法：\n\n1、先定义枚举类型，再定义枚举变量\n``` c\nenum DAY\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n};\nenum DAY day;\n```\n这里的DAY是枚举名\n\n2、定义枚举类型的同时定义枚举变量\n``` c\nenum DAY\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n} day;\n```\n\n3、省略枚举名称，直接定义枚举变量\n``` c\nenum\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n} day;\n```\n可以使用typedef定义别名\n``` c\ntypedef enum\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n} day;\nday day1 day2;\n```\n其中day是这个枚举名的别名，提高代码可读性\n\n下面这串代码很好的展示了枚举的应用\n\n``` c\n#include <stdio.h>\n \nenum DAY\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n};\n \nint main()\n{\n    enum DAY day;\n    day = WED;\n    printf(\"%d\",day);\n    return 0;\n}\n```\n\n**枚举经常与switch一同使用**\n下面的代码展示了这种情况\n``` c\n#include <stdio.h>\n#include <stdlib.h>\nint main()\n{\n \n    enum color { red=1, green, blue };\n \n    enum  color favorite_color;\n \n    /* 用户输入数字来选择颜色 */\n    printf(\"请输入你喜欢的颜色: (1. red, 2. green, 3. blue): \");\n    scanf(\"%u\", &favorite_color);\n \n    /* 输出结果 */\n    switch (favorite_color)\n    {\n    case red:\n        printf(\"你喜欢的颜色是红色\");\n        break;\n    case green:\n        printf(\"你喜欢的颜色是绿色\");\n        break;\n    case blue:\n        printf(\"你喜欢的颜色是蓝色\");\n        break;\n    default:\n        printf(\"你没有选择你喜欢的颜色\");\n    }\n \n    return 0;\n}\n```\n**补充**\n>在所有教科书与c规范中，switch都是不允许case后接范围的，但是GNU C进行了扩展\n>可以使用case min ... max这种用法表示范围（英文句号，前后有空格）\n\n示例\n``` c\n#include<stdio.h>\n\nint main(){\n    int i;\n    scanf( \"%d\",&i);\n    switch (i)\n    {\n    case 1 ... 3:\n        printf(\"niubi\\n\");\n        break;\n    \n    default:\n        break;\n    }\n}\n```\n\n### 指针\n\nC语言中几乎最重要的地方来了，难度较大，必须掌握\n\n#### 指针是什么\n``` c\n#include <stdio.h>\n \nint main ()\n{\n    int var_runoob = 10;\n    int *p;              // 定义指针变量\n    p = &var_runoob;\n \n   printf(\"var_runoob 变量的地址： %p\\n\", p);\n   return 0;\n}\n```\n\n![image](/img/c-pointer.png)\n\n&取址*取值\n![image](/img/20230710103743.png)\n\n**数组名即指针！！**\n![image](/img/20230710105357.png)\n\n指针控制数组\n![image](/img/20230710110332.png)\n\n#### 数组与指针\n关于指针，内含的奥妙非常多，其中非常知名的就是数组即指针  \n**数组是指针的另一种表示**  \n我们可以这么看：\n~~~c\nint main()\n{\n    char a[3]= \"123\";\n    printf(\"%c\",*(a+2));\n}\n~~~\n在这里面定义了一个字符串数组，但是我调用他的方式却是使用了指针  \n数组名就是一个指针常量，这里**a**的值是数组a[3]的首元素的地址  \n于是，我们可以这样：\n```c\nint main()\n{\n    char *a = \"123\";\n    printf(\"%c\",a[2]);\n}\n```\n与上面的代码并不会出现差别\n\n#### 多重指针\n可以定义一个指向指针的指针\n```c\nint main()\n{\n    int a = 1;\n    int *p = &a;\n    int **p2 = &p;\n}\n```\n以此为准可以不断叠加指针，完成许多复杂的功能\n\n### 结构体\n\n与枚举有点相似\n为了使有关联性的变量变得更加易控，也为了提高可读性，结构体因此而生\n\n结构体定义\n```c\nstruct  Stuructstudent{\n    int num;\n    char name;\n    char sex;\n    int age\n};//声明结构体\nStructstudent student1;//定义变量\n```\n>实际上结构体就是一种数据类型，只不过是由程序员自己定义的\n>在实际生活中，我们会有各种各样的数据类型，如图书的名、ISBN、价格等可以集合为一个数据类型\n\n```c\nint main()\n{\n    struct book{\n        int isbn;\n        char name[10];\n        double price;\n    };\n    book b3= {\"活着\",111111111,39};\n}\n```\n\n**注意**\n>需要注意的是，结构体中内存的分配是由结构体的中定义的变量占用的内存决定的\n>但是但是它却遵循整除内存原则，如上述的代码中\n>首先，计算机会找到一个可以被4（int的长度）整除的内存地址（如2000）\n>然后在2004后面找到可以被10（name数组的长度）整除的地址（如2010）\n>最后在在2020后面找到可以被8（double的长度）整除的地址（如2024）\n>最后还要将首末相连空隙进行填充，一共是32字节的长度，整体的长度还必须是结构里最大数据类型的长度的整数倍（这里是double的长度8的整数倍）\n>如果不是还要在后面进行填充（假如是36，就要填充到40）\n>所以在结构体中数据类型的定义的先后十分重要\n>在上述代码中只需要将isbn和name调换顺序就只需要24字节的空间   \n\n\n\n## 51单片机\n\n### 硬件设备与软件环境\n\n**单片机**\n- stc89c52rc  \n\n**软件环境**\n- [Visual studio code + Embedded IDE + keil c](https://blog.gavinccc.com//2024/01/28/VScode配置C51环境/)  \n(点击跳转部署教程)\n**外设**\n- 按钮*3\n- 4位数码管*1\n- led*4\n- 蜂鸣器*1\n- 看门狗*1\n- 12mhz晶振\n- usbin\n\n**注意**\n>看芯片手册是一个非常重要的习惯\n>我们做的无非就是复现手册的内容而已\n>此篇章只保留作者认为重要的单片机知识\n\n### IO口的使用\n\n无需多言，上代码\n```c\n#include <REG52.H>\n#include \"Delay.h\"\n\nsbit led1=P2^4;\nsbit led2=P2^5;\nsbit led3=P2^6;\nsbit led4=P2^7;\n\nvoid main()\n{\n    while(1){\n        led1 = 0;\n        Delay(500);\n        //led1 = 1;\n        led2 = 0;\n        Delay(500);\n        //led2 = 1;\n        led3 = 0;\n        Delay(500);\n        //led3 = 1;\n        led4 = 0;\n        Delay(500);\n        //led4 = 1;\t\t\t\t\n        led1 = 1;\n        Delay(500);\n        //led1 = 1;\n        led2 = 1;\n        Delay(500);\n        //led2 = 1;\n        led3 = 1;\n        Delay(500);\n        //led3 = 1;\n        led4 = 1;\n        Delay(500);\n        //led4 = 1;\n    }\n\t\n}\n```\n这是最简单的led流水灯效果，所有入门51的必备\nIO口的控制流程如下\n1.查看需要控制的外设的对应单片机的引脚\n2.使用sbit定义引脚名（如led1）\n3.为引脚编写1或0来控制引脚\n\n### 按键的防抖\n\n我甚至不知道要不要给它单独开一个章节  \n\n>我们使用按钮的时候一般使用判断  \n```c\nwhile(1){\n    if（key1 == 1）{\n        //代码区\n    }\n}\n```\n>然而造成的结果是，我们明明只想要一次运行，但是由于单片机速度太快，会造成非常多次运行\n>因此，我们需要防抖\n```c\nwhile(1){\n    if(key1 == 1){\n        delay(20);//延迟看个人而定\n        if(key1 == 1){\n        //代码区\n        }\n    }\n}\n```\n只需要一个简单延迟函数就完成了防抖\n\n**注意**\n>不过，在较为大的工程中，延迟非常容易造成工程总体运行的堵塞情况\n>同时，延迟也无法很好的避免多次运行的问题\n>因此，在后续的工程开发中我们使用外部中断来实现按钮功能\n>外部中断是异步的（异步是计算机与电子信息中非常重要的概念）\n\n### 数码管显示\n\n数码管实现原理：请回顾数字电路技术课程\n\n无需多言，上代码\n\n```c\n#include <REGX52.H>\n#include \"Delay.h\"\n\nsbit key1=P3^2;\nsbit key2=P3^3;\nsbit key3=P3^4;\n\n//数码管段码表\nunsigned char NixieTable[]={0x03,0x9F,0x25,0x0D,0x99,0x49,0x41,0x1F,0x01,0x09};\n\n\n\n//数码管显示子函数\nvoid Nixie(unsigned char Location,Number)\n{\n\t\n\t\tswitch(Location)\t\t//位码输出\n\t{\n\t\tcase 1:P2=0x7;break;\n\t\tcase 2:P2=0xB;break;\n\t\tcase 3:P2=0xD;break;\n\t\tcase 4:P2=0xE;break;\n\t}\n\tP0=NixieTable[Number];\t//段码输出\n\tDelay(1);\t\t\t\t//显示一段时间\n\tP0=~0x0;\t\t\t\t//段码清0，消影\n}\n\nvoid main()\n{\n\t\tunsigned char x = 0;\n\t\tunsigned char y = 0;\n\t\tunsigned char z = 0;\n\twhile(1)\n\t{\n\t\tif(key1 ==0)\n\t\t{\n\t\t\tDelay(80);\n\t\t\tif(key1 == 0)\n\t\t\t{\n\t\t\t\tx++;\n\t\t\t\tif(x>9)\n\t\t\t\t{\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty++;\n\t\t\t\t\tif(y>9)\n\t\t\t\t\t{\n\t\t\t\t\t\ty=0;\n\t\t\t\t\t\tz++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tNixie(1,1);\t\t//在数码管的第1位置显示1\n//\t\tDelay(20);\n\t\tNixie(2,2);\t\t//在数码管的第2位置显示2\n//\t\tDelay(20);\n\t\tNixie(3,3);\t\t//在数码管的第3位置显示3\n//\t\tDelay(20);\n\t\tNixie(4,4);\t\t//在数码管的第4位置显示4\n//\t\tDelay(20);\n\t}\n}\n```\n**流程**\n1.弄清楚每个数字对应在数码管上的位置\n2.位置的二进制表示\n3.二进制转16进制\n4.每一个数码管的启动方式（需让其他数码管关，否则出现全亮，使用延迟实现单独亮）\n5.打包成函数，方便调用\n\n### 外部中断\n\n#### 外部中断的定义与产生机理\n\n**定义**\n>外部中断是单片机实时地处理外部事件的一种内部机制。当某种外部事件发生时，单片机的中断系统将迫使CPU暂停正在执行的程序，转而去进行中断事件的处理；中断处理完毕后．又返回被中断的程序处，继续执行下去。  \n\n换而言之\n\n>我外部中断只要一开，你单片机就先把手中的事放放，先办我的事（领导既视感）  \n\n**产生机理**\n>单片机在自主运行时一般是在执行一个死循环程序，在没有外界干预(输入信号)时它基本处于一个封闭状态。比如一个电子时钟，它会按时、分、秒的规律自主运行并通过输出设备(如液晶显示屏)把时间显示出来。在不需要对它进行调校时它不需要外部干预，自主封闭地运行。如果这个时钟足够准确而又不掉电的话，它可能一直处于这种封闭运行状态。但事情往往不会如此简单，在时钟刚刚上电或时钟需要重新校准．甚至时钟被带到不同时区的时候，就需要重新对时钟进行调校，这时就要求时钟必须具有调校功能。因此单片机系统往往又不会是一个单纯的封闭系统．它有些时候恰恰需要外部的干预，这也就是外部中断产生的根本原因。  \n\n>在没有干预的情况下，单片机的程序在封闭状态下自主运行，如果在某一时刻需要响应一个外部事件(比如有按键按下)，这时就会用到外部中断。具体来讲，外部中断就是在单片机的一个引脚上，由于外部因素导致了一个电平的变化(比如由高变低)，而通过捕获这个变化，单片机内部自主运行的程序就会被暂时打断，转而去执行相应的中断处理程序，执行完后又回到原来中断的地方继续执行原来的程序。这个引脚上的电平变化，就申请了一个外部中断事件，而这个能申请外部中断的引脚就是外部中断的触发引脚。  \n\n以上来源于科普中国\n\n#### 外部中断的使用\n\n以代码来解释\n\n```c\n#include <REG52.H>\n\nsbit LED1 = P2^4;\nsbit BEEP = P1^0;\n\nvoid Delay(unsigned int xms)\n{\n\tunsigned char i, j;\n\twhile(xms--)\n\t{\n\t\ti = 2;\n\t\tj = 239;\n\t\tdo\n\t\t{\n\t\t\twhile (--j);\n\t\t} while (--i);\n\t}\n}\n\n\nvoid InitInterrupt()\n{\n\tIT0 = 0;//低电平触发\n\tEX0 = 1;//外部中断1启动\n\tPX0 =1;//外部中断1优先级高\n\t\n\tEA= 1;//总中断\n}\n\nint main()\n{\n\tInitInterrupt();\n\twhile(1)\n\t{\n\t\tBEEP = 1;\n\t\tDelay(10);\n        BEEP = 0;     \n\t}\n}\n\nvoid openled1() interrupt 0\n{\n\tLED1 = 0;\n\tBEEP = 0;\n}\n```\n这个代码不按按钮的话就会持续的蜂鸣器开关，只要一按就会实现一直开\n>只要按钮一按，中断启动，你主程序，往后稍稍，先干活先搞我的  \n\n>在函数后面加上interrupt 0表示这个函数是外部中断1中断时运行的函数\n>interrupt后面的数字，根据下面的表格的中断编号\n\n|中断编号| 中断名称 |中断请求标志位|中断允许控制位|触发条件|\n|:-----:|:------:|:---:|:----:|:-----------:|\n|   0   |外部中断0|IE0|EX0|中断0对应的引脚检测到下降沿或低电平|\n|1|定时器0|TF0|ET0|定时器0溢出|\n|2|外部中断1|IE1|EX1|中断1对应的引脚检测到下降沿或低电平|\n|3|定时器1|TF1|ET1|定时器1溢出|\n|4|串口中断|RI,TI|ES|串口接收或发送一帧数据|\n|5|定时器2|TF2|ET2|定时器2溢出|\n|6|外部中断2|IE2|EX2|中断2对应的引脚检测到下降沿或低电平|\n|7|外部中断3|IE3|EX3|中断3对应的引脚检测到下降沿或低电平|\n\n#### 中断优先级\n\n优先级在代码里面也有注释，使用PX0就可以让外部中断0优先级变高\n\n>默认的优先级是按照中断编号从小到大依次递减的\n>PX(X)H、PX(X)可以定义外部中断优先级\n>PT(X)H、PT(X)可以定义定时器优先级\n>PSH、PS可以定义串口优先级\n\n### 定时器\n\n#### 定时器工作原理\n\n**和外部中断一样，定时器也是异步的**\n>定时器的执行，，不会依靠cpu的资源，它是独立运行的，独立于cpu的外部计数器，它的计数时长依赖于时钟周期，时钟周期是晶振频率的倒数（计数的间隔的时长的来源），通过设定不同的初值实现不同的时间间隔  \n\n\n和外部中断一样，它的也是异步的，运行完至后可以产生中断，这样，就可以实现非阻塞式的延迟（在主进程中延迟会阻碍其他函数的运行）  \n\n\n>就像你正在吃饭，一边又在给水桶里放水，吃着吃着，水满了，你就得赶快去把水龙头关掉或者换一个空的水桶，再回来吃饭。\n>单片机的定时器就像是一个水桶，你让它启动了，也就是水龙头打开了；开始装水了；定时在每个机器周期不断自动加 1，最后溢出了；水桶的水不断增加，最也就满出来了；定时器溢出时，你就要去做处理了；水桶的水满了，你也应该处理一下了；处理完后，单片机又可以回到刚刚开停止的地方继续运行；水桶处理了，先前你在做什么也可以继续去做什么了。\n\n\n\n#### 计数初值与计时时长\n\n在单片机中，计数初值与计数时长之间的关系可以通过计时器的工作原理来解释。通常情况下，计时器是由一个时钟源提供时钟脉冲，计数器根据这些脉冲进行计数。计数初值决定了计数器的初始值，而计数时长则是计数器从初始值开始计数到达最终值所经过的时钟脉冲数。\n\n假设计数器的时钟源频率为 $$ (f_{clk}) $$，计数初值为$$ (N_{initial}) $$，计数器的最大计数值为$$ (N_{max}) $$，那么计数时长$$ (T) $$与计数初值$$ (N_{initial}) $$之间的关系可以用下面的公式表示：\n\n$$\n[ T = \\frac{(N_{max} - N_{initial} + 1)}{f_{clk}} ]\n$$\n\n\n**然而我们定义计数初值有tl和th而且是使用16进制，这该怎么计算呢？**\n  \n跟着我的步骤，轻松算出来！\n>1.将 TH 和 TL 合并为一个16位的值，假设 TH 为高8位，TL 为低8位。\n>2.将这个16位的值转换为10进制，得到计数初值的实际数值。\n>3.使用计数初值的实际数值代入计时器的时钟频率，根据时钟频率计算出对应的时间。\n\n如果时钟频率是12MHz，那么使用之前提到的计数初值 TH 和 TL，合并为 16 位的值，然后将其转换为10进制。假设合并后的值为 0xABCD（TH 为 0xAB，TL 为 0xCD），那么按照之前的步骤，将 0xABCD 转换为10进制。得到43981。\n\n接着，使用时钟频率 12MHz（12,000,000Hz），可以使用以下公式计算对应的时间：\n$$\n[ T = \\frac{65536 - 43981}{12,000,000} ]\n$$\n这将给出计数初值对应的时间，单位为秒。    \n\n#### 定时器的使用\n\nok话不多说上代码！！！\n\n```c\n#include <REG52.H>\n\nsbit led1 = P2^4;\nsbit beep = P1^0;\nsbit key1=P3^2;\n\n//数码管段码表\nunsigned char NixieTable[]={0x03,0x9F,0x25,0x0D,0x99,0x49,0x41,0x1F,0x01,0x09};\n\nunsigned char x = 0;\nunsigned char y = 60;\n\nvoid Delay(unsigned int xms)\n{\n\tunsigned char i, j;\n\twhile(xms--)\n\t{\n\t\ti = 2;\n\t\tj = 239;\n\t\tdo\n\t\t{\n\t\t\twhile (--j);\n\t\t} while (--i);\n\t}\n}\n\n//数码管显示子函数\nvoid Nixie(unsigned char Location,Number)\n{\n\t\n\t\tswitch(Location)\t\t//位码输出\n\t{\n\t\tcase 1:P2=0x7;break;\n\t\tcase 2:P2=0xB;break;\n\t\tcase 3:P2=0xD;break;\n\t\tcase 4:P2=0xE;break;\n\t}\n\tP0=NixieTable[Number];\t//段码输出\n\tDelay(1);//显示一段时间\n\tP0=~0x0;\t\t\t\t//段码清0，消影\n}\n\n\nvoid InitInterrupt()\n{\n\tIT0 = 0;\n\tEX0 = 1;\n\tPX0 =1;\n\t\n\tET0 = 1;\n\tEA = 1;\n}\n\nvoid openled1() interrupt 0\n{\n\ty = 60;\n}\n\nvoid timer()\n{\n\tTMOD = 0x01;\n\tTH0 = 0xFC;\n\tTL0 = 0x18;\n\tTR0 = 1;\n}\n\nvoid timerhandle() interrupt 1\n{\n\n\tunsigned int icount;\n\tTH0 = 0xFC;\n\tTL0 = 0x18;\n\t\n\ticount++;\n\tif(icount >= 1000)\n\t{\n\t\ticount = 0;\n\t\ty--;\n\t\tif(y == 0)\n\t\t{\n\t\t\ty = 0;\n\t\t    beep = 0;\n\t\t}\n\t\t\n\t}\n}\n \nvoid main()\n{\n\tInitInterrupt();\n\ttimer();\n\twhile(1)\n  {\n\t\tNixie(1,0);\t\t//在数码管的第1位置显示1\n\t\tNixie(2,0);\t\t//在数码管的第2位置显示2\n\t\tNixie(3,y/10);\t\t//在数码管的第3位置显示3\n\t\tNixie(4,y%10);\t\n  }\n}\n```\n该代码实现了一个简单的秒表（虽然只有秒针）  \n\n这里计数应该是1毫秒的时间间隔，使用icount变量的累加实现1秒  \n\ninterrupt 1所在的函数就是定时器计数溢出函数  \n\nTMOD定义了该定时器为工作模式1，16位计数器  \n\n**学到这，参透这个代码是起码的**\n\n\n#### 快速计算定时时长\n\n根据上面的公式，我们可以算出需要定时的时长，可是，我懒啊，算不了了啊，脑子不够啊\n**其实，硬件公司都做好了，我们直接用就好了**\n\n**懒人启动器，启动！**\n\n以这个单片机的公司为例，人家早就把定时器的计算接口放在烧录软件了\n\n我们打开烧录软件，点开这个按钮**定时器计算器**就可以看到以下画面\n\n![image](../img/stc定时器.png)    \n\n\n**嘿嘿，只要我们轻轻的点几个按钮，就可以生成对应时长的代码了**  \n\n\n![image](../img/stc.jpg)     \n\n**值得注意的是，单片机型号、时钟频率不要选错哦**\n\n对了，我们这个单片机集成板的晶振是12mhz的\n\n### 串口通信\n\n嗨，好多呀写不下去了累死了\n\n#### 并行通信与串行通信\n\n##### 并行通信 \n\n当我们在一个机器传一个数据给另外一个机器的时候,我们是怎么传的呢？\n>你可能第一时间想到计算机是二进制的，我们要先将数据转为二进制*（编码，请回顾数电课程）*，这是对的\n>比如一个数字9，二进制表示为1001，我们要传1001  \n\n我们怎么传1001呢？\n>你可能会想到，诶！拿4条线把2个机器接起来，同一时间内，低电平表示0，高电平表示1，这样，就可以把1001作为电平信号传过去了，只要在另外的机器将二进制转为十进制*（译码，请回顾数电课程）*即可。  \n\n那么，恭喜你，你已经理解了并行通信\n\n![image](../img/bx.png)\n\n如上图所示，只要将1001按顺序放在D1,D2,D3,D4即可，需要注意的是，必须要同一时段发送与接收\n这就是并行通信，速度快，好理解\n但是问题也接踵而来\n**如果我要发送非常多的数据，岂不是要非常多的线？**\n我哪有这么多钱买线\n**因此，串行通信！**\n\n\n##### 串行通信\n\n为了解决线路多，不好操控的问题，串行通信应运而生，什么是串行通信呢，其实就是一条线传多个数据\n好的，你来想想怎么实现一条数据线怎么传多个数据呢？  \n\n>你可能会想到，欸一段时间只传一位数据不就好了吗，然后一直传，直到传完，比如传1001.我就先传一个1，然后再传两个0，最后来个1完事，接收端再拼成一整个1001即可  \n\n这么看，你真的是天才，你又把串行通信给领悟了\n\n>整体思路就是这样了，只要固定好每一位数据的发送时间，接收端按照约定好的时间接收数据，即可完成通信\n\n![image](../img/cx.png)\n\n如图所示，将1001放在D数组中，一位一位的发送，一位一位的接收，即可完成通信\n同步和异步串行通信的区别是异步没有时钟线\n需要注意的是，每一位发送的时间间隔必须相同\n\n#### 单工、半双工、全双工数据传输\n\n**单工**\n>一条线，单方向传输  \n\n**半双工**\n>一条线，双方向传输  \n\n**全双工**\n>单方向传输，但是两条线\n\n#### UART协议\n\nUART协议就是串口通信的协议，是异步串行全双工通信协议\n\n1.异步性： UART是一种异步协议，即发送和接收端不共享时钟信号。相对于同步协议，UART不需要发送和接收端保持精确的时钟同步，因此更为灵活。\n\n2.数据帧： UART通信以数据帧的形式传输数据。数据帧包括起始位（Start Bit）、数据位（通常为8位，可以是5到9位）、可选的奇偶校验位（Parity Bit，用于错误检测）、停止位（Stop Bit）。起始位和停止位的作用是标识数据帧的开始和结束。\n\n3.波特率： 波特率（Baud Rate）是衡量UART通信速率的单位，表示每秒传输的比特数。波特率定义了数据信号的传输速率，发送和接收端必须使用相同的波特率才能正常通信。\n\n4.起始位和停止位： 起始位通常是逻辑 0，用于指示数据帧的开始。停止位是逻辑 1，用于指示数据帧的结束。数据帧的每一位都以起始位开始，以停止位结束。\n\n**数据传输流程：**\n\n>发送端：将数据位、奇偶校验位、起始位和停止位按照帧的格式组成数据帧，通过TXD发送。\n>接收端：通过检测RXD起始位的开始，开始接收数据。接收端根据帧的格式提取数据位、奇偶校验位、停止位等信息。\n\n![image](../img/uart.png)\n\n知道这些东西，我们就可以想象一下传输的过程了\n\n>1.固定好时间间隔，也就是固定好波特率\n>2.发送起始位\n>3.根据数据发送数据的每一位\n>4.发送结束位表示发送结束\n\n>假设我要发送115\n首先我们将115转化为二进制，即01110011\n使用代码设定好波特率\n给发送0表示开始发送（就是将TXD设为0）\n时间宽度走完后给TXD设为1（01110011的第一位）一个时间宽度\n重复8次这个过程（每一次的TXD的值换到下一位）\n8次后发送1（将TXD设为1）表示结束\n\n![image](../img/uart1.png)\n\n恭喜恭喜，串口通信也给我们造出来了，可以自己做一个串口了\n\n**不过再stc89c52rc中没这么麻烦，已经有现成的uart模块给我们使用了**\n\n#### 串口中断的使用\n\n首先是串口初始化和定义\n\n```c\nstatic void inituart()\n{\n\t\n\tSCON = 0x50;\\\\串口工作模式\n\tTMOD = 0x20;\\\\定时器工作模式\n\tPCON = 0X80;\\\\波特率翻倍\n\tTL1 = 0XF3;\\\\设定定时初值\n\tTH1 = TL1;\n\tTR1 = 1;\\\\定时器溢出标志开\n\t\n}\n\nstatic void initinterrupt()\n{\n\tIT0 = 1;\n\tEX0 = 1;\n\t\n\t\n\tES = 1;\n\tEA = 1;\n}\n\t\n```\n这个无需多言，注意波特率即可\n\n发送函数代码\n```c\nvoid uarthander( unsigned char sibuffer ) \n{\n\tSBUF = sibuffer;\n\twhile(!TI);\n    TI = 0;\n}\n\nvoid updatehander( char* str )\n{\n\twhile(*str)\n\t{\n\t\tuarthander(*str++);\n\t}\n}\n```\nSBUF是缓存区，SBUF被赋值，串口助手就会输出这个值\n这个代码也挺简单的，SBUF一次只能赋一个值，我们使用updatehander函数实现输出字符串\n调用这个函数就可以输出字符串\n\n接收函数代码\n\n```c\nchar recestring[10];  // 用于存储接收到的字符串，最大长度为10\nint i = 0;  // 记录当前接收到的字符在 recestring 数组中的索引\n\nvoid comhander() interrupt 4\n{\n    if (RI)\n    {\n        char w;\n        w = SBUF;  // 从串口缓冲区读取接收到的字符\n        recestring[i++] = w;  // 将字符存储到 recestring 数组中，并更新索引\n\n        if (w == '\\n')  // 如果接收到换行符 '\\n'，表示接收到一条完整的字符串\n        {\n            recestring[i] = '\\0';  // 在字符串末尾添加 null 终止符，形成一个C风格字符串\n            updatehander(recestring);  // 调用处理接收到字符串的函数\n            i = 0;  // 重置索引，准备接收下一条字符串\n        }\n\n        RI = 0;  // 清除接收中断标志位\n        TI = 0;  // 清除发送中断标志位\n    }\n}\n```\n定义了一个数组，每一次都将接收到的值放在数组中直到值是换行符的时候才会将其视为完整的字符串\n我们将接收和发送函数分开，这样就可以处理更多问题\n\n下面是我的示例工程\n\n```c\n#include <REG52.H>  // 包含8051单片机的寄存器定义头文件\n\nsbit led1 = P2^4;  // 定义 LED1 的引脚\nsbit led2 = P2^5;  // 定义 LED2 的引脚\nsbit led3 = P2^6;  // 定义 LED3 的引脚\nsbit led4 = P2^7;  // 定义 LED4 的引脚\n\nstatic char sib[4], a, b, c, d;  // 定义静态变量，用于存储串口接收的数据和数码管显示的数字\n\nvoid Delay(unsigned int xms)\n{\n\tunsigned char i, j;\n\twhile(xms--)\n\t{\n\t\ti = 2;\n\t\tj = 239;\n\t\tdo\n\t\t{\n\t\t\twhile (--j);\n\t\t} while (--i);\n\t}\n}\n\nunsigned char NixieTable[] = {0x03, 0x9F, 0x25, 0x0D, 0x99, 0x49, 0x41, 0x1F, 0x01, 0x09};  // 数码管对应数字的表格\n\nvoid Nixie(unsigned char Location, Number)\n{\n\tswitch(Location)  // 控制数码管的位置\n\t{\n\t\tcase 1: P2 = 0x7; break;\n\t\tcase 2: P2 = 0xB; break;\n\t\tcase 3: P2 = 0xD; break;\n\t\tcase 4: P2 = 0xE; break;\n\t}\n\tP0 = NixieTable[Number];  // 显示对应数字\n\tDelay(5);  // 延时\n\tP0 = ~0x0;  // 关闭数码管\n}\n\nstatic void inituart()\n{\n\tSCON = 0x50;  // 配置串口工作方式\n\tTMOD = 0x20;  // 配置计时器工作方式\n\tPCON = 0X80;  // 设置波特率倍增\n\tTL1 = 0XF3;  // 计时器1低位初始值\n\tTH1 = TL1;  // 计时器1高位初始值\n\tTR1 = 1;  // 启动计时器1\n}\n\nstatic void initinterrupt()\n{\n\tIT0 = 1;  // 外部中断0触发方式为下降沿触发\n\tEX0 = 1;  // 允许外部中断0\n\n\tES = 1;  // 允许串口中断\n\tEA = 1;  // 允许总中断\n}\n\nvoid uarthander(unsigned char sibuffer) \n{\n\tSBUF = sibuffer;  // 将数据发送到串口缓冲区\n\twhile (!TI);  // 等待发送完成\n    TI = 0;  // 清除发送中断标志位\n}\n\nvoid lightup(unsigned char byte)\n{\n\tif(byte == 1)\n\t{\n\t\tled1 = ~led1;  // 切换 LED1 状态\n\t}\n\tif(byte == 2)\n\t{\n\t\tled2 = ~led2;  // 切换 LED2 状态\n\t}\n\tif(byte == 3)\n\t{\n\t\tled3 = ~led3;  // 切换 LED3 状态\n\t}\n\tif(byte == 4)\n\t{\n\t\tled4 = ~led4;  // 切换 LED4 状态\n\t}\n}\n\nvoid updatehander(char* str)\n{\n\twhile(*str)\n\t{\n\t\tuarthander(*str++);  // 逐字符发送字符串到串口\n\t}\n}\n\nvoid handergo() interrupt 0\n{\n\tupdatehander(\"Hello,World\\n\");  // 外部中断0触发时发送 \"Hello,World\\n\" 到串口\n}\n\nunsigned char j = 0;\nstatic char w = '0';\n\nvoid abcd()\n{\n\ta = sib[0] - '0';  // 将字符转换为数字\n\tb = sib[1] - '0';  // 将字符转换为数字\n\tc = sib[2] - '0';  // 将字符转换为数字\n\td = sib[3] - '0';  // 将字符转换为数字\n}\n\nvoid comhander() interrupt 4\n{\n\tw = SBUF;  // 从串口缓冲区读取接收到的字符\n\tsib[j++] = w;  // 存储接收到的字符\n\t\n\tif(j >= 4)\n\t{\n\t\tj = 0;\n\t\tabcd();  // 处理接收到的字符，转换为数字\n\t}\n\tRI = 0;  // 清除接收中断标志位\n\n\tlightup(sib);  // 控制LED状态\n}\n\nvoid main()\n{\n\tinitinterrupt();  // 初始化中断\n\tinituart();  // 初始化串口\n\t\n\twhile(1)\n\t{\t\t\t\n\t\tNixie(1, b);\t\t\n\t\tNixie(2, c);\t\t\n\t\tNixie(3, d);\t\t\n\t\tNixie(4, a);  // 循环显示数字到数码管\n\t}\n}\n\n```\n这个代码完成了在串口助手输入4位数字，数码管显示这4位数字的功能\n简单吧，这就是内置uart的使用\n那么接下来，我们就得自己做一个串口了\n\n#### 模拟串口\n\n实际上就是根据uart协议的内容，自己写一个串口出来\n\n前文已经详细的说明了流程  \n>1.固定好时间间隔，也就是固定好波特率\n>2.发送起始位\n>3.根据数据发送数据的每一位\n>4.发送结束位表示发送结束  \n\n话不多说，上代码！\n\n串口初始化\n```c\nsbit RXD2 = P3^0;  // 定义串口接收引脚\nsbit TXD2 = P3^1;  // 定义串口发送引脚\nunsigned char buffer[20];  // 存储接收到的数据\nunsigned char getnum = 0;  // 接收数据的计数器\n\nvoid UartInit()  // 串口初始化函数，波特率：4800bps @ 12.000MHz\n{\n    TMOD = 0x20;  // 设置定时器模式\t\t\n    TH1 = 0x30;     \n    TL1 = 0x30;    \n    EA = 1;\n    ET1 = 1;\n    TF1 = 0;  // 清除TF1标志\n    TR1 = 1;  // 定时器1开始计时\n}\n\nvoid uart() interrupt 3\n{\n    if (TR1 == 1){\n        TH1 = 0x30;  // 波特率4800bps  \n        TL1 = 0x30;  // 定时器\n        TF1 = 0;\n    }\n}\n\nvoid waittf(){\n    while (TF1 == 0);//定时器溢出做延迟\n    TF1 = 0;\n}\n```\n\n发送函数\n```c\nvoid putdata(unsigned char str) \n{\n    int i = 8;\n    str = str + str;//由于波特率误差，发送的AscII码会小一半所以我直接加一倍\n    TR1 = 1;\n    TXD2 = 1;\n    waittf();\n    while (i--)\n    {\n        TXD2 = str & 0x01;\n        waittf();\n        str >>= 1;\n    }\n    TXD2 = 0;\n    waittf();\n    TR1 = 0;\n}\n\nvoid putdatastr(unsigned char *str)\n{\n    while (*str)\n    {\n        putdata(*str);  // 发送字符串中的每个字符\n        str++;\n    }\n}\n```\n>由于波特率误差，发送的AscII码会小一半所以我直接加一倍\n首先赋值TXD2为1为起始位\n随后使用waitf函数做时间间隔\n使用&0x01将值位赋值给TXD实现uart中的每一位数据位传输重复8次\n最后发送结束位  \n\n一样的道理，接收函数\n```c\nvoid getdata()\n{\n    unsigned char i = 0;\n    unsigned char str = 0x0;\n    if (RXD2 == 0)\n    {\n        TR1 = 1;\n        waittf();\n        while (i < 8)\n        {\n            str >>= 1;\n            if (RXD2 == 1)\n            {\n                str |= 0x80;\n            }\n            waittf();\n            i++;\n        }\n        buffer[getnum++] = str;  // 存储接收到的数据\n        TR1 = 0;\n    }\n    if(getnum == 20)\n    {\n        getnum = 0;\n    }\n}\n```\n>监控RXD，只要为0立马开始赋值\n起始位、传数据位\n监控到RXD不为0就结束接收\n其余流程与发送函数原理相同\n\n最后，附上main函数\n```c\nvoid main()\n{\n    unsigned char i = 0;\n    TXD2 = 0;  // 初始化串口发送引脚\n    UartInit();  // 初始化串口\n    while (1)\n    {\n        \n        if(RXD2 == 0)\n        {\n            int maxnum = 10;\n            while (maxnum--)\n            {\n                if (RXD2 == 0)\n                {\n                    getdata();  // 接收数据\n                    maxnum =  10;\n                }\n                \n            }\n        }\n        else{\n            if(buffer[0] != 0)\n            {\n                putdatastr(buffer);  // 发送接收到的数据\n                for(i = 0; i < 20; i++)\n                {\n                    if (buffer[i] != 0)\n                    {\n                        buffer[i] = 0;\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n                getnum = 0;\n                putdata(0x0d);  // 发送回车符\n                putdata(0x0a);  // 发送换行符\n            }\n        }\n    }\n}\n```\n\n这样，就实现了自己做一个模拟串口，关键在于调波特率\n需要十分准确才可以正常传输数据\n在51大作业篇，我会详细写明模拟串口接收时会与其他中断冲突导致乱码，在这里不进行过多的讨论","source":"_posts/从51到32.md","raw":"---\ntitle: 从51到32\ndate: 2023-07-08 09:52:35\ntags: C语言\nplugins:\n    - mathjax\n---\n\n## c语言程序入门应用\n\n### 关键字与数据类型\n![image](/img/2023-07-08101610.png)\n\n#include => 包含头文件  \n**头文件预处理在源文件与编译器之间**  \n#define => 宏定义  \n一般在头部，将c中某关键字进行替换\n\n\n![ima](/img/20230708102636.jpg)\n>32个关键字，编译器预先定义了有一定物理意义的字符串 =>不同编译器有不>同的定义sizeof 也是关键字:查看变量在内存空间中容量的工具，用法sizeof(变量)通>过关键字定义的不同数据类型的变量，限制变量 (资源)的大小(e.g.4字节，2字节...)\n\n![imag](/img/2023-07-08102810.png)\n\nc中的数据类型有明确规范，无论输入还是输出都要标明\n\n>    %d 十进制有符号整数  \n>    %u 十进制无符号整数  \n>    %f 浮点数  \n>    %s 字符串  \n>    %c 单个字符  \n>    %p 指针的值  \n>    %e 指数形式的浮点数  \n>    %x, %X 无符号以十六进制表示的整数  \n>    %o 无符号以八进制表示的整数  \n>    %g 把输出的值按照 %e 或者 %f 类型中输出长度较小的方式输出  \n>    %p 输出地址符  \n>    %lu 32位无符号整数  \n>    %llu 64位无符号整数  \n>    %% 输出百分号字符本身。   \n\n>    除了格式化说明符之外，printf() 函数还支持一些标志和选项，用于控制输出的精度、宽度、填充字符和对齐方式等。  例如：\n>    %-10s：左对齐并占用宽度为 10 的字符串；\n>    %5.2f：右对齐并占用宽度为 5，保留两位小数的浮点数；\n>    %#x：输出带有 0x 前缀的十六进制数。\n\n\n### 局部变量、全局变量、静态变量\n对于单一文件而言的:局部变量、全局变量、静态变量\n>局部变量:定义在函数内部的变量=>代码块作用域\n>全局变量:定义在函数外部的变量=>文件作用域\n>静态变量:有static修饰的变量\n有很多种组合，不需要都搞清楚，等遇到了再分析: where (可见性)?& static (生命周期)?\n\n下面这个例子很好的展示了这一点并且展示了冒泡排序\n**示例**\n``` c\n#include<stdio.h>\n\nint main()\n{\n    int class[10];\n    for (int i = 0; i < 10; i++) // 循环输入10次\n    {\n        scanf(\"%d\",&class[i]);\n    }\n    printf(\"你输入了：\");\n    for (int j = 0; j < 10; j++) //遍历数组并输出\n    {\n        printf(\"%d \",class[j]);\n    }\n    for (int i = 0; i < 10; i++) //冒泡排序\n    {\n        for (int j = 0; j < 10; j++)\n        {\n            if (class[j+1]>class[j])\n            {\n                int null = class[j];\n                class[j] = class[j+1];\n                class[j+1] = null;\n            }\n        }\n    }\n    printf(\"\\n\");\n    for (int j = 0; j < 10; j++) //遍历排序好的数组并输出\n    {\n        printf(\"排第%d的数是%d\\n\",j+1,class[j]);\n    }\n    \n}\n```\n卧槽无语了，刚开始写的博客，这个代码应该是上一章节的\n\n\n### 数组\n\n例：char a[num]={……}\n\n**当char中使用中文时，应该是二维数组**\n```bash\nchar wday[7][7] = {\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\",\"星期天\"};\n```\n\n**注意事项**\n>int a[]={……}; 可以在定义的时候给出初始值。可省略。  \n>int b[][5]={...}; 同上，但是第二个不能省略  \n>a[]=3; 这样做就不对了，里面没有定位，不能省略。  \n>b[][2]=2; 同上，不能省略。 a[x]=3；这样做也对，但是要保证变量x的值正确。C不会自动给你查越界。\n\n\n**以下例子很好的展示数组**\n``` c\n#include <stdio.h>\n\nvoid  main()\n{\n    int tick = 0; //0~86399\n    short mouth[12] = {31,29,31,30,31,30,31,31,30,31,30,31}; \n    short date; \n    short yue;\n    short week; \n    char wday[][7] = {\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\",\"星期天\"};\n    printf(\"请输入一个在 1~366 区间的数\\n\");\n    scanf_s(\"%d\", &tick); \n    week =  (tick+8)%7 ; //这个应该不会错的\n    date = tick;\n    for (int i = 0; i < 12; i++)  //依次遍历，一旦小于等于0，则该次遍历为月份\n    {\n      tick = tick - mouth[i];\n      if (tick<=0){yue=i+1;break;};\n    }\n    for (int j = 0; j < yue; j++) //遍历之后获得减掉前面月份天数的值，即为当月日期\n    {\n      date= date-mouth[j-1];\n    }\n    printf(\"当前日期为: 20-%02d-%02d-%s\\n\", yue, date, wday[week]);  \n}\n```\n### 枚举\n\n说实话还是不太理解\n\n枚举方法：\n\n1、先定义枚举类型，再定义枚举变量\n``` c\nenum DAY\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n};\nenum DAY day;\n```\n这里的DAY是枚举名\n\n2、定义枚举类型的同时定义枚举变量\n``` c\nenum DAY\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n} day;\n```\n\n3、省略枚举名称，直接定义枚举变量\n``` c\nenum\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n} day;\n```\n可以使用typedef定义别名\n``` c\ntypedef enum\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n} day;\nday day1 day2;\n```\n其中day是这个枚举名的别名，提高代码可读性\n\n下面这串代码很好的展示了枚举的应用\n\n``` c\n#include <stdio.h>\n \nenum DAY\n{\n      MON=1, TUE, WED, THU, FRI, SAT, SUN\n};\n \nint main()\n{\n    enum DAY day;\n    day = WED;\n    printf(\"%d\",day);\n    return 0;\n}\n```\n\n**枚举经常与switch一同使用**\n下面的代码展示了这种情况\n``` c\n#include <stdio.h>\n#include <stdlib.h>\nint main()\n{\n \n    enum color { red=1, green, blue };\n \n    enum  color favorite_color;\n \n    /* 用户输入数字来选择颜色 */\n    printf(\"请输入你喜欢的颜色: (1. red, 2. green, 3. blue): \");\n    scanf(\"%u\", &favorite_color);\n \n    /* 输出结果 */\n    switch (favorite_color)\n    {\n    case red:\n        printf(\"你喜欢的颜色是红色\");\n        break;\n    case green:\n        printf(\"你喜欢的颜色是绿色\");\n        break;\n    case blue:\n        printf(\"你喜欢的颜色是蓝色\");\n        break;\n    default:\n        printf(\"你没有选择你喜欢的颜色\");\n    }\n \n    return 0;\n}\n```\n**补充**\n>在所有教科书与c规范中，switch都是不允许case后接范围的，但是GNU C进行了扩展\n>可以使用case min ... max这种用法表示范围（英文句号，前后有空格）\n\n示例\n``` c\n#include<stdio.h>\n\nint main(){\n    int i;\n    scanf( \"%d\",&i);\n    switch (i)\n    {\n    case 1 ... 3:\n        printf(\"niubi\\n\");\n        break;\n    \n    default:\n        break;\n    }\n}\n```\n\n### 指针\n\nC语言中几乎最重要的地方来了，难度较大，必须掌握\n\n#### 指针是什么\n``` c\n#include <stdio.h>\n \nint main ()\n{\n    int var_runoob = 10;\n    int *p;              // 定义指针变量\n    p = &var_runoob;\n \n   printf(\"var_runoob 变量的地址： %p\\n\", p);\n   return 0;\n}\n```\n\n![image](/img/c-pointer.png)\n\n&取址*取值\n![image](/img/20230710103743.png)\n\n**数组名即指针！！**\n![image](/img/20230710105357.png)\n\n指针控制数组\n![image](/img/20230710110332.png)\n\n#### 数组与指针\n关于指针，内含的奥妙非常多，其中非常知名的就是数组即指针  \n**数组是指针的另一种表示**  \n我们可以这么看：\n~~~c\nint main()\n{\n    char a[3]= \"123\";\n    printf(\"%c\",*(a+2));\n}\n~~~\n在这里面定义了一个字符串数组，但是我调用他的方式却是使用了指针  \n数组名就是一个指针常量，这里**a**的值是数组a[3]的首元素的地址  \n于是，我们可以这样：\n```c\nint main()\n{\n    char *a = \"123\";\n    printf(\"%c\",a[2]);\n}\n```\n与上面的代码并不会出现差别\n\n#### 多重指针\n可以定义一个指向指针的指针\n```c\nint main()\n{\n    int a = 1;\n    int *p = &a;\n    int **p2 = &p;\n}\n```\n以此为准可以不断叠加指针，完成许多复杂的功能\n\n### 结构体\n\n与枚举有点相似\n为了使有关联性的变量变得更加易控，也为了提高可读性，结构体因此而生\n\n结构体定义\n```c\nstruct  Stuructstudent{\n    int num;\n    char name;\n    char sex;\n    int age\n};//声明结构体\nStructstudent student1;//定义变量\n```\n>实际上结构体就是一种数据类型，只不过是由程序员自己定义的\n>在实际生活中，我们会有各种各样的数据类型，如图书的名、ISBN、价格等可以集合为一个数据类型\n\n```c\nint main()\n{\n    struct book{\n        int isbn;\n        char name[10];\n        double price;\n    };\n    book b3= {\"活着\",111111111,39};\n}\n```\n\n**注意**\n>需要注意的是，结构体中内存的分配是由结构体的中定义的变量占用的内存决定的\n>但是但是它却遵循整除内存原则，如上述的代码中\n>首先，计算机会找到一个可以被4（int的长度）整除的内存地址（如2000）\n>然后在2004后面找到可以被10（name数组的长度）整除的地址（如2010）\n>最后在在2020后面找到可以被8（double的长度）整除的地址（如2024）\n>最后还要将首末相连空隙进行填充，一共是32字节的长度，整体的长度还必须是结构里最大数据类型的长度的整数倍（这里是double的长度8的整数倍）\n>如果不是还要在后面进行填充（假如是36，就要填充到40）\n>所以在结构体中数据类型的定义的先后十分重要\n>在上述代码中只需要将isbn和name调换顺序就只需要24字节的空间   \n\n\n\n## 51单片机\n\n### 硬件设备与软件环境\n\n**单片机**\n- stc89c52rc  \n\n**软件环境**\n- [Visual studio code + Embedded IDE + keil c](https://blog.gavinccc.com//2024/01/28/VScode配置C51环境/)  \n(点击跳转部署教程)\n**外设**\n- 按钮*3\n- 4位数码管*1\n- led*4\n- 蜂鸣器*1\n- 看门狗*1\n- 12mhz晶振\n- usbin\n\n**注意**\n>看芯片手册是一个非常重要的习惯\n>我们做的无非就是复现手册的内容而已\n>此篇章只保留作者认为重要的单片机知识\n\n### IO口的使用\n\n无需多言，上代码\n```c\n#include <REG52.H>\n#include \"Delay.h\"\n\nsbit led1=P2^4;\nsbit led2=P2^5;\nsbit led3=P2^6;\nsbit led4=P2^7;\n\nvoid main()\n{\n    while(1){\n        led1 = 0;\n        Delay(500);\n        //led1 = 1;\n        led2 = 0;\n        Delay(500);\n        //led2 = 1;\n        led3 = 0;\n        Delay(500);\n        //led3 = 1;\n        led4 = 0;\n        Delay(500);\n        //led4 = 1;\t\t\t\t\n        led1 = 1;\n        Delay(500);\n        //led1 = 1;\n        led2 = 1;\n        Delay(500);\n        //led2 = 1;\n        led3 = 1;\n        Delay(500);\n        //led3 = 1;\n        led4 = 1;\n        Delay(500);\n        //led4 = 1;\n    }\n\t\n}\n```\n这是最简单的led流水灯效果，所有入门51的必备\nIO口的控制流程如下\n1.查看需要控制的外设的对应单片机的引脚\n2.使用sbit定义引脚名（如led1）\n3.为引脚编写1或0来控制引脚\n\n### 按键的防抖\n\n我甚至不知道要不要给它单独开一个章节  \n\n>我们使用按钮的时候一般使用判断  \n```c\nwhile(1){\n    if（key1 == 1）{\n        //代码区\n    }\n}\n```\n>然而造成的结果是，我们明明只想要一次运行，但是由于单片机速度太快，会造成非常多次运行\n>因此，我们需要防抖\n```c\nwhile(1){\n    if(key1 == 1){\n        delay(20);//延迟看个人而定\n        if(key1 == 1){\n        //代码区\n        }\n    }\n}\n```\n只需要一个简单延迟函数就完成了防抖\n\n**注意**\n>不过，在较为大的工程中，延迟非常容易造成工程总体运行的堵塞情况\n>同时，延迟也无法很好的避免多次运行的问题\n>因此，在后续的工程开发中我们使用外部中断来实现按钮功能\n>外部中断是异步的（异步是计算机与电子信息中非常重要的概念）\n\n### 数码管显示\n\n数码管实现原理：请回顾数字电路技术课程\n\n无需多言，上代码\n\n```c\n#include <REGX52.H>\n#include \"Delay.h\"\n\nsbit key1=P3^2;\nsbit key2=P3^3;\nsbit key3=P3^4;\n\n//数码管段码表\nunsigned char NixieTable[]={0x03,0x9F,0x25,0x0D,0x99,0x49,0x41,0x1F,0x01,0x09};\n\n\n\n//数码管显示子函数\nvoid Nixie(unsigned char Location,Number)\n{\n\t\n\t\tswitch(Location)\t\t//位码输出\n\t{\n\t\tcase 1:P2=0x7;break;\n\t\tcase 2:P2=0xB;break;\n\t\tcase 3:P2=0xD;break;\n\t\tcase 4:P2=0xE;break;\n\t}\n\tP0=NixieTable[Number];\t//段码输出\n\tDelay(1);\t\t\t\t//显示一段时间\n\tP0=~0x0;\t\t\t\t//段码清0，消影\n}\n\nvoid main()\n{\n\t\tunsigned char x = 0;\n\t\tunsigned char y = 0;\n\t\tunsigned char z = 0;\n\twhile(1)\n\t{\n\t\tif(key1 ==0)\n\t\t{\n\t\t\tDelay(80);\n\t\t\tif(key1 == 0)\n\t\t\t{\n\t\t\t\tx++;\n\t\t\t\tif(x>9)\n\t\t\t\t{\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty++;\n\t\t\t\t\tif(y>9)\n\t\t\t\t\t{\n\t\t\t\t\t\ty=0;\n\t\t\t\t\t\tz++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tNixie(1,1);\t\t//在数码管的第1位置显示1\n//\t\tDelay(20);\n\t\tNixie(2,2);\t\t//在数码管的第2位置显示2\n//\t\tDelay(20);\n\t\tNixie(3,3);\t\t//在数码管的第3位置显示3\n//\t\tDelay(20);\n\t\tNixie(4,4);\t\t//在数码管的第4位置显示4\n//\t\tDelay(20);\n\t}\n}\n```\n**流程**\n1.弄清楚每个数字对应在数码管上的位置\n2.位置的二进制表示\n3.二进制转16进制\n4.每一个数码管的启动方式（需让其他数码管关，否则出现全亮，使用延迟实现单独亮）\n5.打包成函数，方便调用\n\n### 外部中断\n\n#### 外部中断的定义与产生机理\n\n**定义**\n>外部中断是单片机实时地处理外部事件的一种内部机制。当某种外部事件发生时，单片机的中断系统将迫使CPU暂停正在执行的程序，转而去进行中断事件的处理；中断处理完毕后．又返回被中断的程序处，继续执行下去。  \n\n换而言之\n\n>我外部中断只要一开，你单片机就先把手中的事放放，先办我的事（领导既视感）  \n\n**产生机理**\n>单片机在自主运行时一般是在执行一个死循环程序，在没有外界干预(输入信号)时它基本处于一个封闭状态。比如一个电子时钟，它会按时、分、秒的规律自主运行并通过输出设备(如液晶显示屏)把时间显示出来。在不需要对它进行调校时它不需要外部干预，自主封闭地运行。如果这个时钟足够准确而又不掉电的话，它可能一直处于这种封闭运行状态。但事情往往不会如此简单，在时钟刚刚上电或时钟需要重新校准．甚至时钟被带到不同时区的时候，就需要重新对时钟进行调校，这时就要求时钟必须具有调校功能。因此单片机系统往往又不会是一个单纯的封闭系统．它有些时候恰恰需要外部的干预，这也就是外部中断产生的根本原因。  \n\n>在没有干预的情况下，单片机的程序在封闭状态下自主运行，如果在某一时刻需要响应一个外部事件(比如有按键按下)，这时就会用到外部中断。具体来讲，外部中断就是在单片机的一个引脚上，由于外部因素导致了一个电平的变化(比如由高变低)，而通过捕获这个变化，单片机内部自主运行的程序就会被暂时打断，转而去执行相应的中断处理程序，执行完后又回到原来中断的地方继续执行原来的程序。这个引脚上的电平变化，就申请了一个外部中断事件，而这个能申请外部中断的引脚就是外部中断的触发引脚。  \n\n以上来源于科普中国\n\n#### 外部中断的使用\n\n以代码来解释\n\n```c\n#include <REG52.H>\n\nsbit LED1 = P2^4;\nsbit BEEP = P1^0;\n\nvoid Delay(unsigned int xms)\n{\n\tunsigned char i, j;\n\twhile(xms--)\n\t{\n\t\ti = 2;\n\t\tj = 239;\n\t\tdo\n\t\t{\n\t\t\twhile (--j);\n\t\t} while (--i);\n\t}\n}\n\n\nvoid InitInterrupt()\n{\n\tIT0 = 0;//低电平触发\n\tEX0 = 1;//外部中断1启动\n\tPX0 =1;//外部中断1优先级高\n\t\n\tEA= 1;//总中断\n}\n\nint main()\n{\n\tInitInterrupt();\n\twhile(1)\n\t{\n\t\tBEEP = 1;\n\t\tDelay(10);\n        BEEP = 0;     \n\t}\n}\n\nvoid openled1() interrupt 0\n{\n\tLED1 = 0;\n\tBEEP = 0;\n}\n```\n这个代码不按按钮的话就会持续的蜂鸣器开关，只要一按就会实现一直开\n>只要按钮一按，中断启动，你主程序，往后稍稍，先干活先搞我的  \n\n>在函数后面加上interrupt 0表示这个函数是外部中断1中断时运行的函数\n>interrupt后面的数字，根据下面的表格的中断编号\n\n|中断编号| 中断名称 |中断请求标志位|中断允许控制位|触发条件|\n|:-----:|:------:|:---:|:----:|:-----------:|\n|   0   |外部中断0|IE0|EX0|中断0对应的引脚检测到下降沿或低电平|\n|1|定时器0|TF0|ET0|定时器0溢出|\n|2|外部中断1|IE1|EX1|中断1对应的引脚检测到下降沿或低电平|\n|3|定时器1|TF1|ET1|定时器1溢出|\n|4|串口中断|RI,TI|ES|串口接收或发送一帧数据|\n|5|定时器2|TF2|ET2|定时器2溢出|\n|6|外部中断2|IE2|EX2|中断2对应的引脚检测到下降沿或低电平|\n|7|外部中断3|IE3|EX3|中断3对应的引脚检测到下降沿或低电平|\n\n#### 中断优先级\n\n优先级在代码里面也有注释，使用PX0就可以让外部中断0优先级变高\n\n>默认的优先级是按照中断编号从小到大依次递减的\n>PX(X)H、PX(X)可以定义外部中断优先级\n>PT(X)H、PT(X)可以定义定时器优先级\n>PSH、PS可以定义串口优先级\n\n### 定时器\n\n#### 定时器工作原理\n\n**和外部中断一样，定时器也是异步的**\n>定时器的执行，，不会依靠cpu的资源，它是独立运行的，独立于cpu的外部计数器，它的计数时长依赖于时钟周期，时钟周期是晶振频率的倒数（计数的间隔的时长的来源），通过设定不同的初值实现不同的时间间隔  \n\n\n和外部中断一样，它的也是异步的，运行完至后可以产生中断，这样，就可以实现非阻塞式的延迟（在主进程中延迟会阻碍其他函数的运行）  \n\n\n>就像你正在吃饭，一边又在给水桶里放水，吃着吃着，水满了，你就得赶快去把水龙头关掉或者换一个空的水桶，再回来吃饭。\n>单片机的定时器就像是一个水桶，你让它启动了，也就是水龙头打开了；开始装水了；定时在每个机器周期不断自动加 1，最后溢出了；水桶的水不断增加，最也就满出来了；定时器溢出时，你就要去做处理了；水桶的水满了，你也应该处理一下了；处理完后，单片机又可以回到刚刚开停止的地方继续运行；水桶处理了，先前你在做什么也可以继续去做什么了。\n\n\n\n#### 计数初值与计时时长\n\n在单片机中，计数初值与计数时长之间的关系可以通过计时器的工作原理来解释。通常情况下，计时器是由一个时钟源提供时钟脉冲，计数器根据这些脉冲进行计数。计数初值决定了计数器的初始值，而计数时长则是计数器从初始值开始计数到达最终值所经过的时钟脉冲数。\n\n假设计数器的时钟源频率为 $$ (f_{clk}) $$，计数初值为$$ (N_{initial}) $$，计数器的最大计数值为$$ (N_{max}) $$，那么计数时长$$ (T) $$与计数初值$$ (N_{initial}) $$之间的关系可以用下面的公式表示：\n\n$$\n[ T = \\frac{(N_{max} - N_{initial} + 1)}{f_{clk}} ]\n$$\n\n\n**然而我们定义计数初值有tl和th而且是使用16进制，这该怎么计算呢？**\n  \n跟着我的步骤，轻松算出来！\n>1.将 TH 和 TL 合并为一个16位的值，假设 TH 为高8位，TL 为低8位。\n>2.将这个16位的值转换为10进制，得到计数初值的实际数值。\n>3.使用计数初值的实际数值代入计时器的时钟频率，根据时钟频率计算出对应的时间。\n\n如果时钟频率是12MHz，那么使用之前提到的计数初值 TH 和 TL，合并为 16 位的值，然后将其转换为10进制。假设合并后的值为 0xABCD（TH 为 0xAB，TL 为 0xCD），那么按照之前的步骤，将 0xABCD 转换为10进制。得到43981。\n\n接着，使用时钟频率 12MHz（12,000,000Hz），可以使用以下公式计算对应的时间：\n$$\n[ T = \\frac{65536 - 43981}{12,000,000} ]\n$$\n这将给出计数初值对应的时间，单位为秒。    \n\n#### 定时器的使用\n\nok话不多说上代码！！！\n\n```c\n#include <REG52.H>\n\nsbit led1 = P2^4;\nsbit beep = P1^0;\nsbit key1=P3^2;\n\n//数码管段码表\nunsigned char NixieTable[]={0x03,0x9F,0x25,0x0D,0x99,0x49,0x41,0x1F,0x01,0x09};\n\nunsigned char x = 0;\nunsigned char y = 60;\n\nvoid Delay(unsigned int xms)\n{\n\tunsigned char i, j;\n\twhile(xms--)\n\t{\n\t\ti = 2;\n\t\tj = 239;\n\t\tdo\n\t\t{\n\t\t\twhile (--j);\n\t\t} while (--i);\n\t}\n}\n\n//数码管显示子函数\nvoid Nixie(unsigned char Location,Number)\n{\n\t\n\t\tswitch(Location)\t\t//位码输出\n\t{\n\t\tcase 1:P2=0x7;break;\n\t\tcase 2:P2=0xB;break;\n\t\tcase 3:P2=0xD;break;\n\t\tcase 4:P2=0xE;break;\n\t}\n\tP0=NixieTable[Number];\t//段码输出\n\tDelay(1);//显示一段时间\n\tP0=~0x0;\t\t\t\t//段码清0，消影\n}\n\n\nvoid InitInterrupt()\n{\n\tIT0 = 0;\n\tEX0 = 1;\n\tPX0 =1;\n\t\n\tET0 = 1;\n\tEA = 1;\n}\n\nvoid openled1() interrupt 0\n{\n\ty = 60;\n}\n\nvoid timer()\n{\n\tTMOD = 0x01;\n\tTH0 = 0xFC;\n\tTL0 = 0x18;\n\tTR0 = 1;\n}\n\nvoid timerhandle() interrupt 1\n{\n\n\tunsigned int icount;\n\tTH0 = 0xFC;\n\tTL0 = 0x18;\n\t\n\ticount++;\n\tif(icount >= 1000)\n\t{\n\t\ticount = 0;\n\t\ty--;\n\t\tif(y == 0)\n\t\t{\n\t\t\ty = 0;\n\t\t    beep = 0;\n\t\t}\n\t\t\n\t}\n}\n \nvoid main()\n{\n\tInitInterrupt();\n\ttimer();\n\twhile(1)\n  {\n\t\tNixie(1,0);\t\t//在数码管的第1位置显示1\n\t\tNixie(2,0);\t\t//在数码管的第2位置显示2\n\t\tNixie(3,y/10);\t\t//在数码管的第3位置显示3\n\t\tNixie(4,y%10);\t\n  }\n}\n```\n该代码实现了一个简单的秒表（虽然只有秒针）  \n\n这里计数应该是1毫秒的时间间隔，使用icount变量的累加实现1秒  \n\ninterrupt 1所在的函数就是定时器计数溢出函数  \n\nTMOD定义了该定时器为工作模式1，16位计数器  \n\n**学到这，参透这个代码是起码的**\n\n\n#### 快速计算定时时长\n\n根据上面的公式，我们可以算出需要定时的时长，可是，我懒啊，算不了了啊，脑子不够啊\n**其实，硬件公司都做好了，我们直接用就好了**\n\n**懒人启动器，启动！**\n\n以这个单片机的公司为例，人家早就把定时器的计算接口放在烧录软件了\n\n我们打开烧录软件，点开这个按钮**定时器计算器**就可以看到以下画面\n\n![image](../img/stc定时器.png)    \n\n\n**嘿嘿，只要我们轻轻的点几个按钮，就可以生成对应时长的代码了**  \n\n\n![image](../img/stc.jpg)     \n\n**值得注意的是，单片机型号、时钟频率不要选错哦**\n\n对了，我们这个单片机集成板的晶振是12mhz的\n\n### 串口通信\n\n嗨，好多呀写不下去了累死了\n\n#### 并行通信与串行通信\n\n##### 并行通信 \n\n当我们在一个机器传一个数据给另外一个机器的时候,我们是怎么传的呢？\n>你可能第一时间想到计算机是二进制的，我们要先将数据转为二进制*（编码，请回顾数电课程）*，这是对的\n>比如一个数字9，二进制表示为1001，我们要传1001  \n\n我们怎么传1001呢？\n>你可能会想到，诶！拿4条线把2个机器接起来，同一时间内，低电平表示0，高电平表示1，这样，就可以把1001作为电平信号传过去了，只要在另外的机器将二进制转为十进制*（译码，请回顾数电课程）*即可。  \n\n那么，恭喜你，你已经理解了并行通信\n\n![image](../img/bx.png)\n\n如上图所示，只要将1001按顺序放在D1,D2,D3,D4即可，需要注意的是，必须要同一时段发送与接收\n这就是并行通信，速度快，好理解\n但是问题也接踵而来\n**如果我要发送非常多的数据，岂不是要非常多的线？**\n我哪有这么多钱买线\n**因此，串行通信！**\n\n\n##### 串行通信\n\n为了解决线路多，不好操控的问题，串行通信应运而生，什么是串行通信呢，其实就是一条线传多个数据\n好的，你来想想怎么实现一条数据线怎么传多个数据呢？  \n\n>你可能会想到，欸一段时间只传一位数据不就好了吗，然后一直传，直到传完，比如传1001.我就先传一个1，然后再传两个0，最后来个1完事，接收端再拼成一整个1001即可  \n\n这么看，你真的是天才，你又把串行通信给领悟了\n\n>整体思路就是这样了，只要固定好每一位数据的发送时间，接收端按照约定好的时间接收数据，即可完成通信\n\n![image](../img/cx.png)\n\n如图所示，将1001放在D数组中，一位一位的发送，一位一位的接收，即可完成通信\n同步和异步串行通信的区别是异步没有时钟线\n需要注意的是，每一位发送的时间间隔必须相同\n\n#### 单工、半双工、全双工数据传输\n\n**单工**\n>一条线，单方向传输  \n\n**半双工**\n>一条线，双方向传输  \n\n**全双工**\n>单方向传输，但是两条线\n\n#### UART协议\n\nUART协议就是串口通信的协议，是异步串行全双工通信协议\n\n1.异步性： UART是一种异步协议，即发送和接收端不共享时钟信号。相对于同步协议，UART不需要发送和接收端保持精确的时钟同步，因此更为灵活。\n\n2.数据帧： UART通信以数据帧的形式传输数据。数据帧包括起始位（Start Bit）、数据位（通常为8位，可以是5到9位）、可选的奇偶校验位（Parity Bit，用于错误检测）、停止位（Stop Bit）。起始位和停止位的作用是标识数据帧的开始和结束。\n\n3.波特率： 波特率（Baud Rate）是衡量UART通信速率的单位，表示每秒传输的比特数。波特率定义了数据信号的传输速率，发送和接收端必须使用相同的波特率才能正常通信。\n\n4.起始位和停止位： 起始位通常是逻辑 0，用于指示数据帧的开始。停止位是逻辑 1，用于指示数据帧的结束。数据帧的每一位都以起始位开始，以停止位结束。\n\n**数据传输流程：**\n\n>发送端：将数据位、奇偶校验位、起始位和停止位按照帧的格式组成数据帧，通过TXD发送。\n>接收端：通过检测RXD起始位的开始，开始接收数据。接收端根据帧的格式提取数据位、奇偶校验位、停止位等信息。\n\n![image](../img/uart.png)\n\n知道这些东西，我们就可以想象一下传输的过程了\n\n>1.固定好时间间隔，也就是固定好波特率\n>2.发送起始位\n>3.根据数据发送数据的每一位\n>4.发送结束位表示发送结束\n\n>假设我要发送115\n首先我们将115转化为二进制，即01110011\n使用代码设定好波特率\n给发送0表示开始发送（就是将TXD设为0）\n时间宽度走完后给TXD设为1（01110011的第一位）一个时间宽度\n重复8次这个过程（每一次的TXD的值换到下一位）\n8次后发送1（将TXD设为1）表示结束\n\n![image](../img/uart1.png)\n\n恭喜恭喜，串口通信也给我们造出来了，可以自己做一个串口了\n\n**不过再stc89c52rc中没这么麻烦，已经有现成的uart模块给我们使用了**\n\n#### 串口中断的使用\n\n首先是串口初始化和定义\n\n```c\nstatic void inituart()\n{\n\t\n\tSCON = 0x50;\\\\串口工作模式\n\tTMOD = 0x20;\\\\定时器工作模式\n\tPCON = 0X80;\\\\波特率翻倍\n\tTL1 = 0XF3;\\\\设定定时初值\n\tTH1 = TL1;\n\tTR1 = 1;\\\\定时器溢出标志开\n\t\n}\n\nstatic void initinterrupt()\n{\n\tIT0 = 1;\n\tEX0 = 1;\n\t\n\t\n\tES = 1;\n\tEA = 1;\n}\n\t\n```\n这个无需多言，注意波特率即可\n\n发送函数代码\n```c\nvoid uarthander( unsigned char sibuffer ) \n{\n\tSBUF = sibuffer;\n\twhile(!TI);\n    TI = 0;\n}\n\nvoid updatehander( char* str )\n{\n\twhile(*str)\n\t{\n\t\tuarthander(*str++);\n\t}\n}\n```\nSBUF是缓存区，SBUF被赋值，串口助手就会输出这个值\n这个代码也挺简单的，SBUF一次只能赋一个值，我们使用updatehander函数实现输出字符串\n调用这个函数就可以输出字符串\n\n接收函数代码\n\n```c\nchar recestring[10];  // 用于存储接收到的字符串，最大长度为10\nint i = 0;  // 记录当前接收到的字符在 recestring 数组中的索引\n\nvoid comhander() interrupt 4\n{\n    if (RI)\n    {\n        char w;\n        w = SBUF;  // 从串口缓冲区读取接收到的字符\n        recestring[i++] = w;  // 将字符存储到 recestring 数组中，并更新索引\n\n        if (w == '\\n')  // 如果接收到换行符 '\\n'，表示接收到一条完整的字符串\n        {\n            recestring[i] = '\\0';  // 在字符串末尾添加 null 终止符，形成一个C风格字符串\n            updatehander(recestring);  // 调用处理接收到字符串的函数\n            i = 0;  // 重置索引，准备接收下一条字符串\n        }\n\n        RI = 0;  // 清除接收中断标志位\n        TI = 0;  // 清除发送中断标志位\n    }\n}\n```\n定义了一个数组，每一次都将接收到的值放在数组中直到值是换行符的时候才会将其视为完整的字符串\n我们将接收和发送函数分开，这样就可以处理更多问题\n\n下面是我的示例工程\n\n```c\n#include <REG52.H>  // 包含8051单片机的寄存器定义头文件\n\nsbit led1 = P2^4;  // 定义 LED1 的引脚\nsbit led2 = P2^5;  // 定义 LED2 的引脚\nsbit led3 = P2^6;  // 定义 LED3 的引脚\nsbit led4 = P2^7;  // 定义 LED4 的引脚\n\nstatic char sib[4], a, b, c, d;  // 定义静态变量，用于存储串口接收的数据和数码管显示的数字\n\nvoid Delay(unsigned int xms)\n{\n\tunsigned char i, j;\n\twhile(xms--)\n\t{\n\t\ti = 2;\n\t\tj = 239;\n\t\tdo\n\t\t{\n\t\t\twhile (--j);\n\t\t} while (--i);\n\t}\n}\n\nunsigned char NixieTable[] = {0x03, 0x9F, 0x25, 0x0D, 0x99, 0x49, 0x41, 0x1F, 0x01, 0x09};  // 数码管对应数字的表格\n\nvoid Nixie(unsigned char Location, Number)\n{\n\tswitch(Location)  // 控制数码管的位置\n\t{\n\t\tcase 1: P2 = 0x7; break;\n\t\tcase 2: P2 = 0xB; break;\n\t\tcase 3: P2 = 0xD; break;\n\t\tcase 4: P2 = 0xE; break;\n\t}\n\tP0 = NixieTable[Number];  // 显示对应数字\n\tDelay(5);  // 延时\n\tP0 = ~0x0;  // 关闭数码管\n}\n\nstatic void inituart()\n{\n\tSCON = 0x50;  // 配置串口工作方式\n\tTMOD = 0x20;  // 配置计时器工作方式\n\tPCON = 0X80;  // 设置波特率倍增\n\tTL1 = 0XF3;  // 计时器1低位初始值\n\tTH1 = TL1;  // 计时器1高位初始值\n\tTR1 = 1;  // 启动计时器1\n}\n\nstatic void initinterrupt()\n{\n\tIT0 = 1;  // 外部中断0触发方式为下降沿触发\n\tEX0 = 1;  // 允许外部中断0\n\n\tES = 1;  // 允许串口中断\n\tEA = 1;  // 允许总中断\n}\n\nvoid uarthander(unsigned char sibuffer) \n{\n\tSBUF = sibuffer;  // 将数据发送到串口缓冲区\n\twhile (!TI);  // 等待发送完成\n    TI = 0;  // 清除发送中断标志位\n}\n\nvoid lightup(unsigned char byte)\n{\n\tif(byte == 1)\n\t{\n\t\tled1 = ~led1;  // 切换 LED1 状态\n\t}\n\tif(byte == 2)\n\t{\n\t\tled2 = ~led2;  // 切换 LED2 状态\n\t}\n\tif(byte == 3)\n\t{\n\t\tled3 = ~led3;  // 切换 LED3 状态\n\t}\n\tif(byte == 4)\n\t{\n\t\tled4 = ~led4;  // 切换 LED4 状态\n\t}\n}\n\nvoid updatehander(char* str)\n{\n\twhile(*str)\n\t{\n\t\tuarthander(*str++);  // 逐字符发送字符串到串口\n\t}\n}\n\nvoid handergo() interrupt 0\n{\n\tupdatehander(\"Hello,World\\n\");  // 外部中断0触发时发送 \"Hello,World\\n\" 到串口\n}\n\nunsigned char j = 0;\nstatic char w = '0';\n\nvoid abcd()\n{\n\ta = sib[0] - '0';  // 将字符转换为数字\n\tb = sib[1] - '0';  // 将字符转换为数字\n\tc = sib[2] - '0';  // 将字符转换为数字\n\td = sib[3] - '0';  // 将字符转换为数字\n}\n\nvoid comhander() interrupt 4\n{\n\tw = SBUF;  // 从串口缓冲区读取接收到的字符\n\tsib[j++] = w;  // 存储接收到的字符\n\t\n\tif(j >= 4)\n\t{\n\t\tj = 0;\n\t\tabcd();  // 处理接收到的字符，转换为数字\n\t}\n\tRI = 0;  // 清除接收中断标志位\n\n\tlightup(sib);  // 控制LED状态\n}\n\nvoid main()\n{\n\tinitinterrupt();  // 初始化中断\n\tinituart();  // 初始化串口\n\t\n\twhile(1)\n\t{\t\t\t\n\t\tNixie(1, b);\t\t\n\t\tNixie(2, c);\t\t\n\t\tNixie(3, d);\t\t\n\t\tNixie(4, a);  // 循环显示数字到数码管\n\t}\n}\n\n```\n这个代码完成了在串口助手输入4位数字，数码管显示这4位数字的功能\n简单吧，这就是内置uart的使用\n那么接下来，我们就得自己做一个串口了\n\n#### 模拟串口\n\n实际上就是根据uart协议的内容，自己写一个串口出来\n\n前文已经详细的说明了流程  \n>1.固定好时间间隔，也就是固定好波特率\n>2.发送起始位\n>3.根据数据发送数据的每一位\n>4.发送结束位表示发送结束  \n\n话不多说，上代码！\n\n串口初始化\n```c\nsbit RXD2 = P3^0;  // 定义串口接收引脚\nsbit TXD2 = P3^1;  // 定义串口发送引脚\nunsigned char buffer[20];  // 存储接收到的数据\nunsigned char getnum = 0;  // 接收数据的计数器\n\nvoid UartInit()  // 串口初始化函数，波特率：4800bps @ 12.000MHz\n{\n    TMOD = 0x20;  // 设置定时器模式\t\t\n    TH1 = 0x30;     \n    TL1 = 0x30;    \n    EA = 1;\n    ET1 = 1;\n    TF1 = 0;  // 清除TF1标志\n    TR1 = 1;  // 定时器1开始计时\n}\n\nvoid uart() interrupt 3\n{\n    if (TR1 == 1){\n        TH1 = 0x30;  // 波特率4800bps  \n        TL1 = 0x30;  // 定时器\n        TF1 = 0;\n    }\n}\n\nvoid waittf(){\n    while (TF1 == 0);//定时器溢出做延迟\n    TF1 = 0;\n}\n```\n\n发送函数\n```c\nvoid putdata(unsigned char str) \n{\n    int i = 8;\n    str = str + str;//由于波特率误差，发送的AscII码会小一半所以我直接加一倍\n    TR1 = 1;\n    TXD2 = 1;\n    waittf();\n    while (i--)\n    {\n        TXD2 = str & 0x01;\n        waittf();\n        str >>= 1;\n    }\n    TXD2 = 0;\n    waittf();\n    TR1 = 0;\n}\n\nvoid putdatastr(unsigned char *str)\n{\n    while (*str)\n    {\n        putdata(*str);  // 发送字符串中的每个字符\n        str++;\n    }\n}\n```\n>由于波特率误差，发送的AscII码会小一半所以我直接加一倍\n首先赋值TXD2为1为起始位\n随后使用waitf函数做时间间隔\n使用&0x01将值位赋值给TXD实现uart中的每一位数据位传输重复8次\n最后发送结束位  \n\n一样的道理，接收函数\n```c\nvoid getdata()\n{\n    unsigned char i = 0;\n    unsigned char str = 0x0;\n    if (RXD2 == 0)\n    {\n        TR1 = 1;\n        waittf();\n        while (i < 8)\n        {\n            str >>= 1;\n            if (RXD2 == 1)\n            {\n                str |= 0x80;\n            }\n            waittf();\n            i++;\n        }\n        buffer[getnum++] = str;  // 存储接收到的数据\n        TR1 = 0;\n    }\n    if(getnum == 20)\n    {\n        getnum = 0;\n    }\n}\n```\n>监控RXD，只要为0立马开始赋值\n起始位、传数据位\n监控到RXD不为0就结束接收\n其余流程与发送函数原理相同\n\n最后，附上main函数\n```c\nvoid main()\n{\n    unsigned char i = 0;\n    TXD2 = 0;  // 初始化串口发送引脚\n    UartInit();  // 初始化串口\n    while (1)\n    {\n        \n        if(RXD2 == 0)\n        {\n            int maxnum = 10;\n            while (maxnum--)\n            {\n                if (RXD2 == 0)\n                {\n                    getdata();  // 接收数据\n                    maxnum =  10;\n                }\n                \n            }\n        }\n        else{\n            if(buffer[0] != 0)\n            {\n                putdatastr(buffer);  // 发送接收到的数据\n                for(i = 0; i < 20; i++)\n                {\n                    if (buffer[i] != 0)\n                    {\n                        buffer[i] = 0;\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n                getnum = 0;\n                putdata(0x0d);  // 发送回车符\n                putdata(0x0a);  // 发送换行符\n            }\n        }\n    }\n}\n```\n\n这样，就实现了自己做一个模拟串口，关键在于调波特率\n需要十分准确才可以正常传输数据\n在51大作业篇，我会详细写明模拟串口接收时会与其他中断冲突导致乱码，在这里不进行过多的讨论","slug":"从51到32","published":1,"updated":"2024-01-31T14:53:13.600Z","comments":1,"layout":"post","photos":[],"_id":"cls214yqm000mzcjvd0ztellx","content":"<h2 id=\"c语言程序入门应用\"><a href=\"#c语言程序入门应用\" class=\"headerlink\" title=\"c语言程序入门应用\"></a>c语言程序入门应用</h2><h3 id=\"关键字与数据类型\"><a href=\"#关键字与数据类型\" class=\"headerlink\" title=\"关键字与数据类型\"></a>关键字与数据类型</h3><p><img src=\"/img/2023-07-08101610.png\" class=\"lazyload\" data-srcset=\"/img/2023-07-08101610.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>#include &#x3D;&gt; 包含头文件<br><strong>头文件预处理在源文件与编译器之间</strong><br>#define &#x3D;&gt; 宏定义<br>一般在头部，将c中某关键字进行替换</p>\n<p><img src=\"/img/20230708102636.jpg\" class=\"lazyload\" data-srcset=\"/img/20230708102636.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"ima\"></p>\n<blockquote>\n<p>32个关键字，编译器预先定义了有一定物理意义的字符串 &#x3D;&gt;不同编译器有不&gt;同的定义sizeof 也是关键字:查看变量在内存空间中容量的工具，用法sizeof(变量)通&gt;过关键字定义的不同数据类型的变量，限制变量 (资源)的大小(e.g.4字节，2字节…)</p>\n</blockquote>\n<p><img src=\"/img/2023-07-08102810.png\" class=\"lazyload\" data-srcset=\"/img/2023-07-08102810.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"imag\"></p>\n<p>c中的数据类型有明确规范，无论输入还是输出都要标明</p>\n<blockquote>\n<p>   %d 十进制有符号整数<br>   %u 十进制无符号整数<br>   %f 浮点数<br>   %s 字符串<br>   %c 单个字符<br>   %p 指针的值<br>   %e 指数形式的浮点数<br>   %x, %X 无符号以十六进制表示的整数<br>   %o 无符号以八进制表示的整数<br>   %g 把输出的值按照 %e 或者 %f 类型中输出长度较小的方式输出<br>   %p 输出地址符<br>   %lu 32位无符号整数<br>   %llu 64位无符号整数<br>   %% 输出百分号字符本身。   </p>\n</blockquote>\n<blockquote>\n<p>   除了格式化说明符之外，printf() 函数还支持一些标志和选项，用于控制输出的精度、宽度、填充字符和对齐方式等。  例如：<br>   %-10s：左对齐并占用宽度为 10 的字符串；<br>   %5.2f：右对齐并占用宽度为 5，保留两位小数的浮点数；<br>   %#x：输出带有 0x 前缀的十六进制数。</p>\n</blockquote>\n<h3 id=\"局部变量、全局变量、静态变量\"><a href=\"#局部变量、全局变量、静态变量\" class=\"headerlink\" title=\"局部变量、全局变量、静态变量\"></a>局部变量、全局变量、静态变量</h3><p>对于单一文件而言的:局部变量、全局变量、静态变量</p>\n<blockquote>\n<p>局部变量:定义在函数内部的变量&#x3D;&gt;代码块作用域<br>全局变量:定义在函数外部的变量&#x3D;&gt;文件作用域<br>静态变量:有static修饰的变量<br>有很多种组合，不需要都搞清楚，等遇到了再分析: where (可见性)?&amp; static (生命周期)?</p>\n</blockquote>\n<p>下面这个例子很好的展示了这一点并且展示了冒泡排序<br><strong>示例</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"class\"><span class=\"keyword\">class</span>[10];</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) <span class=\"comment\">// 循环输入10次</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;class[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你输入了：&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) <span class=\"comment\">//遍历数组并输出</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>,class[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) <span class=\"comment\">//冒泡排序</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (class[j+<span class=\"number\">1</span>]&gt;class[j])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> null = class[j];</span><br><span class=\"line\">                <span class=\"class\"><span class=\"keyword\">class</span>[<span class=\"title\">j</span>] =</span> <span class=\"class\"><span class=\"keyword\">class</span>[<span class=\"title\">j</span>+1];</span></span><br><span class=\"line\">                <span class=\"class\"><span class=\"keyword\">class</span>[<span class=\"title\">j</span>+1] =</span> null;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) <span class=\"comment\">//遍历排序好的数组并输出</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;排第%d的数是%d\\n&quot;</span>,j+<span class=\"number\">1</span>,class[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>卧槽无语了，刚开始写的博客，这个代码应该是上一章节的</p>\n<h3 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h3><p>例：char a[num]&#x3D;{……}</p>\n<p><strong>当char中使用中文时，应该是二维数组</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">char wday[7][7] = &#123;<span class=\"string\">&quot;星期一&quot;</span>,<span class=\"string\">&quot;星期二&quot;</span>,<span class=\"string\">&quot;星期三&quot;</span>,<span class=\"string\">&quot;星期四&quot;</span>,<span class=\"string\">&quot;星期五&quot;</span>,<span class=\"string\">&quot;星期六&quot;</span>,<span class=\"string\">&quot;星期天&quot;</span>&#125;;</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意事项</strong></p>\n<blockquote>\n<p>int a[]&#x3D;{……}; 可以在定义的时候给出初始值。可省略。<br>int b[][5]&#x3D;{…}; 同上，但是第二个不能省略<br>a[]&#x3D;3; 这样做就不对了，里面没有定位，不能省略。<br>b[][2]&#x3D;2; 同上，不能省略。 a[x]&#x3D;3；这样做也对，但是要保证变量x的值正确。C不会自动给你查越界。</p>\n</blockquote>\n<p><strong>以下例子很好的展示数组</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span>  <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> tick = <span class=\"number\">0</span>; <span class=\"comment\">//0~86399</span></span><br><span class=\"line\">    <span class=\"type\">short</span> mouth[<span class=\"number\">12</span>] = &#123;<span class=\"number\">31</span>,<span class=\"number\">29</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>&#125;; </span><br><span class=\"line\">    <span class=\"type\">short</span> date; </span><br><span class=\"line\">    <span class=\"type\">short</span> yue;</span><br><span class=\"line\">    <span class=\"type\">short</span> week; </span><br><span class=\"line\">    <span class=\"type\">char</span> wday[][<span class=\"number\">7</span>] = &#123;<span class=\"string\">&quot;星期一&quot;</span>,<span class=\"string\">&quot;星期二&quot;</span>,<span class=\"string\">&quot;星期三&quot;</span>,<span class=\"string\">&quot;星期四&quot;</span>,<span class=\"string\">&quot;星期五&quot;</span>,<span class=\"string\">&quot;星期六&quot;</span>,<span class=\"string\">&quot;星期天&quot;</span>&#125;;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;请输入一个在 1~366 区间的数\\n&quot;</span>);</span><br><span class=\"line\">    scanf_s(<span class=\"string\">&quot;%d&quot;</span>, &amp;tick); </span><br><span class=\"line\">    week =  (tick+<span class=\"number\">8</span>)%<span class=\"number\">7</span> ; <span class=\"comment\">//这个应该不会错的</span></span><br><span class=\"line\">    date = tick;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">12</span>; i++)  <span class=\"comment\">//依次遍历，一旦小于等于0，则该次遍历为月份</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      tick = tick - mouth[i];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tick&lt;=<span class=\"number\">0</span>)&#123;yue=i+<span class=\"number\">1</span>;<span class=\"keyword\">break</span>;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; yue; j++) <span class=\"comment\">//遍历之后获得减掉前面月份天数的值，即为当月日期</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      date= date-mouth[j<span class=\"number\">-1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;当前日期为: 20-%02d-%02d-%s\\n&quot;</span>, yue, date, wday[week]);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h3><p>说实话还是不太理解</p>\n<p>枚举方法：</p>\n<p>1、先定义枚举类型，再定义枚举变量</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span> <span class=\"title\">day</span>;</span></span><br></pre></td></tr></table></figure>\n<p>这里的DAY是枚举名</p>\n<p>2、定义枚举类型的同时定义枚举变量</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125; day;</span><br></pre></td></tr></table></figure>\n\n<p>3、省略枚举名称，直接定义枚举变量</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125; day;</span><br></pre></td></tr></table></figure>\n<p>可以使用typedef定义别名</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">enum</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125; day;</span><br><span class=\"line\">day day1 day2;</span><br></pre></td></tr></table></figure>\n<p>其中day是这个枚举名的别名，提高代码可读性</p>\n<p>下面这串代码很好的展示了枚举的应用</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span> <span class=\"title\">day</span>;</span></span><br><span class=\"line\">    day = WED;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,day);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>枚举经常与switch一同使用</strong><br>下面的代码展示了这种情况</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">color</span> &#123;</span> red=<span class=\"number\">1</span>, green, blue &#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">enum</span>  <span class=\"title\">color</span> <span class=\"title\">favorite_color</span>;</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/* 用户输入数字来选择颜色 */</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;请输入你喜欢的颜色: (1. red, 2. green, 3. blue): &quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%u&quot;</span>, &amp;favorite_color);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/* 输出结果 */</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (favorite_color)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> red:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你喜欢的颜色是红色&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> green:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你喜欢的颜色是绿色&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> blue:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你喜欢的颜色是蓝色&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你没有选择你喜欢的颜色&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>补充</strong></p>\n<blockquote>\n<p>在所有教科书与c规范中，switch都是不允许case后接范围的，但是GNU C进行了扩展<br>可以使用case min … max这种用法表示范围（英文句号，前后有空格）</p>\n</blockquote>\n<p>示例</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> i;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>( <span class=\"string\">&quot;%d&quot;</span>,&amp;i);</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (i)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span> ... <span class=\"number\">3</span>:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;niubi\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"指针\"><a href=\"#指针\" class=\"headerlink\" title=\"指针\"></a>指针</h3><p>C语言中几乎最重要的地方来了，难度较大，必须掌握</p>\n<h4 id=\"指针是什么\"><a href=\"#指针是什么\" class=\"headerlink\" title=\"指针是什么\"></a>指针是什么</h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span> <span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> var_runoob = <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> *p;              <span class=\"comment\">// 定义指针变量</span></span><br><span class=\"line\">    p = &amp;var_runoob;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;var_runoob 变量的地址： %p\\n&quot;</span>, p);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/img/c-pointer.png\" class=\"lazyload\" data-srcset=\"/img/c-pointer.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>&amp;取址*取值<br><img src=\"/img/20230710103743.png\" class=\"lazyload\" data-srcset=\"/img/20230710103743.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p><strong>数组名即指针！！</strong><br><img src=\"/img/20230710105357.png\" class=\"lazyload\" data-srcset=\"/img/20230710105357.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>指针控制数组<br><img src=\"/img/20230710110332.png\" class=\"lazyload\" data-srcset=\"/img/20230710110332.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<h4 id=\"数组与指针\"><a href=\"#数组与指针\" class=\"headerlink\" title=\"数组与指针\"></a>数组与指针</h4><p>关于指针，内含的奥妙非常多，其中非常知名的就是数组即指针<br><strong>数组是指针的另一种表示</strong><br>我们可以这么看：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">char</span> a[<span class=\"number\">3</span>]= <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>,*(a+<span class=\"number\">2</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在这里面定义了一个字符串数组，但是我调用他的方式却是使用了指针<br>数组名就是一个指针常量，这里<strong>a</strong>的值是数组a[3]的首元素的地址<br>于是，我们可以这样：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">char</span> *a = <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>,a[<span class=\"number\">2</span>]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>与上面的代码并不会出现差别</p>\n<h4 id=\"多重指针\"><a href=\"#多重指针\" class=\"headerlink\" title=\"多重指针\"></a>多重指针</h4><p>可以定义一个指向指针的指针</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> *p = &amp;a;</span><br><span class=\"line\">    <span class=\"type\">int</span> **p2 = &amp;p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以此为准可以不断叠加指针，完成许多复杂的功能</p>\n<h3 id=\"结构体\"><a href=\"#结构体\" class=\"headerlink\" title=\"结构体\"></a>结构体</h3><p>与枚举有点相似<br>为了使有关联性的变量变得更加易控，也为了提高可读性，结构体因此而生</p>\n<p>结构体定义</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span>  <span class=\"title\">Stuructstudent</span>&#123;</span></span><br><span class=\"line\">    <span class=\"type\">int</span> num;</span><br><span class=\"line\">    <span class=\"type\">char</span> name;</span><br><span class=\"line\">    <span class=\"type\">char</span> sex;</span><br><span class=\"line\">    <span class=\"type\">int</span> age</span><br><span class=\"line\">&#125;;<span class=\"comment\">//声明结构体</span></span><br><span class=\"line\">Structstudent student1;<span class=\"comment\">//定义变量</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>实际上结构体就是一种数据类型，只不过是由程序员自己定义的<br>在实际生活中，我们会有各种各样的数据类型，如图书的名、ISBN、价格等可以集合为一个数据类型</p>\n</blockquote>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">book</span>&#123;</span></span><br><span class=\"line\">        <span class=\"type\">int</span> isbn;</span><br><span class=\"line\">        <span class=\"type\">char</span> name[<span class=\"number\">10</span>];</span><br><span class=\"line\">        <span class=\"type\">double</span> price;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    book b3= &#123;<span class=\"string\">&quot;活着&quot;</span>,<span class=\"number\">111111111</span>,<span class=\"number\">39</span>&#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意</strong></p>\n<blockquote>\n<p>需要注意的是，结构体中内存的分配是由结构体的中定义的变量占用的内存决定的<br>但是但是它却遵循整除内存原则，如上述的代码中<br>首先，计算机会找到一个可以被4（int的长度）整除的内存地址（如2000）<br>然后在2004后面找到可以被10（name数组的长度）整除的地址（如2010）<br>最后在在2020后面找到可以被8（double的长度）整除的地址（如2024）<br>最后还要将首末相连空隙进行填充，一共是32字节的长度，整体的长度还必须是结构里最大数据类型的长度的整数倍（这里是double的长度8的整数倍）<br>如果不是还要在后面进行填充（假如是36，就要填充到40）<br>所以在结构体中数据类型的定义的先后十分重要<br>在上述代码中只需要将isbn和name调换顺序就只需要24字节的空间   </p>\n</blockquote>\n<h2 id=\"51单片机\"><a href=\"#51单片机\" class=\"headerlink\" title=\"51单片机\"></a>51单片机</h2><h3 id=\"硬件设备与软件环境\"><a href=\"#硬件设备与软件环境\" class=\"headerlink\" title=\"硬件设备与软件环境\"></a>硬件设备与软件环境</h3><p><strong>单片机</strong></p>\n<ul>\n<li>stc89c52rc</li>\n</ul>\n<p><strong>软件环境</strong></p>\n<ul>\n<li><a href=\"https://blog.gavinccc.com//2024/01/28/VScode%E9%85%8D%E7%BD%AEC51%E7%8E%AF%E5%A2%83/\">Visual studio code + Embedded IDE + keil c</a><br>(点击跳转部署教程)<br><strong>外设</strong></li>\n<li>按钮*3</li>\n<li>4位数码管*1</li>\n<li>led*4</li>\n<li>蜂鸣器*1</li>\n<li>看门狗*1</li>\n<li>12mhz晶振</li>\n<li>usbin</li>\n</ul>\n<p><strong>注意</strong></p>\n<blockquote>\n<p>看芯片手册是一个非常重要的习惯<br>我们做的无非就是复现手册的内容而已<br>此篇章只保留作者认为重要的单片机知识</p>\n</blockquote>\n<h3 id=\"IO口的使用\"><a href=\"#IO口的使用\" class=\"headerlink\" title=\"IO口的使用\"></a>IO口的使用</h3><p>无需多言，上代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;Delay.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit led1=P2^<span class=\"number\">4</span>;</span><br><span class=\"line\">sbit led2=P2^<span class=\"number\">5</span>;</span><br><span class=\"line\">sbit led3=P2^<span class=\"number\">6</span>;</span><br><span class=\"line\">sbit led4=P2^<span class=\"number\">7</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        led1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led1 = 1;</span></span><br><span class=\"line\">        led2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led2 = 1;</span></span><br><span class=\"line\">        led3 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led3 = 1;</span></span><br><span class=\"line\">        led4 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led4 = 1;\t\t\t\t</span></span><br><span class=\"line\">        led1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led1 = 1;</span></span><br><span class=\"line\">        led2 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led2 = 1;</span></span><br><span class=\"line\">        led3 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led3 = 1;</span></span><br><span class=\"line\">        led4 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led4 = 1;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这是最简单的led流水灯效果，所有入门51的必备<br>IO口的控制流程如下<br>1.查看需要控制的外设的对应单片机的引脚<br>2.使用sbit定义引脚名（如led1）<br>3.为引脚编写1或0来控制引脚</p>\n<h3 id=\"按键的防抖\"><a href=\"#按键的防抖\" class=\"headerlink\" title=\"按键的防抖\"></a>按键的防抖</h3><p>我甚至不知道要不要给它单独开一个章节  </p>\n<blockquote>\n<p>我们使用按钮的时候一般使用判断  </p>\n</blockquote>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>（key1 == <span class=\"number\">1</span>）&#123;</span><br><span class=\"line\">        <span class=\"comment\">//代码区</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>然而造成的结果是，我们明明只想要一次运行，但是由于单片机速度太快，会造成非常多次运行<br>因此，我们需要防抖</p>\n</blockquote>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(key1 == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        delay(<span class=\"number\">20</span>);<span class=\"comment\">//延迟看个人而定</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(key1 == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//代码区</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>只需要一个简单延迟函数就完成了防抖</p>\n<p><strong>注意</strong></p>\n<blockquote>\n<p>不过，在较为大的工程中，延迟非常容易造成工程总体运行的堵塞情况<br>同时，延迟也无法很好的避免多次运行的问题<br>因此，在后续的工程开发中我们使用外部中断来实现按钮功能<br>外部中断是异步的（异步是计算机与电子信息中非常重要的概念）</p>\n</blockquote>\n<h3 id=\"数码管显示\"><a href=\"#数码管显示\" class=\"headerlink\" title=\"数码管显示\"></a>数码管显示</h3><p>数码管实现原理：请回顾数字电路技术课程</p>\n<p>无需多言，上代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REGX52.H&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;Delay.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit key1=P3^<span class=\"number\">2</span>;</span><br><span class=\"line\">sbit key2=P3^<span class=\"number\">3</span>;</span><br><span class=\"line\">sbit key3=P3^<span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管段码表</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> NixieTable[]=&#123;<span class=\"number\">0x03</span>,<span class=\"number\">0x9F</span>,<span class=\"number\">0x25</span>,<span class=\"number\">0x0D</span>,<span class=\"number\">0x99</span>,<span class=\"number\">0x49</span>,<span class=\"number\">0x41</span>,<span class=\"number\">0x1F</span>,<span class=\"number\">0x01</span>,<span class=\"number\">0x09</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管显示子函数</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Nixie</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> Location,Number)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">switch</span>(Location)\t\t<span class=\"comment\">//位码输出</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:P2=<span class=\"number\">0x7</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:P2=<span class=\"number\">0xB</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:P2=<span class=\"number\">0xD</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:P2=<span class=\"number\">0xE</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tP0=NixieTable[Number];\t<span class=\"comment\">//段码输出</span></span><br><span class=\"line\">\tDelay(<span class=\"number\">1</span>);\t\t\t\t<span class=\"comment\">//显示一段时间</span></span><br><span class=\"line\">\tP0=~<span class=\"number\">0x0</span>;\t\t\t\t<span class=\"comment\">//段码清0，消影</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> y = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> z = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(key1 ==<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tDelay(<span class=\"number\">80</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(key1 == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tx++;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span>(x&gt;<span class=\"number\">9</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tx = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\ty++;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span>(y&gt;<span class=\"number\">9</span>)</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\ty=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\t\tz++;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">1</span>,<span class=\"number\">1</span>);\t\t<span class=\"comment\">//在数码管的第1位置显示1</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">2</span>,<span class=\"number\">2</span>);\t\t<span class=\"comment\">//在数码管的第2位置显示2</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">3</span>,<span class=\"number\">3</span>);\t\t<span class=\"comment\">//在数码管的第3位置显示3</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">4</span>,<span class=\"number\">4</span>);\t\t<span class=\"comment\">//在数码管的第4位置显示4</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>流程</strong><br>1.弄清楚每个数字对应在数码管上的位置<br>2.位置的二进制表示<br>3.二进制转16进制<br>4.每一个数码管的启动方式（需让其他数码管关，否则出现全亮，使用延迟实现单独亮）<br>5.打包成函数，方便调用</p>\n<h3 id=\"外部中断\"><a href=\"#外部中断\" class=\"headerlink\" title=\"外部中断\"></a>外部中断</h3><h4 id=\"外部中断的定义与产生机理\"><a href=\"#外部中断的定义与产生机理\" class=\"headerlink\" title=\"外部中断的定义与产生机理\"></a>外部中断的定义与产生机理</h4><p><strong>定义</strong></p>\n<blockquote>\n<p>外部中断是单片机实时地处理外部事件的一种内部机制。当某种外部事件发生时，单片机的中断系统将迫使CPU暂停正在执行的程序，转而去进行中断事件的处理；中断处理完毕后．又返回被中断的程序处，继续执行下去。  </p>\n</blockquote>\n<p>换而言之</p>\n<blockquote>\n<p>我外部中断只要一开，你单片机就先把手中的事放放，先办我的事（领导既视感）  </p>\n</blockquote>\n<p><strong>产生机理</strong></p>\n<blockquote>\n<p>单片机在自主运行时一般是在执行一个死循环程序，在没有外界干预(输入信号)时它基本处于一个封闭状态。比如一个电子时钟，它会按时、分、秒的规律自主运行并通过输出设备(如液晶显示屏)把时间显示出来。在不需要对它进行调校时它不需要外部干预，自主封闭地运行。如果这个时钟足够准确而又不掉电的话，它可能一直处于这种封闭运行状态。但事情往往不会如此简单，在时钟刚刚上电或时钟需要重新校准．甚至时钟被带到不同时区的时候，就需要重新对时钟进行调校，这时就要求时钟必须具有调校功能。因此单片机系统往往又不会是一个单纯的封闭系统．它有些时候恰恰需要外部的干预，这也就是外部中断产生的根本原因。  </p>\n</blockquote>\n<blockquote>\n<p>在没有干预的情况下，单片机的程序在封闭状态下自主运行，如果在某一时刻需要响应一个外部事件(比如有按键按下)，这时就会用到外部中断。具体来讲，外部中断就是在单片机的一个引脚上，由于外部因素导致了一个电平的变化(比如由高变低)，而通过捕获这个变化，单片机内部自主运行的程序就会被暂时打断，转而去执行相应的中断处理程序，执行完后又回到原来中断的地方继续执行原来的程序。这个引脚上的电平变化，就申请了一个外部中断事件，而这个能申请外部中断的引脚就是外部中断的触发引脚。  </p>\n</blockquote>\n<p>以上来源于科普中国</p>\n<h4 id=\"外部中断的使用\"><a href=\"#外部中断的使用\" class=\"headerlink\" title=\"外部中断的使用\"></a>外部中断的使用</h4><p>以代码来解释</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit LED1 = P2^<span class=\"number\">4</span>;</span><br><span class=\"line\">sbit BEEP = P1^<span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Delay</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">int</span> xms)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(xms--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ti = <span class=\"number\">2</span>;</span><br><span class=\"line\">\t\tj = <span class=\"number\">239</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (--j);</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">while</span> (--i);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">InitInterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">0</span>;<span class=\"comment\">//低电平触发</span></span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;<span class=\"comment\">//外部中断1启动</span></span><br><span class=\"line\">\tPX0 =<span class=\"number\">1</span>;<span class=\"comment\">//外部中断1优先级高</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tEA= <span class=\"number\">1</span>;<span class=\"comment\">//总中断</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tInitInterrupt();</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tBEEP = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\tDelay(<span class=\"number\">10</span>);</span><br><span class=\"line\">        BEEP = <span class=\"number\">0</span>;     </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">openled1</span><span class=\"params\">()</span> interrupt 0</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tLED1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tBEEP = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个代码不按按钮的话就会持续的蜂鸣器开关，只要一按就会实现一直开</p>\n<blockquote>\n<p>只要按钮一按，中断启动，你主程序，往后稍稍，先干活先搞我的  </p>\n</blockquote>\n<blockquote>\n<p>在函数后面加上interrupt 0表示这个函数是外部中断1中断时运行的函数<br>interrupt后面的数字，根据下面的表格的中断编号</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">中断编号</th>\n<th align=\"center\">中断名称</th>\n<th align=\"center\">中断请求标志位</th>\n<th align=\"center\">中断允许控制位</th>\n<th align=\"center\">触发条件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">0</td>\n<td align=\"center\">外部中断0</td>\n<td align=\"center\">IE0</td>\n<td align=\"center\">EX0</td>\n<td align=\"center\">中断0对应的引脚检测到下降沿或低电平</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">定时器0</td>\n<td align=\"center\">TF0</td>\n<td align=\"center\">ET0</td>\n<td align=\"center\">定时器0溢出</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">外部中断1</td>\n<td align=\"center\">IE1</td>\n<td align=\"center\">EX1</td>\n<td align=\"center\">中断1对应的引脚检测到下降沿或低电平</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">定时器1</td>\n<td align=\"center\">TF1</td>\n<td align=\"center\">ET1</td>\n<td align=\"center\">定时器1溢出</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\">串口中断</td>\n<td align=\"center\">RI,TI</td>\n<td align=\"center\">ES</td>\n<td align=\"center\">串口接收或发送一帧数据</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">定时器2</td>\n<td align=\"center\">TF2</td>\n<td align=\"center\">ET2</td>\n<td align=\"center\">定时器2溢出</td>\n</tr>\n<tr>\n<td align=\"center\">6</td>\n<td align=\"center\">外部中断2</td>\n<td align=\"center\">IE2</td>\n<td align=\"center\">EX2</td>\n<td align=\"center\">中断2对应的引脚检测到下降沿或低电平</td>\n</tr>\n<tr>\n<td align=\"center\">7</td>\n<td align=\"center\">外部中断3</td>\n<td align=\"center\">IE3</td>\n<td align=\"center\">EX3</td>\n<td align=\"center\">中断3对应的引脚检测到下降沿或低电平</td>\n</tr>\n</tbody></table>\n<h4 id=\"中断优先级\"><a href=\"#中断优先级\" class=\"headerlink\" title=\"中断优先级\"></a>中断优先级</h4><p>优先级在代码里面也有注释，使用PX0就可以让外部中断0优先级变高</p>\n<blockquote>\n<p>默认的优先级是按照中断编号从小到大依次递减的<br>PX(X)H、PX(X)可以定义外部中断优先级<br>PT(X)H、PT(X)可以定义定时器优先级<br>PSH、PS可以定义串口优先级</p>\n</blockquote>\n<h3 id=\"定时器\"><a href=\"#定时器\" class=\"headerlink\" title=\"定时器\"></a>定时器</h3><h4 id=\"定时器工作原理\"><a href=\"#定时器工作原理\" class=\"headerlink\" title=\"定时器工作原理\"></a>定时器工作原理</h4><p><strong>和外部中断一样，定时器也是异步的</strong></p>\n<blockquote>\n<p>定时器的执行，，不会依靠cpu的资源，它是独立运行的，独立于cpu的外部计数器，它的计数时长依赖于时钟周期，时钟周期是晶振频率的倒数（计数的间隔的时长的来源），通过设定不同的初值实现不同的时间间隔  </p>\n</blockquote>\n<p>和外部中断一样，它的也是异步的，运行完至后可以产生中断，这样，就可以实现非阻塞式的延迟（在主进程中延迟会阻碍其他函数的运行）  </p>\n<blockquote>\n<p>就像你正在吃饭，一边又在给水桶里放水，吃着吃着，水满了，你就得赶快去把水龙头关掉或者换一个空的水桶，再回来吃饭。<br>单片机的定时器就像是一个水桶，你让它启动了，也就是水龙头打开了；开始装水了；定时在每个机器周期不断自动加 1，最后溢出了；水桶的水不断增加，最也就满出来了；定时器溢出时，你就要去做处理了；水桶的水满了，你也应该处理一下了；处理完后，单片机又可以回到刚刚开停止的地方继续运行；水桶处理了，先前你在做什么也可以继续去做什么了。</p>\n</blockquote>\n<h4 id=\"计数初值与计时时长\"><a href=\"#计数初值与计时时长\" class=\"headerlink\" title=\"计数初值与计时时长\"></a>计数初值与计时时长</h4><p>在单片机中，计数初值与计数时长之间的关系可以通过计时器的工作原理来解释。通常情况下，计时器是由一个时钟源提供时钟脉冲，计数器根据这些脉冲进行计数。计数初值决定了计数器的初始值，而计数时长则是计数器从初始值开始计数到达最终值所经过的时钟脉冲数。</p>\n<p>假设计数器的时钟源频率为 $$ (f_{clk}) $$，计数初值为$$ (N_{initial}) $$，计数器的最大计数值为$$ (N_{max}) $$，那么计数时长$$ (T) $$与计数初值$$ (N_{initial}) $$之间的关系可以用下面的公式表示：</p>\n<p>$$<br>[ T &#x3D; \\frac{(N_{max} - N_{initial} + 1)}{f_{clk}} ]<br>$$</p>\n<p><strong>然而我们定义计数初值有tl和th而且是使用16进制，这该怎么计算呢？</strong></p>\n<p>跟着我的步骤，轻松算出来！</p>\n<blockquote>\n<p>1.将 TH 和 TL 合并为一个16位的值，假设 TH 为高8位，TL 为低8位。<br>2.将这个16位的值转换为10进制，得到计数初值的实际数值。<br>3.使用计数初值的实际数值代入计时器的时钟频率，根据时钟频率计算出对应的时间。</p>\n</blockquote>\n<p>如果时钟频率是12MHz，那么使用之前提到的计数初值 TH 和 TL，合并为 16 位的值，然后将其转换为10进制。假设合并后的值为 0xABCD（TH 为 0xAB，TL 为 0xCD），那么按照之前的步骤，将 0xABCD 转换为10进制。得到43981。</p>\n<p>接着，使用时钟频率 12MHz（12,000,000Hz），可以使用以下公式计算对应的时间：<br>$$<br>[ T &#x3D; \\frac{65536 - 43981}{12,000,000} ]<br>$$<br>这将给出计数初值对应的时间，单位为秒。    </p>\n<h4 id=\"定时器的使用\"><a href=\"#定时器的使用\" class=\"headerlink\" title=\"定时器的使用\"></a>定时器的使用</h4><p>ok话不多说上代码！！！</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit led1 = P2^<span class=\"number\">4</span>;</span><br><span class=\"line\">sbit beep = P1^<span class=\"number\">0</span>;</span><br><span class=\"line\">sbit key1=P3^<span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管段码表</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> NixieTable[]=&#123;<span class=\"number\">0x03</span>,<span class=\"number\">0x9F</span>,<span class=\"number\">0x25</span>,<span class=\"number\">0x0D</span>,<span class=\"number\">0x99</span>,<span class=\"number\">0x49</span>,<span class=\"number\">0x41</span>,<span class=\"number\">0x1F</span>,<span class=\"number\">0x01</span>,<span class=\"number\">0x09</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> y = <span class=\"number\">60</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Delay</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">int</span> xms)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(xms--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ti = <span class=\"number\">2</span>;</span><br><span class=\"line\">\t\tj = <span class=\"number\">239</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (--j);</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">while</span> (--i);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管显示子函数</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Nixie</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> Location,Number)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">switch</span>(Location)\t\t<span class=\"comment\">//位码输出</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:P2=<span class=\"number\">0x7</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:P2=<span class=\"number\">0xB</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:P2=<span class=\"number\">0xD</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:P2=<span class=\"number\">0xE</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tP0=NixieTable[Number];\t<span class=\"comment\">//段码输出</span></span><br><span class=\"line\">\tDelay(<span class=\"number\">1</span>);<span class=\"comment\">//显示一段时间</span></span><br><span class=\"line\">\tP0=~<span class=\"number\">0x0</span>;\t\t\t\t<span class=\"comment\">//段码清0，消影</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">InitInterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tPX0 =<span class=\"number\">1</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tET0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tEA = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">openled1</span><span class=\"params\">()</span> interrupt 0</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\ty = <span class=\"number\">60</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">timer</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tTMOD = <span class=\"number\">0x01</span>;</span><br><span class=\"line\">\tTH0 = <span class=\"number\">0xFC</span>;</span><br><span class=\"line\">\tTL0 = <span class=\"number\">0x18</span>;</span><br><span class=\"line\">\tTR0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">timerhandle</span><span class=\"params\">()</span> interrupt 1</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">int</span> icount;</span><br><span class=\"line\">\tTH0 = <span class=\"number\">0xFC</span>;</span><br><span class=\"line\">\tTL0 = <span class=\"number\">0x18</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\ticount++;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(icount &gt;= <span class=\"number\">1000</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ticount = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\ty--;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(y == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\ty = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t    beep = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tInitInterrupt();</span><br><span class=\"line\">\ttimer();</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">1</span>,<span class=\"number\">0</span>);\t\t<span class=\"comment\">//在数码管的第1位置显示1</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">2</span>,<span class=\"number\">0</span>);\t\t<span class=\"comment\">//在数码管的第2位置显示2</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">3</span>,y/<span class=\"number\">10</span>);\t\t<span class=\"comment\">//在数码管的第3位置显示3</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">4</span>,y%<span class=\"number\">10</span>);\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>该代码实现了一个简单的秒表（虽然只有秒针）  </p>\n<p>这里计数应该是1毫秒的时间间隔，使用icount变量的累加实现1秒  </p>\n<p>interrupt 1所在的函数就是定时器计数溢出函数  </p>\n<p>TMOD定义了该定时器为工作模式1，16位计数器  </p>\n<p><strong>学到这，参透这个代码是起码的</strong></p>\n<h4 id=\"快速计算定时时长\"><a href=\"#快速计算定时时长\" class=\"headerlink\" title=\"快速计算定时时长\"></a>快速计算定时时长</h4><p>根据上面的公式，我们可以算出需要定时的时长，可是，我懒啊，算不了了啊，脑子不够啊<br><strong>其实，硬件公司都做好了，我们直接用就好了</strong></p>\n<p><strong>懒人启动器，启动！</strong></p>\n<p>以这个单片机的公司为例，人家早就把定时器的计算接口放在烧录软件了</p>\n<p>我们打开烧录软件，点开这个按钮<strong>定时器计算器</strong>就可以看到以下画面</p>\n<p><img src=\"/../img/stc%E5%AE%9A%E6%97%B6%E5%99%A8.png\" class=\"lazyload\" data-srcset=\"/../img/stc%E5%AE%9A%E6%97%B6%E5%99%A8.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\">    </p>\n<p><strong>嘿嘿，只要我们轻轻的点几个按钮，就可以生成对应时长的代码了</strong>  </p>\n<p><img src=\"/../img/stc.jpg\" class=\"lazyload\" data-srcset=\"/../img/stc.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\">     </p>\n<p><strong>值得注意的是，单片机型号、时钟频率不要选错哦</strong></p>\n<p>对了，我们这个单片机集成板的晶振是12mhz的</p>\n<h3 id=\"串口通信\"><a href=\"#串口通信\" class=\"headerlink\" title=\"串口通信\"></a>串口通信</h3><p>嗨，好多呀写不下去了累死了</p>\n<h4 id=\"并行通信与串行通信\"><a href=\"#并行通信与串行通信\" class=\"headerlink\" title=\"并行通信与串行通信\"></a>并行通信与串行通信</h4><h5 id=\"并行通信\"><a href=\"#并行通信\" class=\"headerlink\" title=\"并行通信\"></a>并行通信</h5><p>当我们在一个机器传一个数据给另外一个机器的时候,我们是怎么传的呢？</p>\n<blockquote>\n<p>你可能第一时间想到计算机是二进制的，我们要先将数据转为二进制<em>（编码，请回顾数电课程）</em>，这是对的<br>比如一个数字9，二进制表示为1001，我们要传1001  </p>\n</blockquote>\n<p>我们怎么传1001呢？</p>\n<blockquote>\n<p>你可能会想到，诶！拿4条线把2个机器接起来，同一时间内，低电平表示0，高电平表示1，这样，就可以把1001作为电平信号传过去了，只要在另外的机器将二进制转为十进制<em>（译码，请回顾数电课程）</em>即可。  </p>\n</blockquote>\n<p>那么，恭喜你，你已经理解了并行通信</p>\n<p><img src=\"/../img/bx.png\" class=\"lazyload\" data-srcset=\"/../img/bx.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>如上图所示，只要将1001按顺序放在D1,D2,D3,D4即可，需要注意的是，必须要同一时段发送与接收<br>这就是并行通信，速度快，好理解<br>但是问题也接踵而来<br><strong>如果我要发送非常多的数据，岂不是要非常多的线？</strong><br>我哪有这么多钱买线<br><strong>因此，串行通信！</strong></p>\n<h5 id=\"串行通信\"><a href=\"#串行通信\" class=\"headerlink\" title=\"串行通信\"></a>串行通信</h5><p>为了解决线路多，不好操控的问题，串行通信应运而生，什么是串行通信呢，其实就是一条线传多个数据<br>好的，你来想想怎么实现一条数据线怎么传多个数据呢？  </p>\n<blockquote>\n<p>你可能会想到，欸一段时间只传一位数据不就好了吗，然后一直传，直到传完，比如传1001.我就先传一个1，然后再传两个0，最后来个1完事，接收端再拼成一整个1001即可  </p>\n</blockquote>\n<p>这么看，你真的是天才，你又把串行通信给领悟了</p>\n<blockquote>\n<p>整体思路就是这样了，只要固定好每一位数据的发送时间，接收端按照约定好的时间接收数据，即可完成通信</p>\n</blockquote>\n<p><img src=\"/../img/cx.png\" class=\"lazyload\" data-srcset=\"/../img/cx.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>如图所示，将1001放在D数组中，一位一位的发送，一位一位的接收，即可完成通信<br>同步和异步串行通信的区别是异步没有时钟线<br>需要注意的是，每一位发送的时间间隔必须相同</p>\n<h4 id=\"单工、半双工、全双工数据传输\"><a href=\"#单工、半双工、全双工数据传输\" class=\"headerlink\" title=\"单工、半双工、全双工数据传输\"></a>单工、半双工、全双工数据传输</h4><p><strong>单工</strong></p>\n<blockquote>\n<p>一条线，单方向传输  </p>\n</blockquote>\n<p><strong>半双工</strong></p>\n<blockquote>\n<p>一条线，双方向传输  </p>\n</blockquote>\n<p><strong>全双工</strong></p>\n<blockquote>\n<p>单方向传输，但是两条线</p>\n</blockquote>\n<h4 id=\"UART协议\"><a href=\"#UART协议\" class=\"headerlink\" title=\"UART协议\"></a>UART协议</h4><p>UART协议就是串口通信的协议，是异步串行全双工通信协议</p>\n<p>1.异步性： UART是一种异步协议，即发送和接收端不共享时钟信号。相对于同步协议，UART不需要发送和接收端保持精确的时钟同步，因此更为灵活。</p>\n<p>2.数据帧： UART通信以数据帧的形式传输数据。数据帧包括起始位（Start Bit）、数据位（通常为8位，可以是5到9位）、可选的奇偶校验位（Parity Bit，用于错误检测）、停止位（Stop Bit）。起始位和停止位的作用是标识数据帧的开始和结束。</p>\n<p>3.波特率： 波特率（Baud Rate）是衡量UART通信速率的单位，表示每秒传输的比特数。波特率定义了数据信号的传输速率，发送和接收端必须使用相同的波特率才能正常通信。</p>\n<p>4.起始位和停止位： 起始位通常是逻辑 0，用于指示数据帧的开始。停止位是逻辑 1，用于指示数据帧的结束。数据帧的每一位都以起始位开始，以停止位结束。</p>\n<p><strong>数据传输流程：</strong></p>\n<blockquote>\n<p>发送端：将数据位、奇偶校验位、起始位和停止位按照帧的格式组成数据帧，通过TXD发送。<br>接收端：通过检测RXD起始位的开始，开始接收数据。接收端根据帧的格式提取数据位、奇偶校验位、停止位等信息。</p>\n</blockquote>\n<p><img src=\"/../img/uart.png\" class=\"lazyload\" data-srcset=\"/../img/uart.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>知道这些东西，我们就可以想象一下传输的过程了</p>\n<blockquote>\n<p>1.固定好时间间隔，也就是固定好波特率<br>2.发送起始位<br>3.根据数据发送数据的每一位<br>4.发送结束位表示发送结束</p>\n</blockquote>\n<blockquote>\n<p>假设我要发送115<br>首先我们将115转化为二进制，即01110011<br>使用代码设定好波特率<br>给发送0表示开始发送（就是将TXD设为0）<br>时间宽度走完后给TXD设为1（01110011的第一位）一个时间宽度<br>重复8次这个过程（每一次的TXD的值换到下一位）<br>8次后发送1（将TXD设为1）表示结束</p>\n</blockquote>\n<p><img src=\"/../img/uart1.png\" class=\"lazyload\" data-srcset=\"/../img/uart1.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image\"></p>\n<p>恭喜恭喜，串口通信也给我们造出来了，可以自己做一个串口了</p>\n<p><strong>不过再stc89c52rc中没这么麻烦，已经有现成的uart模块给我们使用了</strong></p>\n<h4 id=\"串口中断的使用\"><a href=\"#串口中断的使用\" class=\"headerlink\" title=\"串口中断的使用\"></a>串口中断的使用</h4><p>首先是串口初始化和定义</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">inituart</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tSCON = <span class=\"number\">0x50</span>;\\\\串口工作模式</span><br><span class=\"line\">\tTMOD = <span class=\"number\">0x20</span>;\\\\定时器工作模式</span><br><span class=\"line\">\tPCON = <span class=\"number\">0X80</span>;\\\\波特率翻倍</span><br><span class=\"line\">\tTL1 = <span class=\"number\">0XF3</span>;\\\\设定定时初值</span><br><span class=\"line\">\tTH1 = TL1;</span><br><span class=\"line\">\tTR1 = <span class=\"number\">1</span>;\\\\定时器溢出标志开</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">initinterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tES = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tEA = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<p>这个无需多言，注意波特率即可</p>\n<p>发送函数代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">uarthander</span><span class=\"params\">( <span class=\"type\">unsigned</span> <span class=\"type\">char</span> sibuffer )</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tSBUF = sibuffer;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(!TI);</span><br><span class=\"line\">    TI = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">updatehander</span><span class=\"params\">( <span class=\"type\">char</span>* str )</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(*str)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tuarthander(*str++);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>SBUF是缓存区，SBUF被赋值，串口助手就会输出这个值<br>这个代码也挺简单的，SBUF一次只能赋一个值，我们使用updatehander函数实现输出字符串<br>调用这个函数就可以输出字符串</p>\n<p>接收函数代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">char</span> recestring[<span class=\"number\">10</span>];  <span class=\"comment\">// 用于存储接收到的字符串，最大长度为10</span></span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">0</span>;  <span class=\"comment\">// 记录当前接收到的字符在 recestring 数组中的索引</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">comhander</span><span class=\"params\">()</span> interrupt 4</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (RI)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> w;</span><br><span class=\"line\">        w = SBUF;  <span class=\"comment\">// 从串口缓冲区读取接收到的字符</span></span><br><span class=\"line\">        recestring[i++] = w;  <span class=\"comment\">// 将字符存储到 recestring 数组中，并更新索引</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (w == <span class=\"string\">&#x27;\\n&#x27;</span>)  <span class=\"comment\">// 如果接收到换行符 &#x27;\\n&#x27;，表示接收到一条完整的字符串</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            recestring[i] = <span class=\"string\">&#x27;\\0&#x27;</span>;  <span class=\"comment\">// 在字符串末尾添加 null 终止符，形成一个C风格字符串</span></span><br><span class=\"line\">            updatehander(recestring);  <span class=\"comment\">// 调用处理接收到字符串的函数</span></span><br><span class=\"line\">            i = <span class=\"number\">0</span>;  <span class=\"comment\">// 重置索引，准备接收下一条字符串</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        RI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除接收中断标志位</span></span><br><span class=\"line\">        TI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除发送中断标志位</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>定义了一个数组，每一次都将接收到的值放在数组中直到值是换行符的时候才会将其视为完整的字符串<br>我们将接收和发送函数分开，这样就可以处理更多问题</p>\n<p>下面是我的示例工程</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span>  <span class=\"comment\">// 包含8051单片机的寄存器定义头文件</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit led1 = P2^<span class=\"number\">4</span>;  <span class=\"comment\">// 定义 LED1 的引脚</span></span><br><span class=\"line\">sbit led2 = P2^<span class=\"number\">5</span>;  <span class=\"comment\">// 定义 LED2 的引脚</span></span><br><span class=\"line\">sbit led3 = P2^<span class=\"number\">6</span>;  <span class=\"comment\">// 定义 LED3 的引脚</span></span><br><span class=\"line\">sbit led4 = P2^<span class=\"number\">7</span>;  <span class=\"comment\">// 定义 LED4 的引脚</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">char</span> sib[<span class=\"number\">4</span>], a, b, c, d;  <span class=\"comment\">// 定义静态变量，用于存储串口接收的数据和数码管显示的数字</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Delay</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">int</span> xms)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(xms--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ti = <span class=\"number\">2</span>;</span><br><span class=\"line\">\t\tj = <span class=\"number\">239</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (--j);</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">while</span> (--i);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> NixieTable[] = &#123;<span class=\"number\">0x03</span>, <span class=\"number\">0x9F</span>, <span class=\"number\">0x25</span>, <span class=\"number\">0x0D</span>, <span class=\"number\">0x99</span>, <span class=\"number\">0x49</span>, <span class=\"number\">0x41</span>, <span class=\"number\">0x1F</span>, <span class=\"number\">0x01</span>, <span class=\"number\">0x09</span>&#125;;  <span class=\"comment\">// 数码管对应数字的表格</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Nixie</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> Location, Number)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">switch</span>(Location)  <span class=\"comment\">// 控制数码管的位置</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>: P2 = <span class=\"number\">0x7</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>: P2 = <span class=\"number\">0xB</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>: P2 = <span class=\"number\">0xD</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span>: P2 = <span class=\"number\">0xE</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tP0 = NixieTable[Number];  <span class=\"comment\">// 显示对应数字</span></span><br><span class=\"line\">\tDelay(<span class=\"number\">5</span>);  <span class=\"comment\">// 延时</span></span><br><span class=\"line\">\tP0 = ~<span class=\"number\">0x0</span>;  <span class=\"comment\">// 关闭数码管</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">inituart</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tSCON = <span class=\"number\">0x50</span>;  <span class=\"comment\">// 配置串口工作方式</span></span><br><span class=\"line\">\tTMOD = <span class=\"number\">0x20</span>;  <span class=\"comment\">// 配置计时器工作方式</span></span><br><span class=\"line\">\tPCON = <span class=\"number\">0X80</span>;  <span class=\"comment\">// 设置波特率倍增</span></span><br><span class=\"line\">\tTL1 = <span class=\"number\">0XF3</span>;  <span class=\"comment\">// 计时器1低位初始值</span></span><br><span class=\"line\">\tTH1 = TL1;  <span class=\"comment\">// 计时器1高位初始值</span></span><br><span class=\"line\">\tTR1 = <span class=\"number\">1</span>;  <span class=\"comment\">// 启动计时器1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">initinterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">1</span>;  <span class=\"comment\">// 外部中断0触发方式为下降沿触发</span></span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;  <span class=\"comment\">// 允许外部中断0</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tES = <span class=\"number\">1</span>;  <span class=\"comment\">// 允许串口中断</span></span><br><span class=\"line\">\tEA = <span class=\"number\">1</span>;  <span class=\"comment\">// 允许总中断</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">uarthander</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> sibuffer)</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tSBUF = sibuffer;  <span class=\"comment\">// 将数据发送到串口缓冲区</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (!TI);  <span class=\"comment\">// 等待发送完成</span></span><br><span class=\"line\">    TI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除发送中断标志位</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">lightup</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> byte)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled1 = ~led1;  <span class=\"comment\">// 切换 LED1 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">2</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled2 = ~led2;  <span class=\"comment\">// 切换 LED2 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">3</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled3 = ~led3;  <span class=\"comment\">// 切换 LED3 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">4</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled4 = ~led4;  <span class=\"comment\">// 切换 LED4 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">updatehander</span><span class=\"params\">(<span class=\"type\">char</span>* str)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(*str)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tuarthander(*str++);  <span class=\"comment\">// 逐字符发送字符串到串口</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">handergo</span><span class=\"params\">()</span> interrupt 0</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tupdatehander(<span class=\"string\">&quot;Hello,World\\n&quot;</span>);  <span class=\"comment\">// 外部中断0触发时发送 &quot;Hello,World\\n&quot; 到串口</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">char</span> w = <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">abcd</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\ta = sib[<span class=\"number\">0</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">\tb = sib[<span class=\"number\">1</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">\tc = sib[<span class=\"number\">2</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">\td = sib[<span class=\"number\">3</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">comhander</span><span class=\"params\">()</span> interrupt 4</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tw = SBUF;  <span class=\"comment\">// 从串口缓冲区读取接收到的字符</span></span><br><span class=\"line\">\tsib[j++] = w;  <span class=\"comment\">// 存储接收到的字符</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(j &gt;= <span class=\"number\">4</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tj = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\tabcd();  <span class=\"comment\">// 处理接收到的字符，转换为数字</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tRI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除接收中断标志位</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tlightup(sib);  <span class=\"comment\">// 控制LED状态</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tinitinterrupt();  <span class=\"comment\">// 初始化中断</span></span><br><span class=\"line\">\tinituart();  <span class=\"comment\">// 初始化串口</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;\t\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">1</span>, b);\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">2</span>, c);\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">3</span>, d);\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">4</span>, a);  <span class=\"comment\">// 循环显示数字到数码管</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>这个代码完成了在串口助手输入4位数字，数码管显示这4位数字的功能<br>简单吧，这就是内置uart的使用<br>那么接下来，我们就得自己做一个串口了</p>\n<h4 id=\"模拟串口\"><a href=\"#模拟串口\" class=\"headerlink\" title=\"模拟串口\"></a>模拟串口</h4><p>实际上就是根据uart协议的内容，自己写一个串口出来</p>\n<p>前文已经详细的说明了流程  </p>\n<blockquote>\n<p>1.固定好时间间隔，也就是固定好波特率<br>2.发送起始位<br>3.根据数据发送数据的每一位<br>4.发送结束位表示发送结束  </p>\n</blockquote>\n<p>话不多说，上代码！</p>\n<p>串口初始化</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sbit RXD2 = P3^<span class=\"number\">0</span>;  <span class=\"comment\">// 定义串口接收引脚</span></span><br><span class=\"line\">sbit TXD2 = P3^<span class=\"number\">1</span>;  <span class=\"comment\">// 定义串口发送引脚</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> buffer[<span class=\"number\">20</span>];  <span class=\"comment\">// 存储接收到的数据</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> getnum = <span class=\"number\">0</span>;  <span class=\"comment\">// 接收数据的计数器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">UartInit</span><span class=\"params\">()</span>  <span class=\"comment\">// 串口初始化函数，波特率：4800bps @ 12.000MHz</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    TMOD = <span class=\"number\">0x20</span>;  <span class=\"comment\">// 设置定时器模式\t\t</span></span><br><span class=\"line\">    TH1 = <span class=\"number\">0x30</span>;     </span><br><span class=\"line\">    TL1 = <span class=\"number\">0x30</span>;    </span><br><span class=\"line\">    EA = <span class=\"number\">1</span>;</span><br><span class=\"line\">    ET1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    TF1 = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除TF1标志</span></span><br><span class=\"line\">    TR1 = <span class=\"number\">1</span>;  <span class=\"comment\">// 定时器1开始计时</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">uart</span><span class=\"params\">()</span> interrupt 3</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (TR1 == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        TH1 = <span class=\"number\">0x30</span>;  <span class=\"comment\">// 波特率4800bps  </span></span><br><span class=\"line\">        TL1 = <span class=\"number\">0x30</span>;  <span class=\"comment\">// 定时器</span></span><br><span class=\"line\">        TF1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">waittf</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (TF1 == <span class=\"number\">0</span>);<span class=\"comment\">//定时器溢出做延迟</span></span><br><span class=\"line\">    TF1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>发送函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">putdata</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> str)</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> i = <span class=\"number\">8</span>;</span><br><span class=\"line\">    str = str + str;<span class=\"comment\">//由于波特率误差，发送的AscII码会小一半所以我直接加一倍</span></span><br><span class=\"line\">    TR1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    TXD2 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    waittf();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        TXD2 = str &amp; <span class=\"number\">0x01</span>;</span><br><span class=\"line\">        waittf();</span><br><span class=\"line\">        str &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    TXD2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    waittf();</span><br><span class=\"line\">    TR1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">putdatastr</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> *str)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (*str)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        putdata(*str);  <span class=\"comment\">// 发送字符串中的每个字符</span></span><br><span class=\"line\">        str++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>由于波特率误差，发送的AscII码会小一半所以我直接加一倍<br>首先赋值TXD2为1为起始位<br>随后使用waitf函数做时间间隔<br>使用&amp;0x01将值位赋值给TXD实现uart中的每一位数据位传输重复8次<br>最后发送结束位  </p>\n</blockquote>\n<p>一样的道理，接收函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">getdata</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> str = <span class=\"number\">0x0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (RXD2 == <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        TR1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        waittf();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (i &lt; <span class=\"number\">8</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            str &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (RXD2 == <span class=\"number\">1</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                str |= <span class=\"number\">0x80</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            waittf();</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        buffer[getnum++] = str;  <span class=\"comment\">// 存储接收到的数据</span></span><br><span class=\"line\">        TR1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(getnum == <span class=\"number\">20</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        getnum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>监控RXD，只要为0立马开始赋值<br>起始位、传数据位<br>监控到RXD不为0就结束接收<br>其余流程与发送函数原理相同</p>\n</blockquote>\n<p>最后，附上main函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    TXD2 = <span class=\"number\">0</span>;  <span class=\"comment\">// 初始化串口发送引脚</span></span><br><span class=\"line\">    UartInit();  <span class=\"comment\">// 初始化串口</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(RXD2 == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> maxnum = <span class=\"number\">10</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (maxnum--)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (RXD2 == <span class=\"number\">0</span>)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    getdata();  <span class=\"comment\">// 接收数据</span></span><br><span class=\"line\">                    maxnum =  <span class=\"number\">10</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(buffer[<span class=\"number\">0</span>] != <span class=\"number\">0</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                putdatastr(buffer);  <span class=\"comment\">// 发送接收到的数据</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (buffer[i] != <span class=\"number\">0</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        buffer[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                getnum = <span class=\"number\">0</span>;</span><br><span class=\"line\">                putdata(<span class=\"number\">0x0d</span>);  <span class=\"comment\">// 发送回车符</span></span><br><span class=\"line\">                putdata(<span class=\"number\">0x0a</span>);  <span class=\"comment\">// 发送换行符</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这样，就实现了自己做一个模拟串口，关键在于调波特率<br>需要十分准确才可以正常传输数据<br>在51大作业篇，我会详细写明模拟串口接收时会与其他中断冲突导致乱码，在这里不进行过多的讨论</p>\n","excerpt":"","more":"<h2 id=\"c语言程序入门应用\"><a href=\"#c语言程序入门应用\" class=\"headerlink\" title=\"c语言程序入门应用\"></a>c语言程序入门应用</h2><h3 id=\"关键字与数据类型\"><a href=\"#关键字与数据类型\" class=\"headerlink\" title=\"关键字与数据类型\"></a>关键字与数据类型</h3><p><img src=\"/img/2023-07-08101610.png\" alt=\"image\"></p>\n<p>#include &#x3D;&gt; 包含头文件<br><strong>头文件预处理在源文件与编译器之间</strong><br>#define &#x3D;&gt; 宏定义<br>一般在头部，将c中某关键字进行替换</p>\n<p><img src=\"/img/20230708102636.jpg\" alt=\"ima\"></p>\n<blockquote>\n<p>32个关键字，编译器预先定义了有一定物理意义的字符串 &#x3D;&gt;不同编译器有不&gt;同的定义sizeof 也是关键字:查看变量在内存空间中容量的工具，用法sizeof(变量)通&gt;过关键字定义的不同数据类型的变量，限制变量 (资源)的大小(e.g.4字节，2字节…)</p>\n</blockquote>\n<p><img src=\"/img/2023-07-08102810.png\" alt=\"imag\"></p>\n<p>c中的数据类型有明确规范，无论输入还是输出都要标明</p>\n<blockquote>\n<p>   %d 十进制有符号整数<br>   %u 十进制无符号整数<br>   %f 浮点数<br>   %s 字符串<br>   %c 单个字符<br>   %p 指针的值<br>   %e 指数形式的浮点数<br>   %x, %X 无符号以十六进制表示的整数<br>   %o 无符号以八进制表示的整数<br>   %g 把输出的值按照 %e 或者 %f 类型中输出长度较小的方式输出<br>   %p 输出地址符<br>   %lu 32位无符号整数<br>   %llu 64位无符号整数<br>   %% 输出百分号字符本身。   </p>\n</blockquote>\n<blockquote>\n<p>   除了格式化说明符之外，printf() 函数还支持一些标志和选项，用于控制输出的精度、宽度、填充字符和对齐方式等。  例如：<br>   %-10s：左对齐并占用宽度为 10 的字符串；<br>   %5.2f：右对齐并占用宽度为 5，保留两位小数的浮点数；<br>   %#x：输出带有 0x 前缀的十六进制数。</p>\n</blockquote>\n<h3 id=\"局部变量、全局变量、静态变量\"><a href=\"#局部变量、全局变量、静态变量\" class=\"headerlink\" title=\"局部变量、全局变量、静态变量\"></a>局部变量、全局变量、静态变量</h3><p>对于单一文件而言的:局部变量、全局变量、静态变量</p>\n<blockquote>\n<p>局部变量:定义在函数内部的变量&#x3D;&gt;代码块作用域<br>全局变量:定义在函数外部的变量&#x3D;&gt;文件作用域<br>静态变量:有static修饰的变量<br>有很多种组合，不需要都搞清楚，等遇到了再分析: where (可见性)?&amp; static (生命周期)?</p>\n</blockquote>\n<p>下面这个例子很好的展示了这一点并且展示了冒泡排序<br><strong>示例</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"class\"><span class=\"keyword\">class</span>[10];</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) <span class=\"comment\">// 循环输入10次</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;class[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你输入了：&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) <span class=\"comment\">//遍历数组并输出</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>,class[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) <span class=\"comment\">//冒泡排序</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (class[j+<span class=\"number\">1</span>]&gt;class[j])</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> null = class[j];</span><br><span class=\"line\">                <span class=\"class\"><span class=\"keyword\">class</span>[<span class=\"title\">j</span>] =</span> <span class=\"class\"><span class=\"keyword\">class</span>[<span class=\"title\">j</span>+1];</span></span><br><span class=\"line\">                <span class=\"class\"><span class=\"keyword\">class</span>[<span class=\"title\">j</span>+1] =</span> null;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) <span class=\"comment\">//遍历排序好的数组并输出</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;排第%d的数是%d\\n&quot;</span>,j+<span class=\"number\">1</span>,class[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>卧槽无语了，刚开始写的博客，这个代码应该是上一章节的</p>\n<h3 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h3><p>例：char a[num]&#x3D;{……}</p>\n<p><strong>当char中使用中文时，应该是二维数组</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">char wday[7][7] = &#123;<span class=\"string\">&quot;星期一&quot;</span>,<span class=\"string\">&quot;星期二&quot;</span>,<span class=\"string\">&quot;星期三&quot;</span>,<span class=\"string\">&quot;星期四&quot;</span>,<span class=\"string\">&quot;星期五&quot;</span>,<span class=\"string\">&quot;星期六&quot;</span>,<span class=\"string\">&quot;星期天&quot;</span>&#125;;</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意事项</strong></p>\n<blockquote>\n<p>int a[]&#x3D;{……}; 可以在定义的时候给出初始值。可省略。<br>int b[][5]&#x3D;{…}; 同上，但是第二个不能省略<br>a[]&#x3D;3; 这样做就不对了，里面没有定位，不能省略。<br>b[][2]&#x3D;2; 同上，不能省略。 a[x]&#x3D;3；这样做也对，但是要保证变量x的值正确。C不会自动给你查越界。</p>\n</blockquote>\n<p><strong>以下例子很好的展示数组</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span>  <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> tick = <span class=\"number\">0</span>; <span class=\"comment\">//0~86399</span></span><br><span class=\"line\">    <span class=\"type\">short</span> mouth[<span class=\"number\">12</span>] = &#123;<span class=\"number\">31</span>,<span class=\"number\">29</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>,<span class=\"number\">30</span>,<span class=\"number\">31</span>&#125;; </span><br><span class=\"line\">    <span class=\"type\">short</span> date; </span><br><span class=\"line\">    <span class=\"type\">short</span> yue;</span><br><span class=\"line\">    <span class=\"type\">short</span> week; </span><br><span class=\"line\">    <span class=\"type\">char</span> wday[][<span class=\"number\">7</span>] = &#123;<span class=\"string\">&quot;星期一&quot;</span>,<span class=\"string\">&quot;星期二&quot;</span>,<span class=\"string\">&quot;星期三&quot;</span>,<span class=\"string\">&quot;星期四&quot;</span>,<span class=\"string\">&quot;星期五&quot;</span>,<span class=\"string\">&quot;星期六&quot;</span>,<span class=\"string\">&quot;星期天&quot;</span>&#125;;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;请输入一个在 1~366 区间的数\\n&quot;</span>);</span><br><span class=\"line\">    scanf_s(<span class=\"string\">&quot;%d&quot;</span>, &amp;tick); </span><br><span class=\"line\">    week =  (tick+<span class=\"number\">8</span>)%<span class=\"number\">7</span> ; <span class=\"comment\">//这个应该不会错的</span></span><br><span class=\"line\">    date = tick;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">12</span>; i++)  <span class=\"comment\">//依次遍历，一旦小于等于0，则该次遍历为月份</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      tick = tick - mouth[i];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tick&lt;=<span class=\"number\">0</span>)&#123;yue=i+<span class=\"number\">1</span>;<span class=\"keyword\">break</span>;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; yue; j++) <span class=\"comment\">//遍历之后获得减掉前面月份天数的值，即为当月日期</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      date= date-mouth[j<span class=\"number\">-1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;当前日期为: 20-%02d-%02d-%s\\n&quot;</span>, yue, date, wday[week]);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h3><p>说实话还是不太理解</p>\n<p>枚举方法：</p>\n<p>1、先定义枚举类型，再定义枚举变量</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span> <span class=\"title\">day</span>;</span></span><br></pre></td></tr></table></figure>\n<p>这里的DAY是枚举名</p>\n<p>2、定义枚举类型的同时定义枚举变量</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125; day;</span><br></pre></td></tr></table></figure>\n\n<p>3、省略枚举名称，直接定义枚举变量</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125; day;</span><br></pre></td></tr></table></figure>\n<p>可以使用typedef定义别名</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">enum</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125; day;</span><br><span class=\"line\">day day1 day2;</span><br></pre></td></tr></table></figure>\n<p>其中day是这个枚举名的别名，提高代码可读性</p>\n<p>下面这串代码很好的展示了枚举的应用</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">      MON=<span class=\"number\">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">DAY</span> <span class=\"title\">day</span>;</span></span><br><span class=\"line\">    day = WED;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,day);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>枚举经常与switch一同使用</strong><br>下面的代码展示了这种情况</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">color</span> &#123;</span> red=<span class=\"number\">1</span>, green, blue &#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">enum</span>  <span class=\"title\">color</span> <span class=\"title\">favorite_color</span>;</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/* 用户输入数字来选择颜色 */</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;请输入你喜欢的颜色: (1. red, 2. green, 3. blue): &quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%u&quot;</span>, &amp;favorite_color);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/* 输出结果 */</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (favorite_color)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> red:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你喜欢的颜色是红色&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> green:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你喜欢的颜色是绿色&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> blue:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你喜欢的颜色是蓝色&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;你没有选择你喜欢的颜色&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>补充</strong></p>\n<blockquote>\n<p>在所有教科书与c规范中，switch都是不允许case后接范围的，但是GNU C进行了扩展<br>可以使用case min … max这种用法表示范围（英文句号，前后有空格）</p>\n</blockquote>\n<p>示例</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> i;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>( <span class=\"string\">&quot;%d&quot;</span>,&amp;i);</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (i)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span> ... <span class=\"number\">3</span>:</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;niubi\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"指针\"><a href=\"#指针\" class=\"headerlink\" title=\"指针\"></a>指针</h3><p>C语言中几乎最重要的地方来了，难度较大，必须掌握</p>\n<h4 id=\"指针是什么\"><a href=\"#指针是什么\" class=\"headerlink\" title=\"指针是什么\"></a>指针是什么</h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span> <span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> var_runoob = <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> *p;              <span class=\"comment\">// 定义指针变量</span></span><br><span class=\"line\">    p = &amp;var_runoob;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;var_runoob 变量的地址： %p\\n&quot;</span>, p);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/img/c-pointer.png\" alt=\"image\"></p>\n<p>&amp;取址*取值<br><img src=\"/img/20230710103743.png\" alt=\"image\"></p>\n<p><strong>数组名即指针！！</strong><br><img src=\"/img/20230710105357.png\" alt=\"image\"></p>\n<p>指针控制数组<br><img src=\"/img/20230710110332.png\" alt=\"image\"></p>\n<h4 id=\"数组与指针\"><a href=\"#数组与指针\" class=\"headerlink\" title=\"数组与指针\"></a>数组与指针</h4><p>关于指针，内含的奥妙非常多，其中非常知名的就是数组即指针<br><strong>数组是指针的另一种表示</strong><br>我们可以这么看：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">char</span> a[<span class=\"number\">3</span>]= <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>,*(a+<span class=\"number\">2</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在这里面定义了一个字符串数组，但是我调用他的方式却是使用了指针<br>数组名就是一个指针常量，这里<strong>a</strong>的值是数组a[3]的首元素的地址<br>于是，我们可以这样：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">char</span> *a = <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>,a[<span class=\"number\">2</span>]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>与上面的代码并不会出现差别</p>\n<h4 id=\"多重指针\"><a href=\"#多重指针\" class=\"headerlink\" title=\"多重指针\"></a>多重指针</h4><p>可以定义一个指向指针的指针</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> *p = &amp;a;</span><br><span class=\"line\">    <span class=\"type\">int</span> **p2 = &amp;p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以此为准可以不断叠加指针，完成许多复杂的功能</p>\n<h3 id=\"结构体\"><a href=\"#结构体\" class=\"headerlink\" title=\"结构体\"></a>结构体</h3><p>与枚举有点相似<br>为了使有关联性的变量变得更加易控，也为了提高可读性，结构体因此而生</p>\n<p>结构体定义</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span>  <span class=\"title\">Stuructstudent</span>&#123;</span></span><br><span class=\"line\">    <span class=\"type\">int</span> num;</span><br><span class=\"line\">    <span class=\"type\">char</span> name;</span><br><span class=\"line\">    <span class=\"type\">char</span> sex;</span><br><span class=\"line\">    <span class=\"type\">int</span> age</span><br><span class=\"line\">&#125;;<span class=\"comment\">//声明结构体</span></span><br><span class=\"line\">Structstudent student1;<span class=\"comment\">//定义变量</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>实际上结构体就是一种数据类型，只不过是由程序员自己定义的<br>在实际生活中，我们会有各种各样的数据类型，如图书的名、ISBN、价格等可以集合为一个数据类型</p>\n</blockquote>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">book</span>&#123;</span></span><br><span class=\"line\">        <span class=\"type\">int</span> isbn;</span><br><span class=\"line\">        <span class=\"type\">char</span> name[<span class=\"number\">10</span>];</span><br><span class=\"line\">        <span class=\"type\">double</span> price;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    book b3= &#123;<span class=\"string\">&quot;活着&quot;</span>,<span class=\"number\">111111111</span>,<span class=\"number\">39</span>&#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意</strong></p>\n<blockquote>\n<p>需要注意的是，结构体中内存的分配是由结构体的中定义的变量占用的内存决定的<br>但是但是它却遵循整除内存原则，如上述的代码中<br>首先，计算机会找到一个可以被4（int的长度）整除的内存地址（如2000）<br>然后在2004后面找到可以被10（name数组的长度）整除的地址（如2010）<br>最后在在2020后面找到可以被8（double的长度）整除的地址（如2024）<br>最后还要将首末相连空隙进行填充，一共是32字节的长度，整体的长度还必须是结构里最大数据类型的长度的整数倍（这里是double的长度8的整数倍）<br>如果不是还要在后面进行填充（假如是36，就要填充到40）<br>所以在结构体中数据类型的定义的先后十分重要<br>在上述代码中只需要将isbn和name调换顺序就只需要24字节的空间   </p>\n</blockquote>\n<h2 id=\"51单片机\"><a href=\"#51单片机\" class=\"headerlink\" title=\"51单片机\"></a>51单片机</h2><h3 id=\"硬件设备与软件环境\"><a href=\"#硬件设备与软件环境\" class=\"headerlink\" title=\"硬件设备与软件环境\"></a>硬件设备与软件环境</h3><p><strong>单片机</strong></p>\n<ul>\n<li>stc89c52rc</li>\n</ul>\n<p><strong>软件环境</strong></p>\n<ul>\n<li><a href=\"https://blog.gavinccc.com//2024/01/28/VScode%E9%85%8D%E7%BD%AEC51%E7%8E%AF%E5%A2%83/\">Visual studio code + Embedded IDE + keil c</a><br>(点击跳转部署教程)<br><strong>外设</strong></li>\n<li>按钮*3</li>\n<li>4位数码管*1</li>\n<li>led*4</li>\n<li>蜂鸣器*1</li>\n<li>看门狗*1</li>\n<li>12mhz晶振</li>\n<li>usbin</li>\n</ul>\n<p><strong>注意</strong></p>\n<blockquote>\n<p>看芯片手册是一个非常重要的习惯<br>我们做的无非就是复现手册的内容而已<br>此篇章只保留作者认为重要的单片机知识</p>\n</blockquote>\n<h3 id=\"IO口的使用\"><a href=\"#IO口的使用\" class=\"headerlink\" title=\"IO口的使用\"></a>IO口的使用</h3><p>无需多言，上代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;Delay.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit led1=P2^<span class=\"number\">4</span>;</span><br><span class=\"line\">sbit led2=P2^<span class=\"number\">5</span>;</span><br><span class=\"line\">sbit led3=P2^<span class=\"number\">6</span>;</span><br><span class=\"line\">sbit led4=P2^<span class=\"number\">7</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        led1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led1 = 1;</span></span><br><span class=\"line\">        led2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led2 = 1;</span></span><br><span class=\"line\">        led3 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led3 = 1;</span></span><br><span class=\"line\">        led4 = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led4 = 1;\t\t\t\t</span></span><br><span class=\"line\">        led1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led1 = 1;</span></span><br><span class=\"line\">        led2 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led2 = 1;</span></span><br><span class=\"line\">        led3 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led3 = 1;</span></span><br><span class=\"line\">        led4 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        Delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">        <span class=\"comment\">//led4 = 1;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这是最简单的led流水灯效果，所有入门51的必备<br>IO口的控制流程如下<br>1.查看需要控制的外设的对应单片机的引脚<br>2.使用sbit定义引脚名（如led1）<br>3.为引脚编写1或0来控制引脚</p>\n<h3 id=\"按键的防抖\"><a href=\"#按键的防抖\" class=\"headerlink\" title=\"按键的防抖\"></a>按键的防抖</h3><p>我甚至不知道要不要给它单独开一个章节  </p>\n<blockquote>\n<p>我们使用按钮的时候一般使用判断  </p>\n</blockquote>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>（key1 == <span class=\"number\">1</span>）&#123;</span><br><span class=\"line\">        <span class=\"comment\">//代码区</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>然而造成的结果是，我们明明只想要一次运行，但是由于单片机速度太快，会造成非常多次运行<br>因此，我们需要防抖</p>\n</blockquote>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(key1 == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        delay(<span class=\"number\">20</span>);<span class=\"comment\">//延迟看个人而定</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(key1 == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//代码区</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>只需要一个简单延迟函数就完成了防抖</p>\n<p><strong>注意</strong></p>\n<blockquote>\n<p>不过，在较为大的工程中，延迟非常容易造成工程总体运行的堵塞情况<br>同时，延迟也无法很好的避免多次运行的问题<br>因此，在后续的工程开发中我们使用外部中断来实现按钮功能<br>外部中断是异步的（异步是计算机与电子信息中非常重要的概念）</p>\n</blockquote>\n<h3 id=\"数码管显示\"><a href=\"#数码管显示\" class=\"headerlink\" title=\"数码管显示\"></a>数码管显示</h3><p>数码管实现原理：请回顾数字电路技术课程</p>\n<p>无需多言，上代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REGX52.H&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;Delay.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit key1=P3^<span class=\"number\">2</span>;</span><br><span class=\"line\">sbit key2=P3^<span class=\"number\">3</span>;</span><br><span class=\"line\">sbit key3=P3^<span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管段码表</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> NixieTable[]=&#123;<span class=\"number\">0x03</span>,<span class=\"number\">0x9F</span>,<span class=\"number\">0x25</span>,<span class=\"number\">0x0D</span>,<span class=\"number\">0x99</span>,<span class=\"number\">0x49</span>,<span class=\"number\">0x41</span>,<span class=\"number\">0x1F</span>,<span class=\"number\">0x01</span>,<span class=\"number\">0x09</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管显示子函数</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Nixie</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> Location,Number)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">switch</span>(Location)\t\t<span class=\"comment\">//位码输出</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:P2=<span class=\"number\">0x7</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:P2=<span class=\"number\">0xB</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:P2=<span class=\"number\">0xD</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:P2=<span class=\"number\">0xE</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tP0=NixieTable[Number];\t<span class=\"comment\">//段码输出</span></span><br><span class=\"line\">\tDelay(<span class=\"number\">1</span>);\t\t\t\t<span class=\"comment\">//显示一段时间</span></span><br><span class=\"line\">\tP0=~<span class=\"number\">0x0</span>;\t\t\t\t<span class=\"comment\">//段码清0，消影</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> y = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> z = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(key1 ==<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tDelay(<span class=\"number\">80</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(key1 == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tx++;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span>(x&gt;<span class=\"number\">9</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tx = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\ty++;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span>(y&gt;<span class=\"number\">9</span>)</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\ty=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\t\tz++;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">1</span>,<span class=\"number\">1</span>);\t\t<span class=\"comment\">//在数码管的第1位置显示1</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">2</span>,<span class=\"number\">2</span>);\t\t<span class=\"comment\">//在数码管的第2位置显示2</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">3</span>,<span class=\"number\">3</span>);\t\t<span class=\"comment\">//在数码管的第3位置显示3</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">4</span>,<span class=\"number\">4</span>);\t\t<span class=\"comment\">//在数码管的第4位置显示4</span></span><br><span class=\"line\"><span class=\"comment\">//\t\tDelay(20);</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>流程</strong><br>1.弄清楚每个数字对应在数码管上的位置<br>2.位置的二进制表示<br>3.二进制转16进制<br>4.每一个数码管的启动方式（需让其他数码管关，否则出现全亮，使用延迟实现单独亮）<br>5.打包成函数，方便调用</p>\n<h3 id=\"外部中断\"><a href=\"#外部中断\" class=\"headerlink\" title=\"外部中断\"></a>外部中断</h3><h4 id=\"外部中断的定义与产生机理\"><a href=\"#外部中断的定义与产生机理\" class=\"headerlink\" title=\"外部中断的定义与产生机理\"></a>外部中断的定义与产生机理</h4><p><strong>定义</strong></p>\n<blockquote>\n<p>外部中断是单片机实时地处理外部事件的一种内部机制。当某种外部事件发生时，单片机的中断系统将迫使CPU暂停正在执行的程序，转而去进行中断事件的处理；中断处理完毕后．又返回被中断的程序处，继续执行下去。  </p>\n</blockquote>\n<p>换而言之</p>\n<blockquote>\n<p>我外部中断只要一开，你单片机就先把手中的事放放，先办我的事（领导既视感）  </p>\n</blockquote>\n<p><strong>产生机理</strong></p>\n<blockquote>\n<p>单片机在自主运行时一般是在执行一个死循环程序，在没有外界干预(输入信号)时它基本处于一个封闭状态。比如一个电子时钟，它会按时、分、秒的规律自主运行并通过输出设备(如液晶显示屏)把时间显示出来。在不需要对它进行调校时它不需要外部干预，自主封闭地运行。如果这个时钟足够准确而又不掉电的话，它可能一直处于这种封闭运行状态。但事情往往不会如此简单，在时钟刚刚上电或时钟需要重新校准．甚至时钟被带到不同时区的时候，就需要重新对时钟进行调校，这时就要求时钟必须具有调校功能。因此单片机系统往往又不会是一个单纯的封闭系统．它有些时候恰恰需要外部的干预，这也就是外部中断产生的根本原因。  </p>\n</blockquote>\n<blockquote>\n<p>在没有干预的情况下，单片机的程序在封闭状态下自主运行，如果在某一时刻需要响应一个外部事件(比如有按键按下)，这时就会用到外部中断。具体来讲，外部中断就是在单片机的一个引脚上，由于外部因素导致了一个电平的变化(比如由高变低)，而通过捕获这个变化，单片机内部自主运行的程序就会被暂时打断，转而去执行相应的中断处理程序，执行完后又回到原来中断的地方继续执行原来的程序。这个引脚上的电平变化，就申请了一个外部中断事件，而这个能申请外部中断的引脚就是外部中断的触发引脚。  </p>\n</blockquote>\n<p>以上来源于科普中国</p>\n<h4 id=\"外部中断的使用\"><a href=\"#外部中断的使用\" class=\"headerlink\" title=\"外部中断的使用\"></a>外部中断的使用</h4><p>以代码来解释</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit LED1 = P2^<span class=\"number\">4</span>;</span><br><span class=\"line\">sbit BEEP = P1^<span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Delay</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">int</span> xms)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(xms--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ti = <span class=\"number\">2</span>;</span><br><span class=\"line\">\t\tj = <span class=\"number\">239</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (--j);</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">while</span> (--i);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">InitInterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">0</span>;<span class=\"comment\">//低电平触发</span></span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;<span class=\"comment\">//外部中断1启动</span></span><br><span class=\"line\">\tPX0 =<span class=\"number\">1</span>;<span class=\"comment\">//外部中断1优先级高</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tEA= <span class=\"number\">1</span>;<span class=\"comment\">//总中断</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tInitInterrupt();</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tBEEP = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\tDelay(<span class=\"number\">10</span>);</span><br><span class=\"line\">        BEEP = <span class=\"number\">0</span>;     </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">openled1</span><span class=\"params\">()</span> interrupt 0</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tLED1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tBEEP = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个代码不按按钮的话就会持续的蜂鸣器开关，只要一按就会实现一直开</p>\n<blockquote>\n<p>只要按钮一按，中断启动，你主程序，往后稍稍，先干活先搞我的  </p>\n</blockquote>\n<blockquote>\n<p>在函数后面加上interrupt 0表示这个函数是外部中断1中断时运行的函数<br>interrupt后面的数字，根据下面的表格的中断编号</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">中断编号</th>\n<th align=\"center\">中断名称</th>\n<th align=\"center\">中断请求标志位</th>\n<th align=\"center\">中断允许控制位</th>\n<th align=\"center\">触发条件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">0</td>\n<td align=\"center\">外部中断0</td>\n<td align=\"center\">IE0</td>\n<td align=\"center\">EX0</td>\n<td align=\"center\">中断0对应的引脚检测到下降沿或低电平</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">定时器0</td>\n<td align=\"center\">TF0</td>\n<td align=\"center\">ET0</td>\n<td align=\"center\">定时器0溢出</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">外部中断1</td>\n<td align=\"center\">IE1</td>\n<td align=\"center\">EX1</td>\n<td align=\"center\">中断1对应的引脚检测到下降沿或低电平</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">定时器1</td>\n<td align=\"center\">TF1</td>\n<td align=\"center\">ET1</td>\n<td align=\"center\">定时器1溢出</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\">串口中断</td>\n<td align=\"center\">RI,TI</td>\n<td align=\"center\">ES</td>\n<td align=\"center\">串口接收或发送一帧数据</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">定时器2</td>\n<td align=\"center\">TF2</td>\n<td align=\"center\">ET2</td>\n<td align=\"center\">定时器2溢出</td>\n</tr>\n<tr>\n<td align=\"center\">6</td>\n<td align=\"center\">外部中断2</td>\n<td align=\"center\">IE2</td>\n<td align=\"center\">EX2</td>\n<td align=\"center\">中断2对应的引脚检测到下降沿或低电平</td>\n</tr>\n<tr>\n<td align=\"center\">7</td>\n<td align=\"center\">外部中断3</td>\n<td align=\"center\">IE3</td>\n<td align=\"center\">EX3</td>\n<td align=\"center\">中断3对应的引脚检测到下降沿或低电平</td>\n</tr>\n</tbody></table>\n<h4 id=\"中断优先级\"><a href=\"#中断优先级\" class=\"headerlink\" title=\"中断优先级\"></a>中断优先级</h4><p>优先级在代码里面也有注释，使用PX0就可以让外部中断0优先级变高</p>\n<blockquote>\n<p>默认的优先级是按照中断编号从小到大依次递减的<br>PX(X)H、PX(X)可以定义外部中断优先级<br>PT(X)H、PT(X)可以定义定时器优先级<br>PSH、PS可以定义串口优先级</p>\n</blockquote>\n<h3 id=\"定时器\"><a href=\"#定时器\" class=\"headerlink\" title=\"定时器\"></a>定时器</h3><h4 id=\"定时器工作原理\"><a href=\"#定时器工作原理\" class=\"headerlink\" title=\"定时器工作原理\"></a>定时器工作原理</h4><p><strong>和外部中断一样，定时器也是异步的</strong></p>\n<blockquote>\n<p>定时器的执行，，不会依靠cpu的资源，它是独立运行的，独立于cpu的外部计数器，它的计数时长依赖于时钟周期，时钟周期是晶振频率的倒数（计数的间隔的时长的来源），通过设定不同的初值实现不同的时间间隔  </p>\n</blockquote>\n<p>和外部中断一样，它的也是异步的，运行完至后可以产生中断，这样，就可以实现非阻塞式的延迟（在主进程中延迟会阻碍其他函数的运行）  </p>\n<blockquote>\n<p>就像你正在吃饭，一边又在给水桶里放水，吃着吃着，水满了，你就得赶快去把水龙头关掉或者换一个空的水桶，再回来吃饭。<br>单片机的定时器就像是一个水桶，你让它启动了，也就是水龙头打开了；开始装水了；定时在每个机器周期不断自动加 1，最后溢出了；水桶的水不断增加，最也就满出来了；定时器溢出时，你就要去做处理了；水桶的水满了，你也应该处理一下了；处理完后，单片机又可以回到刚刚开停止的地方继续运行；水桶处理了，先前你在做什么也可以继续去做什么了。</p>\n</blockquote>\n<h4 id=\"计数初值与计时时长\"><a href=\"#计数初值与计时时长\" class=\"headerlink\" title=\"计数初值与计时时长\"></a>计数初值与计时时长</h4><p>在单片机中，计数初值与计数时长之间的关系可以通过计时器的工作原理来解释。通常情况下，计时器是由一个时钟源提供时钟脉冲，计数器根据这些脉冲进行计数。计数初值决定了计数器的初始值，而计数时长则是计数器从初始值开始计数到达最终值所经过的时钟脉冲数。</p>\n<p>假设计数器的时钟源频率为 $$ (f_{clk}) $$，计数初值为$$ (N_{initial}) $$，计数器的最大计数值为$$ (N_{max}) $$，那么计数时长$$ (T) $$与计数初值$$ (N_{initial}) $$之间的关系可以用下面的公式表示：</p>\n<p>$$<br>[ T &#x3D; \\frac{(N_{max} - N_{initial} + 1)}{f_{clk}} ]<br>$$</p>\n<p><strong>然而我们定义计数初值有tl和th而且是使用16进制，这该怎么计算呢？</strong></p>\n<p>跟着我的步骤，轻松算出来！</p>\n<blockquote>\n<p>1.将 TH 和 TL 合并为一个16位的值，假设 TH 为高8位，TL 为低8位。<br>2.将这个16位的值转换为10进制，得到计数初值的实际数值。<br>3.使用计数初值的实际数值代入计时器的时钟频率，根据时钟频率计算出对应的时间。</p>\n</blockquote>\n<p>如果时钟频率是12MHz，那么使用之前提到的计数初值 TH 和 TL，合并为 16 位的值，然后将其转换为10进制。假设合并后的值为 0xABCD（TH 为 0xAB，TL 为 0xCD），那么按照之前的步骤，将 0xABCD 转换为10进制。得到43981。</p>\n<p>接着，使用时钟频率 12MHz（12,000,000Hz），可以使用以下公式计算对应的时间：<br>$$<br>[ T &#x3D; \\frac{65536 - 43981}{12,000,000} ]<br>$$<br>这将给出计数初值对应的时间，单位为秒。    </p>\n<h4 id=\"定时器的使用\"><a href=\"#定时器的使用\" class=\"headerlink\" title=\"定时器的使用\"></a>定时器的使用</h4><p>ok话不多说上代码！！！</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit led1 = P2^<span class=\"number\">4</span>;</span><br><span class=\"line\">sbit beep = P1^<span class=\"number\">0</span>;</span><br><span class=\"line\">sbit key1=P3^<span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管段码表</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> NixieTable[]=&#123;<span class=\"number\">0x03</span>,<span class=\"number\">0x9F</span>,<span class=\"number\">0x25</span>,<span class=\"number\">0x0D</span>,<span class=\"number\">0x99</span>,<span class=\"number\">0x49</span>,<span class=\"number\">0x41</span>,<span class=\"number\">0x1F</span>,<span class=\"number\">0x01</span>,<span class=\"number\">0x09</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> y = <span class=\"number\">60</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Delay</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">int</span> xms)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(xms--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ti = <span class=\"number\">2</span>;</span><br><span class=\"line\">\t\tj = <span class=\"number\">239</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (--j);</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">while</span> (--i);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//数码管显示子函数</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Nixie</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> Location,Number)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">switch</span>(Location)\t\t<span class=\"comment\">//位码输出</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:P2=<span class=\"number\">0x7</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:P2=<span class=\"number\">0xB</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:P2=<span class=\"number\">0xD</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:P2=<span class=\"number\">0xE</span>;<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tP0=NixieTable[Number];\t<span class=\"comment\">//段码输出</span></span><br><span class=\"line\">\tDelay(<span class=\"number\">1</span>);<span class=\"comment\">//显示一段时间</span></span><br><span class=\"line\">\tP0=~<span class=\"number\">0x0</span>;\t\t\t\t<span class=\"comment\">//段码清0，消影</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">InitInterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tPX0 =<span class=\"number\">1</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tET0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tEA = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">openled1</span><span class=\"params\">()</span> interrupt 0</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\ty = <span class=\"number\">60</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">timer</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tTMOD = <span class=\"number\">0x01</span>;</span><br><span class=\"line\">\tTH0 = <span class=\"number\">0xFC</span>;</span><br><span class=\"line\">\tTL0 = <span class=\"number\">0x18</span>;</span><br><span class=\"line\">\tTR0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">timerhandle</span><span class=\"params\">()</span> interrupt 1</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">int</span> icount;</span><br><span class=\"line\">\tTH0 = <span class=\"number\">0xFC</span>;</span><br><span class=\"line\">\tTL0 = <span class=\"number\">0x18</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\ticount++;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(icount &gt;= <span class=\"number\">1000</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ticount = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\ty--;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(y == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\ty = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t    beep = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tInitInterrupt();</span><br><span class=\"line\">\ttimer();</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">1</span>,<span class=\"number\">0</span>);\t\t<span class=\"comment\">//在数码管的第1位置显示1</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">2</span>,<span class=\"number\">0</span>);\t\t<span class=\"comment\">//在数码管的第2位置显示2</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">3</span>,y/<span class=\"number\">10</span>);\t\t<span class=\"comment\">//在数码管的第3位置显示3</span></span><br><span class=\"line\">\t\tNixie(<span class=\"number\">4</span>,y%<span class=\"number\">10</span>);\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>该代码实现了一个简单的秒表（虽然只有秒针）  </p>\n<p>这里计数应该是1毫秒的时间间隔，使用icount变量的累加实现1秒  </p>\n<p>interrupt 1所在的函数就是定时器计数溢出函数  </p>\n<p>TMOD定义了该定时器为工作模式1，16位计数器  </p>\n<p><strong>学到这，参透这个代码是起码的</strong></p>\n<h4 id=\"快速计算定时时长\"><a href=\"#快速计算定时时长\" class=\"headerlink\" title=\"快速计算定时时长\"></a>快速计算定时时长</h4><p>根据上面的公式，我们可以算出需要定时的时长，可是，我懒啊，算不了了啊，脑子不够啊<br><strong>其实，硬件公司都做好了，我们直接用就好了</strong></p>\n<p><strong>懒人启动器，启动！</strong></p>\n<p>以这个单片机的公司为例，人家早就把定时器的计算接口放在烧录软件了</p>\n<p>我们打开烧录软件，点开这个按钮<strong>定时器计算器</strong>就可以看到以下画面</p>\n<p><img src=\"/../img/stc%E5%AE%9A%E6%97%B6%E5%99%A8.png\" alt=\"image\">    </p>\n<p><strong>嘿嘿，只要我们轻轻的点几个按钮，就可以生成对应时长的代码了</strong>  </p>\n<p><img src=\"/../img/stc.jpg\" alt=\"image\">     </p>\n<p><strong>值得注意的是，单片机型号、时钟频率不要选错哦</strong></p>\n<p>对了，我们这个单片机集成板的晶振是12mhz的</p>\n<h3 id=\"串口通信\"><a href=\"#串口通信\" class=\"headerlink\" title=\"串口通信\"></a>串口通信</h3><p>嗨，好多呀写不下去了累死了</p>\n<h4 id=\"并行通信与串行通信\"><a href=\"#并行通信与串行通信\" class=\"headerlink\" title=\"并行通信与串行通信\"></a>并行通信与串行通信</h4><h5 id=\"并行通信\"><a href=\"#并行通信\" class=\"headerlink\" title=\"并行通信\"></a>并行通信</h5><p>当我们在一个机器传一个数据给另外一个机器的时候,我们是怎么传的呢？</p>\n<blockquote>\n<p>你可能第一时间想到计算机是二进制的，我们要先将数据转为二进制<em>（编码，请回顾数电课程）</em>，这是对的<br>比如一个数字9，二进制表示为1001，我们要传1001  </p>\n</blockquote>\n<p>我们怎么传1001呢？</p>\n<blockquote>\n<p>你可能会想到，诶！拿4条线把2个机器接起来，同一时间内，低电平表示0，高电平表示1，这样，就可以把1001作为电平信号传过去了，只要在另外的机器将二进制转为十进制<em>（译码，请回顾数电课程）</em>即可。  </p>\n</blockquote>\n<p>那么，恭喜你，你已经理解了并行通信</p>\n<p><img src=\"/../img/bx.png\" alt=\"image\"></p>\n<p>如上图所示，只要将1001按顺序放在D1,D2,D3,D4即可，需要注意的是，必须要同一时段发送与接收<br>这就是并行通信，速度快，好理解<br>但是问题也接踵而来<br><strong>如果我要发送非常多的数据，岂不是要非常多的线？</strong><br>我哪有这么多钱买线<br><strong>因此，串行通信！</strong></p>\n<h5 id=\"串行通信\"><a href=\"#串行通信\" class=\"headerlink\" title=\"串行通信\"></a>串行通信</h5><p>为了解决线路多，不好操控的问题，串行通信应运而生，什么是串行通信呢，其实就是一条线传多个数据<br>好的，你来想想怎么实现一条数据线怎么传多个数据呢？  </p>\n<blockquote>\n<p>你可能会想到，欸一段时间只传一位数据不就好了吗，然后一直传，直到传完，比如传1001.我就先传一个1，然后再传两个0，最后来个1完事，接收端再拼成一整个1001即可  </p>\n</blockquote>\n<p>这么看，你真的是天才，你又把串行通信给领悟了</p>\n<blockquote>\n<p>整体思路就是这样了，只要固定好每一位数据的发送时间，接收端按照约定好的时间接收数据，即可完成通信</p>\n</blockquote>\n<p><img src=\"/../img/cx.png\" alt=\"image\"></p>\n<p>如图所示，将1001放在D数组中，一位一位的发送，一位一位的接收，即可完成通信<br>同步和异步串行通信的区别是异步没有时钟线<br>需要注意的是，每一位发送的时间间隔必须相同</p>\n<h4 id=\"单工、半双工、全双工数据传输\"><a href=\"#单工、半双工、全双工数据传输\" class=\"headerlink\" title=\"单工、半双工、全双工数据传输\"></a>单工、半双工、全双工数据传输</h4><p><strong>单工</strong></p>\n<blockquote>\n<p>一条线，单方向传输  </p>\n</blockquote>\n<p><strong>半双工</strong></p>\n<blockquote>\n<p>一条线，双方向传输  </p>\n</blockquote>\n<p><strong>全双工</strong></p>\n<blockquote>\n<p>单方向传输，但是两条线</p>\n</blockquote>\n<h4 id=\"UART协议\"><a href=\"#UART协议\" class=\"headerlink\" title=\"UART协议\"></a>UART协议</h4><p>UART协议就是串口通信的协议，是异步串行全双工通信协议</p>\n<p>1.异步性： UART是一种异步协议，即发送和接收端不共享时钟信号。相对于同步协议，UART不需要发送和接收端保持精确的时钟同步，因此更为灵活。</p>\n<p>2.数据帧： UART通信以数据帧的形式传输数据。数据帧包括起始位（Start Bit）、数据位（通常为8位，可以是5到9位）、可选的奇偶校验位（Parity Bit，用于错误检测）、停止位（Stop Bit）。起始位和停止位的作用是标识数据帧的开始和结束。</p>\n<p>3.波特率： 波特率（Baud Rate）是衡量UART通信速率的单位，表示每秒传输的比特数。波特率定义了数据信号的传输速率，发送和接收端必须使用相同的波特率才能正常通信。</p>\n<p>4.起始位和停止位： 起始位通常是逻辑 0，用于指示数据帧的开始。停止位是逻辑 1，用于指示数据帧的结束。数据帧的每一位都以起始位开始，以停止位结束。</p>\n<p><strong>数据传输流程：</strong></p>\n<blockquote>\n<p>发送端：将数据位、奇偶校验位、起始位和停止位按照帧的格式组成数据帧，通过TXD发送。<br>接收端：通过检测RXD起始位的开始，开始接收数据。接收端根据帧的格式提取数据位、奇偶校验位、停止位等信息。</p>\n</blockquote>\n<p><img src=\"/../img/uart.png\" alt=\"image\"></p>\n<p>知道这些东西，我们就可以想象一下传输的过程了</p>\n<blockquote>\n<p>1.固定好时间间隔，也就是固定好波特率<br>2.发送起始位<br>3.根据数据发送数据的每一位<br>4.发送结束位表示发送结束</p>\n</blockquote>\n<blockquote>\n<p>假设我要发送115<br>首先我们将115转化为二进制，即01110011<br>使用代码设定好波特率<br>给发送0表示开始发送（就是将TXD设为0）<br>时间宽度走完后给TXD设为1（01110011的第一位）一个时间宽度<br>重复8次这个过程（每一次的TXD的值换到下一位）<br>8次后发送1（将TXD设为1）表示结束</p>\n</blockquote>\n<p><img src=\"/../img/uart1.png\" alt=\"image\"></p>\n<p>恭喜恭喜，串口通信也给我们造出来了，可以自己做一个串口了</p>\n<p><strong>不过再stc89c52rc中没这么麻烦，已经有现成的uart模块给我们使用了</strong></p>\n<h4 id=\"串口中断的使用\"><a href=\"#串口中断的使用\" class=\"headerlink\" title=\"串口中断的使用\"></a>串口中断的使用</h4><p>首先是串口初始化和定义</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">inituart</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tSCON = <span class=\"number\">0x50</span>;\\\\串口工作模式</span><br><span class=\"line\">\tTMOD = <span class=\"number\">0x20</span>;\\\\定时器工作模式</span><br><span class=\"line\">\tPCON = <span class=\"number\">0X80</span>;\\\\波特率翻倍</span><br><span class=\"line\">\tTL1 = <span class=\"number\">0XF3</span>;\\\\设定定时初值</span><br><span class=\"line\">\tTH1 = TL1;</span><br><span class=\"line\">\tTR1 = <span class=\"number\">1</span>;\\\\定时器溢出标志开</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">initinterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tES = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tEA = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<p>这个无需多言，注意波特率即可</p>\n<p>发送函数代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">uarthander</span><span class=\"params\">( <span class=\"type\">unsigned</span> <span class=\"type\">char</span> sibuffer )</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tSBUF = sibuffer;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(!TI);</span><br><span class=\"line\">    TI = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">updatehander</span><span class=\"params\">( <span class=\"type\">char</span>* str )</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(*str)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tuarthander(*str++);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>SBUF是缓存区，SBUF被赋值，串口助手就会输出这个值<br>这个代码也挺简单的，SBUF一次只能赋一个值，我们使用updatehander函数实现输出字符串<br>调用这个函数就可以输出字符串</p>\n<p>接收函数代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">char</span> recestring[<span class=\"number\">10</span>];  <span class=\"comment\">// 用于存储接收到的字符串，最大长度为10</span></span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">0</span>;  <span class=\"comment\">// 记录当前接收到的字符在 recestring 数组中的索引</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">comhander</span><span class=\"params\">()</span> interrupt 4</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (RI)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> w;</span><br><span class=\"line\">        w = SBUF;  <span class=\"comment\">// 从串口缓冲区读取接收到的字符</span></span><br><span class=\"line\">        recestring[i++] = w;  <span class=\"comment\">// 将字符存储到 recestring 数组中，并更新索引</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (w == <span class=\"string\">&#x27;\\n&#x27;</span>)  <span class=\"comment\">// 如果接收到换行符 &#x27;\\n&#x27;，表示接收到一条完整的字符串</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            recestring[i] = <span class=\"string\">&#x27;\\0&#x27;</span>;  <span class=\"comment\">// 在字符串末尾添加 null 终止符，形成一个C风格字符串</span></span><br><span class=\"line\">            updatehander(recestring);  <span class=\"comment\">// 调用处理接收到字符串的函数</span></span><br><span class=\"line\">            i = <span class=\"number\">0</span>;  <span class=\"comment\">// 重置索引，准备接收下一条字符串</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        RI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除接收中断标志位</span></span><br><span class=\"line\">        TI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除发送中断标志位</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>定义了一个数组，每一次都将接收到的值放在数组中直到值是换行符的时候才会将其视为完整的字符串<br>我们将接收和发送函数分开，这样就可以处理更多问题</p>\n<p>下面是我的示例工程</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;REG52.H&gt;</span>  <span class=\"comment\">// 包含8051单片机的寄存器定义头文件</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">sbit led1 = P2^<span class=\"number\">4</span>;  <span class=\"comment\">// 定义 LED1 的引脚</span></span><br><span class=\"line\">sbit led2 = P2^<span class=\"number\">5</span>;  <span class=\"comment\">// 定义 LED2 的引脚</span></span><br><span class=\"line\">sbit led3 = P2^<span class=\"number\">6</span>;  <span class=\"comment\">// 定义 LED3 的引脚</span></span><br><span class=\"line\">sbit led4 = P2^<span class=\"number\">7</span>;  <span class=\"comment\">// 定义 LED4 的引脚</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">char</span> sib[<span class=\"number\">4</span>], a, b, c, d;  <span class=\"comment\">// 定义静态变量，用于存储串口接收的数据和数码管显示的数字</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Delay</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">int</span> xms)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(xms--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ti = <span class=\"number\">2</span>;</span><br><span class=\"line\">\t\tj = <span class=\"number\">239</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (--j);</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">while</span> (--i);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> NixieTable[] = &#123;<span class=\"number\">0x03</span>, <span class=\"number\">0x9F</span>, <span class=\"number\">0x25</span>, <span class=\"number\">0x0D</span>, <span class=\"number\">0x99</span>, <span class=\"number\">0x49</span>, <span class=\"number\">0x41</span>, <span class=\"number\">0x1F</span>, <span class=\"number\">0x01</span>, <span class=\"number\">0x09</span>&#125;;  <span class=\"comment\">// 数码管对应数字的表格</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Nixie</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> Location, Number)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">switch</span>(Location)  <span class=\"comment\">// 控制数码管的位置</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>: P2 = <span class=\"number\">0x7</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>: P2 = <span class=\"number\">0xB</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>: P2 = <span class=\"number\">0xD</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span>: P2 = <span class=\"number\">0xE</span>; <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tP0 = NixieTable[Number];  <span class=\"comment\">// 显示对应数字</span></span><br><span class=\"line\">\tDelay(<span class=\"number\">5</span>);  <span class=\"comment\">// 延时</span></span><br><span class=\"line\">\tP0 = ~<span class=\"number\">0x0</span>;  <span class=\"comment\">// 关闭数码管</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">inituart</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tSCON = <span class=\"number\">0x50</span>;  <span class=\"comment\">// 配置串口工作方式</span></span><br><span class=\"line\">\tTMOD = <span class=\"number\">0x20</span>;  <span class=\"comment\">// 配置计时器工作方式</span></span><br><span class=\"line\">\tPCON = <span class=\"number\">0X80</span>;  <span class=\"comment\">// 设置波特率倍增</span></span><br><span class=\"line\">\tTL1 = <span class=\"number\">0XF3</span>;  <span class=\"comment\">// 计时器1低位初始值</span></span><br><span class=\"line\">\tTH1 = TL1;  <span class=\"comment\">// 计时器1高位初始值</span></span><br><span class=\"line\">\tTR1 = <span class=\"number\">1</span>;  <span class=\"comment\">// 启动计时器1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">void</span> <span class=\"title function_\">initinterrupt</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tIT0 = <span class=\"number\">1</span>;  <span class=\"comment\">// 外部中断0触发方式为下降沿触发</span></span><br><span class=\"line\">\tEX0 = <span class=\"number\">1</span>;  <span class=\"comment\">// 允许外部中断0</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tES = <span class=\"number\">1</span>;  <span class=\"comment\">// 允许串口中断</span></span><br><span class=\"line\">\tEA = <span class=\"number\">1</span>;  <span class=\"comment\">// 允许总中断</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">uarthander</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> sibuffer)</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tSBUF = sibuffer;  <span class=\"comment\">// 将数据发送到串口缓冲区</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (!TI);  <span class=\"comment\">// 等待发送完成</span></span><br><span class=\"line\">    TI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除发送中断标志位</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">lightup</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> byte)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled1 = ~led1;  <span class=\"comment\">// 切换 LED1 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">2</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled2 = ~led2;  <span class=\"comment\">// 切换 LED2 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">3</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled3 = ~led3;  <span class=\"comment\">// 切换 LED3 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(byte == <span class=\"number\">4</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tled4 = ~led4;  <span class=\"comment\">// 切换 LED4 状态</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">updatehander</span><span class=\"params\">(<span class=\"type\">char</span>* str)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(*str)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tuarthander(*str++);  <span class=\"comment\">// 逐字符发送字符串到串口</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">handergo</span><span class=\"params\">()</span> interrupt 0</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tupdatehander(<span class=\"string\">&quot;Hello,World\\n&quot;</span>);  <span class=\"comment\">// 外部中断0触发时发送 &quot;Hello,World\\n&quot; 到串口</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">static</span> <span class=\"type\">char</span> w = <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">abcd</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\ta = sib[<span class=\"number\">0</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">\tb = sib[<span class=\"number\">1</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">\tc = sib[<span class=\"number\">2</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">\td = sib[<span class=\"number\">3</span>] - <span class=\"string\">&#x27;0&#x27;</span>;  <span class=\"comment\">// 将字符转换为数字</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">comhander</span><span class=\"params\">()</span> interrupt 4</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tw = SBUF;  <span class=\"comment\">// 从串口缓冲区读取接收到的字符</span></span><br><span class=\"line\">\tsib[j++] = w;  <span class=\"comment\">// 存储接收到的字符</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(j &gt;= <span class=\"number\">4</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tj = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\tabcd();  <span class=\"comment\">// 处理接收到的字符，转换为数字</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tRI = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除接收中断标志位</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tlightup(sib);  <span class=\"comment\">// 控制LED状态</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tinitinterrupt();  <span class=\"comment\">// 初始化中断</span></span><br><span class=\"line\">\tinituart();  <span class=\"comment\">// 初始化串口</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;\t\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">1</span>, b);\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">2</span>, c);\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">3</span>, d);\t\t</span><br><span class=\"line\">\t\tNixie(<span class=\"number\">4</span>, a);  <span class=\"comment\">// 循环显示数字到数码管</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>这个代码完成了在串口助手输入4位数字，数码管显示这4位数字的功能<br>简单吧，这就是内置uart的使用<br>那么接下来，我们就得自己做一个串口了</p>\n<h4 id=\"模拟串口\"><a href=\"#模拟串口\" class=\"headerlink\" title=\"模拟串口\"></a>模拟串口</h4><p>实际上就是根据uart协议的内容，自己写一个串口出来</p>\n<p>前文已经详细的说明了流程  </p>\n<blockquote>\n<p>1.固定好时间间隔，也就是固定好波特率<br>2.发送起始位<br>3.根据数据发送数据的每一位<br>4.发送结束位表示发送结束  </p>\n</blockquote>\n<p>话不多说，上代码！</p>\n<p>串口初始化</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sbit RXD2 = P3^<span class=\"number\">0</span>;  <span class=\"comment\">// 定义串口接收引脚</span></span><br><span class=\"line\">sbit TXD2 = P3^<span class=\"number\">1</span>;  <span class=\"comment\">// 定义串口发送引脚</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> buffer[<span class=\"number\">20</span>];  <span class=\"comment\">// 存储接收到的数据</span></span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> getnum = <span class=\"number\">0</span>;  <span class=\"comment\">// 接收数据的计数器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">UartInit</span><span class=\"params\">()</span>  <span class=\"comment\">// 串口初始化函数，波特率：4800bps @ 12.000MHz</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    TMOD = <span class=\"number\">0x20</span>;  <span class=\"comment\">// 设置定时器模式\t\t</span></span><br><span class=\"line\">    TH1 = <span class=\"number\">0x30</span>;     </span><br><span class=\"line\">    TL1 = <span class=\"number\">0x30</span>;    </span><br><span class=\"line\">    EA = <span class=\"number\">1</span>;</span><br><span class=\"line\">    ET1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    TF1 = <span class=\"number\">0</span>;  <span class=\"comment\">// 清除TF1标志</span></span><br><span class=\"line\">    TR1 = <span class=\"number\">1</span>;  <span class=\"comment\">// 定时器1开始计时</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">uart</span><span class=\"params\">()</span> interrupt 3</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (TR1 == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        TH1 = <span class=\"number\">0x30</span>;  <span class=\"comment\">// 波特率4800bps  </span></span><br><span class=\"line\">        TL1 = <span class=\"number\">0x30</span>;  <span class=\"comment\">// 定时器</span></span><br><span class=\"line\">        TF1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">waittf</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (TF1 == <span class=\"number\">0</span>);<span class=\"comment\">//定时器溢出做延迟</span></span><br><span class=\"line\">    TF1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>发送函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">putdata</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> str)</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> i = <span class=\"number\">8</span>;</span><br><span class=\"line\">    str = str + str;<span class=\"comment\">//由于波特率误差，发送的AscII码会小一半所以我直接加一倍</span></span><br><span class=\"line\">    TR1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    TXD2 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    waittf();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        TXD2 = str &amp; <span class=\"number\">0x01</span>;</span><br><span class=\"line\">        waittf();</span><br><span class=\"line\">        str &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    TXD2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    waittf();</span><br><span class=\"line\">    TR1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">putdatastr</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> *str)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (*str)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        putdata(*str);  <span class=\"comment\">// 发送字符串中的每个字符</span></span><br><span class=\"line\">        str++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>由于波特率误差，发送的AscII码会小一半所以我直接加一倍<br>首先赋值TXD2为1为起始位<br>随后使用waitf函数做时间间隔<br>使用&amp;0x01将值位赋值给TXD实现uart中的每一位数据位传输重复8次<br>最后发送结束位  </p>\n</blockquote>\n<p>一样的道理，接收函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">getdata</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> str = <span class=\"number\">0x0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (RXD2 == <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        TR1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">        waittf();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (i &lt; <span class=\"number\">8</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            str &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (RXD2 == <span class=\"number\">1</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                str |= <span class=\"number\">0x80</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            waittf();</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        buffer[getnum++] = str;  <span class=\"comment\">// 存储接收到的数据</span></span><br><span class=\"line\">        TR1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(getnum == <span class=\"number\">20</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        getnum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>监控RXD，只要为0立马开始赋值<br>起始位、传数据位<br>监控到RXD不为0就结束接收<br>其余流程与发送函数原理相同</p>\n</blockquote>\n<p>最后，附上main函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    TXD2 = <span class=\"number\">0</span>;  <span class=\"comment\">// 初始化串口发送引脚</span></span><br><span class=\"line\">    UartInit();  <span class=\"comment\">// 初始化串口</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(RXD2 == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> maxnum = <span class=\"number\">10</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (maxnum--)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (RXD2 == <span class=\"number\">0</span>)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    getdata();  <span class=\"comment\">// 接收数据</span></span><br><span class=\"line\">                    maxnum =  <span class=\"number\">10</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(buffer[<span class=\"number\">0</span>] != <span class=\"number\">0</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                putdatastr(buffer);  <span class=\"comment\">// 发送接收到的数据</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (buffer[i] != <span class=\"number\">0</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        buffer[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                getnum = <span class=\"number\">0</span>;</span><br><span class=\"line\">                putdata(<span class=\"number\">0x0d</span>);  <span class=\"comment\">// 发送回车符</span></span><br><span class=\"line\">                putdata(<span class=\"number\">0x0a</span>);  <span class=\"comment\">// 发送换行符</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这样，就实现了自己做一个模拟串口，关键在于调波特率<br>需要十分准确才可以正常传输数据<br>在51大作业篇，我会详细写明模拟串口接收时会与其他中断冲突导致乱码，在这里不进行过多的讨论</p>\n","popularPost_tmp_postPath":true,"eyeCatchImage":"/img/2023-07-08101610.png","popularPost_tmp_gaData":{"updated":"Wed Jan 31 2024 22:53:13 GMT+0800 (中国标准时间)","title":"从51到32","path":"2023/07/08/从51到32/","eyeCatchImage":"/img/2023-07-08101610.png","excerpt":null,"date":{"_isAMomentObject":true,"_i":"2023-07-08T01:52:35.000Z","_isUTC":false,"_pf":{"empty":false,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":false,"invalidEra":null,"invalidMonth":null,"invalidFormat":false,"userInvalidated":false,"iso":false,"parsedDateParts":[],"era":null,"meridiem":null,"rfc2822":false,"weekdayMismatch":false},"_locale":{"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"_longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"_invalidDate":"Invalid date","_dayOfMonthOrdinalParse":{},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"_months":["January","February","March","April","May","June","July","August","September","October","November","December"],"_monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"_week":{"dow":0,"doy":6},"_weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"_weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"_weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"_meridiemParse":{},"_eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"_abbr":"en","_config":{"calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"longDateFormat":{"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},"invalidDate":"Invalid date","dayOfMonthOrdinalParse":{},"relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","ss":"%d seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","w":"a week","ww":"%d weeks","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"week":{"dow":0,"doy":6},"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"weekdaysMin":["Su","Mo","Tu","We","Th","Fr","Sa"],"weekdaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"meridiemParse":{},"eras":[{"since":"0001-01-01","until":null,"offset":1,"name":"Anno Domini","narrow":"AD","abbr":"AD"},{"since":"0000-12-31","until":null,"offset":1,"name":"Before Christ","narrow":"BC","abbr":"BC"}],"abbr":"en"},"_dayOfMonthOrdinalParseLenient":{}},"_d":"2023-07-08T01:52:35.000Z","_isValid":true,"_z":null},"pv":0,"totalPV":0,"categories":"","tags":["C语言"],"internalLinks":[],"keywords":[],"keywordsLength":0}}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cls214yq40001zcjvg5s33n7g","tag_id":"cls214yqb0004zcjvfgkv3rat","_id":"cls214yqh000bzcjv9r4gbhjs"},{"post_id":"cls214yq90003zcjvbj6gaotx","tag_id":"cls214yqh000azcjvcuf723p7","_id":"cls214yqj000gzcjv1nibbftv"},{"post_id":"cls214yqe0006zcjvgkri0vxm","tag_id":"cls214yqi000ezcjv49x9hmoq","_id":"cls214yqk000jzcjv3lfrfpbz"},{"post_id":"cls214yqf0008zcjv7dno621f","tag_id":"cls214yqk000izcjvh6fgepgu","_id":"cls214yqk000kzcjv15figelg"},{"post_id":"cls214yql000lzcjv8y8tbznk","tag_id":"cls214yqn000nzcjvf71nf791","_id":"cls214yqn000pzcjv2t5u8wza"},{"post_id":"cls214yqm000mzcjvd0ztellx","tag_id":"cls214yqn000ozcjv96n9944u","_id":"cls214yqn000qzcjvfbeubx7j"}],"Tag":[{"name":"3D建模","_id":"cls214yqb0004zcjvfgkv3rat"},{"name":"C51","_id":"cls214yqh000azcjvcuf723p7"},{"name":"VUE","_id":"cls214yqi000ezcjv49x9hmoq"},{"name":"VScode","_id":"cls214yqk000izcjvh6fgepgu"},{"name":"前端","_id":"cls214yqn000nzcjvf71nf791"},{"name":"C语言","_id":"cls214yqn000ozcjv96n9944u"}]}}